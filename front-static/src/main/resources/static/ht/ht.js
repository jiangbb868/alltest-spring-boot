var noAlert = true;
var htl = '{\n\
"corp": "福建星网锐捷通讯股份有限公司",\n\
"project": "一年内使用(包年)",\n\
"start": "2016-04-22",\n\
"hashCode": "176e58da64bb2a605b4285c1c186d2fb8cf5a6c6c2ecbee09cc069d3c5c7637cc5d9a71aa0a9f1aafe768b10675c289233513e80451d84c7210c43623b6a608b576780188e2bd6fa9cf44cfb2249dea67c6d63483475818b695a007f37eb7ee4509eb986522fe0f93c6b0cc3877c310c83c5896b0b30744a508708e6fb5314df",\n\
"t1": "33611500794112",\n\
"t2": "1461369598844",\n\
"signature": "726fbe7eb692d4fe2741bcfaa3629060c9fac9312b5866f827c7842950cf75c7477ce60d0b2334d109f83839416cb6728c4a5040bb7c1284882faa83b00ea05a8a19dafb2325de5a5a91161f4ebb8faaa22950da5d0bdcd6866e99583d0293ea3199b6f4de27c625aeb679d7e567c7e98609780d74c2cc69dd67dfa330729589"\n\
}';
!function(G,k,d){"use strict";var H="ht";if(!G[H]){!function(){for(var g=0,B=["ms","moz","webkit","o"],K=0;K<B.length&&!G.requestAnimationFrame;++K)G.requestAnimationFrame=G[B[K]+"RequestAnimationFrame"],G.cancelAnimationFrame=G[B[K]+"CancelAnimationFrame"]||G[B[K]+"CancelRequestAnimationFrame"];G.requestAnimationFrame||(G.requestAnimationFrame=function(J){var I=(new Date).getTime(),Q=Math.max(0,16-(I-g)),H=G.setTimeout(function(){J(I+Q)},Q);return g=I+Q,H}),G.cancelAnimationFrame||(G.cancelAnimationFrame=function(w){Q(w)})}();var S,g,b,f,e=G.document,A=null,L=G[H]={},t=G[H+"config"],j=L.Default=t&&t.Default||{},V=L.Style=t&&t.Style||{},w=L.Color=t&&t.Color||{},J=L.IsGetter=t&&t.IsGetter||{},l=Math,r=l.round,u=l.floor,X=l.ceil,s=l.sqrt,C=l.max,$=l.min,O=l.abs,U=l.cos,R=l.acos,m=l.sin,D=l.pow,h=l.asin,n=l.PI,N=2*n,p=n/2,c=l.tan,_=l.atan2,a=l.random,K=!1,o=!1,P=G.parseInt||global.parseInt,W="2017-02-15",Z=function(){try{return G.navigator.platform.indexOf("Win")>-1}catch(I){}}(),Y=function(Q){return Q*Q},z=G.setTimeout,Q=G.clearTimeout,E=G.location,T=G.navigator?G.navigator.userAgent.toLowerCase():"",v=function(s){return s.test(T)},I=v(/msie/)||v(/trident/),x=v(/msie 10/),M=v(/firefox/),B=v(/mac/),F=j.isTouchable===d?Z?!1:e?"ontouchend"in e:!1:j.isTouchable,i="default",q="single",y="multiple",Li="front",Cn="back",yi="left",Tg="right",Fe="top",Fd="bottom",zq="center",Qb="eye",Ip="middle",Sg="east",_l="west",Mg="north",no="none",Ae="px",_r="absolute",yd="border",Ec="triangle",rp="rect",tg="circle",gr="cylinder",Qm="shape",Fc="items",Mb="normal",En="remove",Go="clear",Ql="width",Hh="height",ic="ingroup",wj="check",Mc="uncheck",Or="radio",gq="radioOn",of="radioOff",ig="points",Qo="values",Bp="series",Hi="body",fq="label",Gm="label2",ej="note",Nb="note2",vl="icons",ke="labelFont",Cm="labelColor",gp="labelSelectColor",Pd="note.expanded",hp="note2.expanded",kr="edge.expanded",vq="edge.points",Ri="edge.type",$q="rotation",Kf="getRotation",Ol="setRotation",Np="hidden",Hc="visible",Hg="tuv",Dp="no",sr="select",cs="currentSubGraph",Od="selectBackground",lg="autoMakeVisible",Lg="autoHideScrollBar",Kl="scrollBarColor",rk="scrollBarSize",Fg="indent",Of="rowHeight",Gk="columnLineColor",Ub="rowLineColor",oj="columnLineVisible",sk="rowLineVisible",_e="visibleFunc",xs="expandIcon",ek="collapseIcon",eq="checkMode",ds="sortFunc",rq="editable",ul="batchEditable",Fr="tristate",Ej="asc",Ho="desc",Ig="position",zh="elevation",Gp="children",er="translateX",fk="translateY",hd="dataModel",Sq="shape3d",en="shape3d.resolution",pn="shape3d.visible",pb="shape3d.from.visible",Vo="shape3d.to.visible",Zm="shape3d.top.visible",Pj="shape3d.bottom.visible",db="repeat.uv.length",Rb="serializeValue",vh="deserializeValue",Se="centerUniform",Uk="rgba(255,255,255,0)",uq="style",Cj="attr",eg="field",Gd="string",Wf="boolean",Dq="color",Te="int",_g="number",kk="ew-resize",ur="ns-resize",Kb="pointer",us="auto",An="mousedown",Sk="mousemove",kq="mouseup",Uf="mouseout",zl="touchstart",rl="touchmove",ci="touchend",wf="keydown",Ai="keyup",Wr=M?"DOMMouseScroll":"mousewheel",Sc=F?[zl,rl,ci]:[wf,Ai,An,Sk,kq,Uf,Wr,"contextmenu"],Qi=A,Ve=A,re=A,zd=kq.length,ff=function(){re&&(Q(re.timeout),re=A)},Jm=function(){re&&pc(re.e,re.info)};G.addEventListener&&(F||(G.addEventListener(Uf,function(){ff()},!1),(Wr != 'mousewheel' && Wr != 'DOMMouseScroll' && G.addEventListener(Wr,function(){Sr()},!1))),G.addEventListener(Ai,function(X){91===X.keyCode?_b={}:delete _b[X.keyCode]},!0),G.addEventListener(wf,function(F){_b[F.keyCode]=!0},!0));var ep,co,jd,Xg=!1,Pn=A,Db=A,Co={},Il={},ng={},ki={},Kg={},_b={},Gl={},bl={},eo={},qn=[],Qe={},ah=A,Aj=A,Rq=function(){},yk=function(){throw"Oops!"},Zl=[0,0,0],mp=[0,0,0,0],ad={x:0,y:0,width:0,height:0},ze=A,lb=A,ik=A,th=function(T){lb&&!T._72O&&(ik||(ik={}),ik[T._72O=ko()]=T),ep!=A?Mo()<.05&&f&&!co&&(kj=ff):kj=Nm},jn=function(U,g,d,v){lb||(lb={});var W=lb[U];if(W){if(W.url===g)return;W.image.onload=Rq,W.image.onerror=Rq}var J=new Image;lb[U]={image:J,url:g},J.onload=function(){d&&(J.width=d),v&&(J.height=v),j.handleImageLoaded(U,J),_k(U,J)},J.onerror=function(){_k(U,j.handleUnfoundImage(U,g)||A)},J.src=g},_k=function(i,q){if(Il[i]=q,delete lb[i],zr(lb)&&(lb=A,ik)){for(var l in ik){var u=ik[l];u.invalidateAll&&u.invalidateAll(),u.redraw&&u.redraw(),u.iv(),delete u._72O}ik=A}if(q&&ik)for(var l in ik){var u=ik[l];u.invalidateAll&&u.invalidateAll(),u.redraw&&u.redraw(),u.iv()}},Vq=function(){return G.performance&&G.performance.now?G.performance.now():Date.now()},tr=function(s,O){O?Q(s):G.cancelAnimationFrame(s)},Pf=function(H,$,j){return{width:H,height:$,comps:Uh(j)?j:[j]}},lj=function(Y,C){return{type:tg,rect:[Y,C,1.6,1.6],borderWidth:1,borderColor:fp,gradient:xf,gradientColor:wk,background:fp}},wi=function(z,L){return Pf(16,16,{type:Ec,rect:[4,4,10,8],background:z,rotation:L?1.57:3.14})},Xq=function(J,O){return Pf(16,16,{type:Ec,rect:[4,4,8,7],background:J,rotation:O?3.14:0})},om=function(A){var D=A._orientation;return"horizontal"===D||"h"===D},dr=function(e){L.z=g=e},Ah=function(g){var $=2,q=0;for(var M in g)M.length===$&&P(M,32)===Ie&&(ah=Aj=g[M]),q++;return q},cn=function(r,b,X){return X?{x:r-X,y:b-X,width:2*X+1,height:2*X+1}:F?{x:r-5,y:b-5,width:11,height:11}:{x:r-1,y:b-1,width:3,height:3}},Pm=function(b){return(/ble$/.test(b)||/ed$/.test(b)||J[b]?"is":"get")+b.charAt(0).toUpperCase()+b.slice(1)},Wh=function(j){return"set"+j.charAt(0).toUpperCase()+j.slice(1)},qd=function(J){return typeof J===Gd||J instanceof String},Sj=function(A){return typeof A===_g},Nm=function(m){return typeof m===Wf},Lc=function(L){return L&&"object"==typeof L},Ih=function(V){return"function"==typeof V},Uh=function(u){return u instanceof Array},rc=function(z){return z instanceof xm},Hn=function(y){return Uh(y)?new xm(y):y},vj=function(F){return F instanceof Je},yb=function(U){return U instanceof Dj},vs=function(x){return x instanceof Tn},$d=function(A){return A&&"IFRAME"===A.tagName},yg=function(B){return B==A?B:parseFloat(B.toFixed(2))},gi=function(Y,o,K){var B,c=o.length;if(K)for(var z=0;K>z;z++)if(3===c)Y.push(o[0]),Y.push(o[1]),Y.push(o[2]);else for(B=0;c>B;B++)Y.push(o[B]);else if(3===c)Y.push(o[0]),Y.push(o[1]),Y.push(o[2]);else for(B=0;c>B;B++)Y.push(o[B])},Cf=function(W){return W?Lc(W)?W:{}:!1},tq=function(s,A,t){var e,c=Lc(s)?s:s.prototype;for(e in A)t&&c[e]!==d||(c[e]=A[e]);return s},Qf=function(p){return String.fromCharCode(p)},vd=function(E){for(var y,i=0,F="";i<E.length;i++)y=E[E.length-1-i],"%"===y?y="'":"a"===y?y='"':"]"===y&&(y="\\"),F+=Qf(y.charCodeAt(0)-1);return F},xi=function(N,v,d){N.superClass.constructor.apply(v,d)},zr=function(q){for(var n in q)return!1;return!0},wh=function(o){return o?0===o.length:!0},dh=function(S,$){return S.x===$.x&&S.y===$.y&&S.width===$.width&&S.height===$.height},mm=function(H,g,q){return g>H?g:H>q?q:H},Mo=function(){var N=1e4*m(zd++);return N-u(N)},Xd=function(a,_,z){return Lp(a.x,a.y,_.x,_.y,z.x,z.y,z.x+z.width,z.y,!0)||Lp(a.x,a.y,_.x,_.y,z.x+z.width,z.y,z.x+z.width,z.y+z.height,!0)||Lp(a.x,a.y,_.x,_.y,z.x+z.width,z.y+z.height,z.x,z.y+z.height,!0)||Lp(a.x,a.y,_.x,_.y,z.x,z.y+z.height,z.x,z.y,!0)},Lp=function(I,M,c,s,F,T,g,z,R){var v=(g-F)*(M-T)-(z-T)*(I-F),w=(z-T)*(c-I)-(g-F)*(s-M);if(0!==w){var V=v/w,_=I+V*(c-I),H=M+V*(s-M);return R&&(_+fs<$(I,c)||_-fs>C(I,c)||_+fs<$(F,g)||_-fs>C(F,g)||H+fs<$(M,s)||H-fs>C(M,s)||H+fs<$(T,z)||H-fs>C(T,z))?A:[_,H]}return A},Vr=function(I,f,i){if(I&&i)if(f){if(f===uq)return I.getStyle(i);if(f===Cj)return I.getAttr(i);if(f===eg)return I[i]}else if(i=Pm(i),I[i])return I[i]();return d},Lj=function(H,N,o,m){if(H&&o)if(N){if(N===uq)H.s(o,m);else if(N===Cj)H.a(o,m);else if(N===eg){var C=H[o];H[o]=m,H.fp("f:"+o,C,m)}}else o=Wh(o),H[o]&&H[o](m)},wl=function(V,C,i,O,r){C&&Gg(V,i,O,1,r,C)},we=function(Q,e,g,l){var U=1-Q;return U*U*e+2*Q*U*g+Q*Q*l},md=function(w,l,A,r,$){var j=1-w;return j*j*j*l+3*j*j*w*A+3*j*w*w*r+w*w*w*$},Ob=function(f){var T,G,H,F,U=0;return f.forEach(function(B){if(T=B.length,T>0)for(G=B[0],F=1;T>F;F++)H=B[F],U+=Qd(G,H),G=H}),U},Le=function(f,T,H){var I="__"+f,e=function(y){H["handle_"+f](y)};H[I]||(H[I]=e,(f!='mousewheel'&&f!='DOMMouseScroll'&&T.addEventListener(f,e,!1)))},gd=function(B,I,C){var v="__"+B,l=C[v];l&&(I.removeEventListener(B,l,!1),delete C[v])},tf=function($,t){var X="_"+t;$[Pm(t)]=function(){return this[X]},$[Wh(t)]=function(T){var F=this[X];this[X]=T,this.fp(t,F,T)}},cm=function(P){return k.create(P)},Gr=function(e){if(!e.element){var J,r;(J=e.textField)?r=Sb(Cd.TextField,J):(J=e.textArea)?r=Sb(Cd.TextArea,J):(J=e.button)?r=Sb(Cd.Button,J):(J=e.comboBox)?r=Sb(Cd.ComboBox,J):(J=e.checkBox)?r=Sb(Cd.CheckBox,J):(J=e.radioButton)?r=Sb(Cd.RadioButton,J):(J=e.slider)?r=Sb(Cd.Slider,J):(J=e.colorPicker)?r=Sb(Cd.ColorPicker,J):(J=e.image)&&(r=Sb(Cd.Image,J)),r&&(e.element=r)}},Pr=function(v,$){var Y=hr(v);return Y._ht=$,Y},hr=function(j){var O=e.createElement("div"),x=O.style;return O.tabIndex=-1,O.onkeydown=sp,x.msTouchAction=no,x.cursor=i,lk(O,A,0),F&&x.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",A),j&&(x.overflow=Np),O},Ad=function(h){var v=e.createElement("canvas"),G=v.style;return G.msTouchAction=no,G.pointerEvents=no,lk(v,A,0),h&&qc(h,v),v},lk=function(A,i,a){var J=A.style;J.border=i?i+" solid 1px":0,J.outline=0,J.padding=a?"0 "+a+Ae:0,Lh(A)},Lh=function(N){var U=N.style;U.position=_r,U.margin=0,U.setProperty("box-sizing","border-box",A),U.setProperty("-moz-box-sizing","border-box",A)},Ye=function(S,K,l,C){C||(C=ae),K!=A&&(S.width=K*C,S.style.width=K+Ae),l!=A&&(S.height=l*C,S.style.height=l+Ae)},qc=function(s,C,q){s.appendChild(C),q&&(C.style.position=_r)},Jf=function($,t){t.split||(t+="");for(var m,Q=t.split("\n"),E=0,I=Q.length,N=0;I>N;N++){var v=Vi($.font,Q[N]);v.width>E&&(E=v.width),m||(m=v.height)}return $.ss=Q,{width:E,height:m*I}},Eq=function(T,m,b,j,K,X){var G=m.length;if(1===G)qe(T,m[0],b,j,K);else for(var g=b.height/G,U={x:b.x,y:b.y,width:b.width,height:g},H=0;H<m.length;H++)X?hj(T,m[H],j,K,U.x,U.y,U.width,U.height,X):qe(T,m[H],U,j,K),U.y+=g},qe=function(W,k,I,K,s){W.font=K?K:Pg,W.fillStyle=s?s:Ug,W.textAlign=zq,W.textBaseline=Ip;var V,u;I?I.width===d?(V=I.x,u=I.y):(V=I.x+I.width/2,u=I.y+I.height/2):(V=0,u=0),W.fillText(k,r(V),r(u))},Jp=function(C){C.getView&&(C=C.getView());var S=C.offsetWidth||C.scrollWidth;return!S&&C.style.width&&(S=P(C.style.width)),S},se=function(f){f.getView&&(f=f.getView());var Q=f.offsetHeight||f.scrollHeight;return!Q&&f.style.height&&(Q=P(f.style.height)),Q},lo=function(){var n=function(G){sp(G),G.stopPropagation()},T=F?[zl]:[wf,An,Wr];return function(z){var Q=hr(),C=Q.style;return C.backgroundColor=j.disabledBackground,z&&(C.backgroundImage="url("+z+")",C.backgroundPosition="50% 50%",C.backgroundRepeat="no-repeat no-repeat"),T.forEach(function(y){Q.addEventListener(y,n)}),Q}}(),Rd=function($){var L=$.getContext("2d");return L.save(),L.lineCap=sn,L.lineJoin=Rr,L},kj=function(M,S,V,b){Io(M,S*ae,V*ae),b*=ae,1!==b&&M.scale(b,b)},Io=function(t,I,Y){t.translate(I,Y)},$e=function(j,B){j.rotate(B)},pr=function(x){if(e.activeElement!==x)if(F)x.focus();else{var V=Om(),C=V.target;x.focus(),C.scrollLeft=V.left,C.scrollTop=V.top}},$f=function($){return $&&$.getView?$.getView():$},Xf=function(o,R,g,t,E){2===arguments.length&&(g=R.y,t=R.width,E=R.height,R=R.x);var P=$f(o),T=P.style;(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)!==P&&(R!==d&&(T.left=R+Ae),g!==d&&(T.top=g+Ae),t!==d&&(T.width=t+Ae),E!==d&&(T.height=E+Ae)),o.endEditing&&!F&&o.endEditing(),o.redraw&&o.redraw(),o.invalidate&&o.invalidate(),o.onLayouted&&o.onLayouted(R,g,t,E),o._41O&&o._41O("layout")},Gq=function(P){var n=P.touches[0];return n?n:P.changedTouches[0]},jk=function(W){j.popup&&j.popup.close(),j.popup=W},Ji=A,Jc=function(d){Ji.handleWindowTouchMove(d)},Ak=function(L){Ji.handleWindowTouchEnd(L),G.removeEventListener(rl,Jc,!1),G.removeEventListener(ci,Ak,!1),Ji=A},Tf=function(B){Ji.handleWindowMouseMove(B)},Jh=function(R){Ji.handleWindowMouseUp(R),G.removeEventListener(Sk,Tf,!1),G.removeEventListener(kq,Jh,!1),Ji=A},tp=function(e){return 1===_h(e)},Nj=function(X,f){return f?f.keyCode===X:_b[X]},tn=function(C){return gb(C)&&Nj(65,C)},nq=function(c){return Nj(46,c)||Nj(8,c)},hl=function(P){return function(T){return T?T.keyCode===P:_b[P]}},Ie=573,rj=[65,83,68,87,37,38,39,40,32,13,27],Nn=hl(rj[0]),Gf=hl(rj[1]),Gj=hl(rj[2]),To=hl(rj[3]),Pb=hl(rj[4]),nj=hl(rj[5]),Zb=hl(rj[6]),hh=hl(rj[7]),oh=hl(rj[8]),kd=hl(rj[9]),jp=hl(rj[10]),Un={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},es=[2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,13,331],cr=A,Fm=A,wn=function(w,K){cr||(cr=Ad()),Ye(cr,w,K,1);var y=Rd(cr);return y.clearRect(0,0,w,K),y},Jg=function(){var K,Z={};return function(L){var Q,U=Z[L];return U||(K||(K=Ad(),Ye(K,1,1,1)),Q=K.getContext("2d"),Q.clearRect(0,0,1,1),Gg(Q,0,0,1,1,L),U=Q.getImageData(0,0,1,1).data,U=Z[L]=[U[0],U[1],U[2],U[3]]),U}}(),br=function($){if(!qd($))return $;var M=Jg($);return M.CA||(M.CA=[M[0]/255,M[1]/255,M[2]/255,M[3]/255]),M.CA},Kj=function(n,y,N,u){var F=Ad();F.width=N,F.height=u;var Q=F.getContext("2d");Q.drawImage(n,0,0,N,u);try{for(var S=Q.getImageData(0,0,N,u),C=S.data,o=0,H=C.length;H>o;o+=4){var M=C[o+0],l=C[o+1],w=C[o+2];C[o+0]=y[0]*M,C[o+1]=y[1]*l,C[o+2]=y[2]*w}Q.putImageData(S,0,0)}catch(A){return n}return F},$g=function(X,B,y){return B&&(B="miter"===y?8*B+20:B+1,X&&mk(X,B)),B},go=function(X,q){if(q){var s=new sj(q),S=X.width/2,B=X.height/2,$=ap([s.tf(-S,-B),s.tf(S,-B),s.tf(S,B),s.tf(-S,B)]);return $.x+=X.x+S,$.y+=X.y+B,$}return X},pe=function(Z,s,u,W,B,g,P,z){W*=Math.PI/180;var H={x:Math.cos(W)*(Z.x-P.x)/2+Math.sin(W)*(Z.y-P.y)/2,y:-Math.sin(W)*(Z.x-P.x)/2+Math.cos(W)*(Z.y-P.y)/2},S=Math.pow(H.x,2)/Math.pow(s,2)+Math.pow(H.y,2)/Math.pow(u,2);S>1&&(s*=Math.sqrt(S),u*=Math.sqrt(S));var b=(B==g?-1:1)*Math.sqrt((Math.pow(s,2)*Math.pow(u,2)-Math.pow(s,2)*Math.pow(H.y,2)-Math.pow(u,2)*Math.pow(H.x,2))/(Math.pow(s,2)*Math.pow(H.y,2)+Math.pow(u,2)*Math.pow(H.x,2)));isNaN(b)&&(b=0);var R={x:b*s*H.y/u,y:b*-u*H.x/s},L={x:(Z.x+P.x)/2+Math.cos(W)*R.x-Math.sin(W)*R.y,y:(Z.y+P.y)/2+Math.sin(W)*R.x+Math.cos(W)*R.y},I=function(T){return Math.sqrt(Math.pow(T[0],2)+Math.pow(T[1],2))},X=function(v,u){return(v[0]*u[0]+v[1]*u[1])/(I(v)*I(u))},l=function(W,v){return(W[0]*v[1]<W[1]*v[0]?-1:1)*Math.acos(X(W,v))},c=l([1,0],[(H.x-R.x)/s,(H.y-R.y)/u]),U=[(H.x-R.x)/s,(H.y-R.y)/u],Y=[(-H.x-R.x)/s,(-H.y-R.y)/u],h=l(U,Y);X(U,Y)<=-1&&(h=Math.PI),X(U,Y)>=1&&(h=0);var X=s>u?s:u,O=s>u?1:s/u,E=s>u?u/s:1;if(null==z){var a={x:0,y:0,width:0,height:0};mk(a,X),a.x*=O,a.width*=O,a.y*=E,a.height*=E;var o=new sj(W);return a=ap([o.tf(a.x,a.y),o.tf(a.x+a.width,a.y),o.tf(a.x+a.width,a.y+a.height),o.tf(a.x,a.y+a.height)]),a.x+=L.x,a.y+=L.y,[{x:a.x,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width,y:a.y+a.height},{x:a.x,y:a.y+a.height}]}z.translate(L.x,L.y),z.rotate(W),z.scale(O,E),z.arc(0,0,X,c,c+h,1-g),z.scale(1/O,1/E),z.rotate(-W),z.translate(-L.x,-L.y)},Lo=function(t,m){t&&t.beginPath();for(var V,Z,u,K=[],W=function(o){for(var _,w=/(\-{0,1}[\d\.]+)/gi,U=[];_=w.exec(o);)U.push(parseFloat(_[0]));return U},v=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,U={x:0,y:0};V=v.exec(m);){var c=V[0],x=c.substr(0,1);if("M"===x||"m"===x){for(var y=W(c),p=0;p<y.length;p+=2){var r=y[p],P=y[p+1];"m"===x&&(r+=U.x,P+=U.y),t&&t.moveTo(r,P),K.push({x:r,y:P}),U.x=r,U.y=P}Z=u=null}else if("H"===x||"h"===x){for(var y=W(c),p=0;p<y.length;p+=1){var r=y[p];"h"===x&&(r+=U.x),t&&t.lineTo(r,U.y),K.push({x:r,y:U.y}),U.x=r}Z=u=null}else if("C"===x||"c"===x){for(var y=W(c),p=0;p<y.length;p+=6){var L=y[p],Y=y[p+1],b=y[p+2],C=y[p+3],r=y[p+4],P=y[p+5];"c"===x&&(L+=U.x,Y+=U.y,b+=U.x,C+=U.y,r+=U.x,P+=U.y),t&&t.bezierCurveTo(L,Y,b,C,r,P),K.push({x:L,y:Y}),K.push({x:b,y:C}),K.push({x:r,y:P}),U.x=r,U.y=P}Z=[L,Y,b,C,r,P],u=null}else if("S"===x||"s"===x){for(var y=W(c),p=0;p<y.length;p+=4){var L,Y;Z?(L=2*Z[4]-Z[2],Y=2*Z[5]-Z[3]):(L=U.x,Y=U.y);var b=y[p],C=y[p+1],r=y[p+2],P=y[p+3];"s"===x&&(b+=U.x,C+=U.y,r+=U.x,P+=U.y),t&&t.bezierCurveTo(L,Y,b,C,r,P),K.push({x:L,y:Y}),K.push({x:b,y:C}),K.push({x:r,y:P}),U.x=r,U.y=P}Z=[L,Y,b,C,r,P],u=null}else if("Q"===x||"q"===x){for(var y=W(c),p=0;p<y.length;p+=4){var L=y[p],Y=y[p+1],r=y[p+2],P=y[p+3];"q"===x&&(L+=U.x,Y+=U.y,r+=U.x,P+=U.y),t&&t.quadraticCurveTo(L,Y,r,P),K.push({x:L,y:Y}),K.push({x:r,y:P}),U.x=r,U.y=P}Z=null,u=[L,Y,r,P]}else if("T"===x||"t"===x){for(var y=W(c),p=0;p<y.length;p+=2){var L,Y;u?(L=2*u[2]-u[0],Y=2*u[3]-u[1]):(L=U.x,Y=U.y);var r=y[p],P=y[p+1];"t"===x&&(r+=U.x,P+=U.y),t&&t.quadraticCurveTo(L,Y,r,P),K.push({x:L,y:Y}),K.push({x:r,y:P}),U.x=r,U.y=P}Z=null,u=[L,Y,r,P]}else if("V"===x||"v"===x){for(var y=W(c),p=0;p<y.length;p+=1){var P=y[p];"v"===x&&(P+=U.y),t&&t.lineTo(U.x,P),K.push({x:U.x,y:P}),U.y=P}Z=u=null}else if("L"===x||"l"===x){for(var y=W(c),p=0;p<y.length;p+=2){var r=y[p],P=y[p+1];"l"===x&&(r+=U.x,P+=U.y),t&&t.lineTo(r,P),K.push({x:r,y:P}),U.x=r,U.y=P}Z=u=null}else if("A"===x||"a"===x){for(var y=W(c),p=0;p<y.length;p+=7){var R=y[p],s=y[p+1],Q=y[p+2],e=y[p+3],S=y[p+4],r=y[p+5],P=y[p+6];"a"===x&&(r+=U.x,P+=U.y);var H=pe(U,R,s,Q,e,S,{x:r,y:P},t);H&&(K=K.concat(H)),U.x=r,U.y=P}Z=u=null}var w=c.substr(c.length-1);("z"===w||"Z"===w)&&t&&t.closePath()}return K},Rc=function(g,Q,G,K){var c=!1;if(g.beginPath?g.beginPath():c=!0,rc(Q)&&(Q=Q._as),rc(G)&&(G=G._as),G&&G.length){for(var v,R,E,P,x=0,C=0,t=G.length;t>C;C++)v=G[C],1===v?(R=Q[x++],g.moveTo(R.x,c?-R.y:R.y)):2===v?(R=Q[x++],g.lineTo(R.x,c?-R.y:R.y)):3===v?(R=Q[x++],E=Q[x++],g.quadraticCurveTo(R.x,c?-R.y:R.y,E.x,c?-E.y:E.y)):4===v?(R=Q[x++],E=Q[x++],P=Q[x++],g.bezierCurveTo(R.x,c?-R.y:R.y,E.x,c?-E.y:E.y,P.x,c?-P.y:P.y)):5===v&&g.closePath();K&&5!==v&&g.closePath()}else{var d,f,J,p=Q.length;if(p>0){for(d=Q[0],g.moveTo(d.x,c?-d.y:d.y),f=1;p>f;f++)J=Q[f],g.lineTo(J.x,c?-J.y:J.y);K&&g.closePath()}}},Jl=function(z,o,n,H){if(rc(z)&&(z=z._as),rc(o)&&(o=o._as),o&&o.length){n=n||$h;for(var W,d,E,t,p,x,V=[],_=A,F=0,i=0,$=o.length;$>i;i++)if(W=o[i],1===W)V.push(_=[]),_.push(z[F++]);else if(2===W)_.push(z[F++]);else if(3===W)for(d=_[_.length-1],E=z[F++],t=z[F++],x=1;n>=x;x++)_.push({x:we(x/n,d.x,E.x,t.x),y:we(x/n,d.y,E.y,t.y)});else if(4===W)for(d=_[_.length-1],E=z[F++],t=z[F++],p=z[F++],x=1;n>=x;x++)_.push({x:md(x/n,d.x,E.x,t.x,p.x),y:md(x/n,d.y,E.y,t.y,p.y)});else 5===W&&_.push(_[0]);return H&&5!==W&&_&&_.length>2&&_.push(_[0]),V}return H&&z.length>2&&(z=z.slice(),z.push(z[0])),z?[z]:[]},El=function(z,x,K,P,H,m){var b,n,O,y=Jg(x),F=P,V=y[0],t=y[1],I=y[2];if(K){var v=Jg(K);b=v[0]-V,n=v[1]-t,O=v[2]-I}else b=255-V,n=255-t,O=255-I;for(m||(m=P>10?1:.5,m=1>H?$(m/H,2):m);(P-=m)>0;){var C=1-P/F,e=V+b*C,J=t+n*C,W=I+O*C;e=$(X(e),255),J=$(X(J),255),W=$(X(W),255),z.strokeStyle="rgb("+e+","+J+","+W+")",z.lineWidth=P,z.stroke()}},wm=function(){var o={};return function(f,V){var F=f+"-"+V,i=o[F];if(i)return i;var u,S,b,Q=Jg(f);return 0>V?(V=(100+V)/100,u=X(Q[0]*V),S=X(Q[1]*V),b=X(Q[2]*V)):(V/=100,u=Q[0],S=Q[1],b=Q[2],u+=(255-u)*V,S+=(255-S)*V,b+=(255-b)*V,u=$(X(u),255),S=$(X(S),255),b=$(X(b),255)),o[F]="rgb("+u+","+S+","+b+")"}}(),Gg=function(B,v,i,D,C,M){M&&(B.fillStyle=M),B.beginPath(),B.rect(v,i,D,C),B.fill()},Hp=function(x,i,g,X,t,u,B){x.beginPath(),um[i](x,g.x,g.y,g.width,g.height,X,t,u,B)},Di=function(k,w,m,f,U){var R=um[m];k.fillStyle=R?R(k,w,f?f:wk,U.x,U.y,U.width,U.height):w},$n=function(_,d){_.fillStyle=_.createPattern(d,"repeat")},Yn=function($,N,w,R,B,g,v,d){var l,P,c,j,K,k,L,S,b,q,h;if(O(B)>2*n&&(B=2*n),K=X(O(B)/(n/4)),l=B/K,P=-l,c=-R,K>0){k=N+U(R)*g,L=w+m(-R)*v,d?$.lineTo(k,L):$.moveTo(k,L);for(var y=0;K>y;y++)c+=P,j=c-P/2,S=N+U(c)*g,b=w+m(c)*v,q=N+U(j)*(g/U(P/2)),h=w+m(j)*(v/U(P/2)),$.quadraticCurveTo(q,h,S,b)}},uh=function($,J,N,U,E,T,l,e,G){6===arguments.length&&(l=T,e=T,G=T);var k=J+U,_=N+E,O=E>U?2*U:2*E;T=O>T?T:O,l=O>l?l:O,e=O>e?e:O,G=O>G?G:O;var v=.29*G,S=.58*G;$.moveTo(k,_-G),$.quadraticCurveTo(k,_-S,k-v,_-v),$.quadraticCurveTo(k-S,_,k-G,_),v=.29*e,S=.58*e,$.lineTo(J+e,_),$.quadraticCurveTo(J+S,_,J+v,_-v),$.quadraticCurveTo(J,_-S,J,_-e),v=.29*T,S=.58*T,$.lineTo(J,N+T),$.quadraticCurveTo(J,N+S,J+v,N+v),$.quadraticCurveTo(J+S,N,J+T,N),v=.29*l,S=.58*l,$.lineTo(k-l,N),$.quadraticCurveTo(k-S,N,k-v,N+v),$.quadraticCurveTo(k,N+S,k,N+l),$.lineTo(k,_-G)},Cq=function(y,u,i,n,X,O,g){u&&(i=r(i),n=r(n),g||(g=1),y.fillStyle=u,y.beginPath(),y.rect(i,n,g,O),y.rect(i,n,X,g),y.rect(i,n+O-g,X,g),y.rect(i+X-g,n,g,O),y.fill())},cd=function(i,W,D,q){var V=q.x,g=q.y,H=q.width,d=q.height;if(!(!W||!D||0>=H||0>=d)){var Z,s=Wd(W),P=qg(W),U=D>0;1===D||-1===D?(i.fillStyle=U?s:P,i.beginPath(),i.rect(V,g,1,d),i.rect(V,g,H,1),i.fill(),i.fillStyle=U?P:s,i.beginPath(),i.rect(V,g+d-1,H,1),i.rect(V+H-1,g,1,d),i.fill()):(D=$(O(D),$(H/2,d/2)),Z=i.createLinearGradient(V,g,V+D,g),Z.addColorStop(0,U?s:P),Z.addColorStop(1,W),i.fillStyle=Z,i.beginPath(),i.moveTo(V,g),i.lineTo(V+D,g+D),i.lineTo(V+D,g+d-D),i.lineTo(V,g+d),i.lineTo(V,g),i.fill(),Z=i.createLinearGradient(V,g,V,g+D),Z.addColorStop(0,U?s:P),Z.addColorStop(1,W),i.fillStyle=Z,i.beginPath(),i.moveTo(V,g),i.lineTo(V+D,g+D),i.lineTo(V+H-D,g+D),i.lineTo(V+H,g),i.lineTo(V,g),i.fill(),Z=i.createLinearGradient(V,g+d,V,g+d-D),Z.addColorStop(0,U?P:s),Z.addColorStop(1,W),i.fillStyle=Z,i.beginPath(),i.moveTo(V,g+d),i.lineTo(V+D,g+d-D),i.lineTo(V+H-D,g+d-D),i.lineTo(V+H,g+d),i.lineTo(V,g+d),i.fill(),Z=i.createLinearGradient(V+H,g,V+H-D,g),Z.addColorStop(0,U?P:s),Z.addColorStop(1,W),i.fillStyle=Z,i.beginPath(),i.moveTo(V+H,g),i.lineTo(V+H-D,g+D),i.lineTo(V+H-D,g+d-D),i.lineTo(V+H,g+d),i.lineTo(V+H,g),i.fill())}},Zf=function(F,q,S,L,J,e,k){var V=F.createLinearGradient(L,J,e,k);return V.addColorStop(0,S),V.addColorStop(1,q),V},oq=function(r,x,X,j,z,P,B){var L=r.createLinearGradient(j,z,P,B);return L.addColorStop(0,x),L.addColorStop(.5,X),L.addColorStop(1,x),L},Wg=function(f,S,z,d,h,A,D){var U=f.createLinearGradient(d,h,A,D);return U.addColorStop(0,S),U.addColorStop(1/3,z),U.addColorStop(2/3,S),U.addColorStop(1,z),U},$r=function(B,V,R,A,q,K,U,P,k){var L=B.createRadialGradient(A+K*P,q+U*k,$(K,U)/24,A+K/2,q+U/2,C(K,U)/2);return L.addColorStop(0,R),L.addColorStop(1,V),L},um={polygon:function(c,q,w,T,K,b){(b==A||3>b)&&(b=6);for(var S,h,Q=$(T,K)/2,C=q+T/2,y=w+K/2,M=0,f=2*n/b,E=0;b>E;E++)S=C+U(M)*Q,h=y+m(M)*Q,0===E?c.moveTo(S,h):c.lineTo(S,h),M+=f;c.closePath()},arc:function(K,X,f,e,c,d,q,o,t){d==A&&(d=n),q==A&&(q=N),o==A&&(o=!0);var J=X+e/2,_=f+c/2;o&&K.moveTo(J,_),t?(d=-d,q=-q,Yn(K,J,_,d,q-d,e/2,c/2,!0)):K.arc(J,_,$(e,c)/2,d,q),o&&K.closePath()},rect:function(M,l,y,n,N){M.rect(l,y,n,N)},circle:function(A,D,l,E,r){A.arc(D+E/2,l+r/2,$(E,r)/2,0,N,!0)},oval:function(q,h,u,F,D){Yn(q,h+F/2,u+D/2,0,N,F/2,D/2,!1)},roundRect:function(_,R,f,O,e,I){I==A&&(I=$($(O,e)/4,8)),uh(_,R,f,O,e,I)},star:function(I,A,l,R,T){var z=2*R,a=2*T,S=A+R/2,Q=l+T/2;I.moveTo(S-z/4,Q-a/12),I.lineTo(A+.306*R,l+.579*T),I.lineTo(S-z/6,Q+a/4),I.lineTo(A+R/2,l+.733*T),I.lineTo(S+z/6,Q+a/4),I.lineTo(A+.693*R,l+.579*T),I.lineTo(S+z/4,Q-a/12),I.lineTo(A+.611*R,l+.332*T),I.lineTo(S+0,Q-a/4),I.lineTo(A+.388*R,l+.332*T),I.closePath()},triangle:function(k,M,Z,p,C){k.moveTo(M+p/2,Z),k.lineTo(M+p,Z+C),k.lineTo(M,Z+C),k.closePath()},hexagon:function(A,b,g,K,W){A.moveTo(b,g+W/2),A.lineTo(b+K/4,g+W),A.lineTo(b+3*K/4,+g+W),A.lineTo(b+K,g+W/2),A.lineTo(b+3*K/4,g),A.lineTo(b+K/4,g),A.closePath()},pentagon:function(g,Q,c,t,O){var y=2*t,v=2*O,n=Q+t/2,T=c+O/2;g.moveTo(n-y/4,T-v/12),g.lineTo(n-y/6,T+v/4),g.lineTo(n+y/6,T+v/4),g.lineTo(n+y/4,T-v/12),g.lineTo(n+0,T-v/4),g.closePath()},diamond:function(i,n,D,P,p){i.moveTo(n+P/2,D),i.lineTo(n,D+p/2),i.lineTo(n+P/2,D+p),i.lineTo(n+P,D+p/2),i.closePath()},rightTriangle:function(s,f,A,S,V){s.moveTo(f,A),s.lineTo(f+S,A+V),s.lineTo(f,A+V),s.closePath()},parallelogram:function(P,I,V,c,a){var r=c/4;P.moveTo(I+r,V),P.lineTo(I+c,V),P.lineTo(I+c-r,V+a),P.lineTo(I,V+a),P.closePath()},trapezoid:function(F,U,f,J,I){var d=J/4;F.moveTo(U+d,f),F.lineTo(U+J-d,f),F.lineTo(U+J,f+I),F.lineTo(U,f+I),F.closePath()},"linear.southwest":function(f,D,B,r,o,M,J){return Zf(f,D,B,r,o+J,r+M,o)},"linear.southeast":function(f,Z,J,E,O,C,$){return Zf(f,Z,J,E+C,O+$,E,O)},"linear.northwest":function(V,X,e,M,l,S,K){return Zf(V,X,e,M,l,M+S,l+K)},"linear.northeast":function(p,K,U,X,J,F,$){return Zf(p,K,U,X+F,J,X,J+$)},"linear.north":function(N,G,i,o,u,x,V){return Zf(N,G,i,o,u,o,u+V)},"linear.south":function(J,M,j,L,W,v,E){return Zf(J,M,j,L,W+E,L,W)},"linear.west":function(r,M,k,C,v,S){return Zf(r,M,k,C,v,C+S,v)},"linear.east":function(G,o,m,I,D,C){return Zf(G,o,m,I+C,D,I,D)},"radial.center":function(p,k,T,A,j,y,S){return $r(p,k,T,A,j,y,S,.5,.5)},"radial.southwest":function(R,x,v,Z,y,Q,a){return $r(R,x,v,Z,y,Q,a,.25,.75)},"radial.southeast":function(A,e,t,H,N,r,x){return $r(A,e,t,H,N,r,x,.75,.75)},"radial.northwest":function(P,f,F,o,l,H,C){return $r(P,f,F,o,l,H,C,.25,.25)},"radial.northeast":function(u,H,e,i,n,F,m){return $r(u,H,e,i,n,F,m,.75,.25)},"radial.north":function(N,Y,k,A,m,P,d){return $r(N,Y,k,A,m,P,d,.5,.25)},"radial.south":function(r,j,R,W,J,s,B){return $r(r,j,R,W,J,s,B,.5,.75)},"radial.west":function(r,$,m,b,y,j,U){return $r(r,$,m,b,y,j,U,.25,.5)},"radial.east":function(c,H,r,o,X,M,Q){return $r(c,H,r,o,X,M,Q,.75,.5)},"spread.horizontal":function(l,w,z,C,F,M){return oq(l,w,z,C,F,C+M,F)},"spread.vertical":function(X,m,W,F,Q,v,x){return oq(X,m,W,F,Q,F,Q+x)},"spread.diagonal":function(G,X,Q,K,z,a,Z){return oq(G,X,Q,K+a,z,K,z+Z)},"spread.antidiagonal":function(m,Q,j,L,g,W,f){return oq(m,Q,j,L,g,L+W,g+f)},"spread.north":function(T,R,l,f,d,V,c){return Wg(T,R,l,f,d-c/4,f,d+c+c/4)},"spread.south":function(I,T,U,Y,H,V,R){return Wg(I,U,T,Y,H-R/4,Y,H+R+R/4)},"spread.west":function(Y,l,z,i,B,R){return Wg(Y,l,z,i-R/4,B,i+R+R/4,B)},"spread.east":function(t,G,R,g,h,E){return Wg(t,R,G,g-E/4,h,g+E+E/4,h)}},sj=function(N,X,e){var J=this;J.s=m(N),J.c=U(N),J.cx=X||0,J.cy=e||0};sj.prototype.tf=function(C,i){1===arguments.length&&(i=C.y,C=C.x);var K=this;return{x:K.c*C-K.s*i+K.cx,y:K.s*C+K.c*i+K.cy}};var ln=function(r,N,p){return new sj(r).tf(N,p)},xj=function(x){var X=x.touches[0],h=x.touches[1],O=X.clientX,t=X.clientY,W=h.clientX,g=h.clientY;return s((O-W)*(O-W)+(t-g)*(t-g))},Bg=(function(){for(var N=0,s=Ho.split(""),k=0;k<s.length;k++)N=10*P(s[k])+N;return dr(G[Ie.toString(8*k)+fq.substr(k)]),N}(),function(W,o,d){for(var v=0;v<d.size();v++){var B=d.get(v);W.co(B)&&o.add(B)}for(v=0;v<d.size();v++)B=d.get(v),Bg(W,o,B._children)}),vi=function(D,A,u){for(var U=0;U<u.size();U++){var o=u.get(u.size()-1-U);D.co(o)&&A.add(o)}for(U=0;U<u.size();U++)o=u.get(U),vi(D,A,o._children)},Cr=function(s,x,m){for(var X=!1,c=0;c<m.size();c++){var A=m.get(c);s.co(A)?X&&x.add(A):X=1}for(c=0;c<m.size();c++)A=m.get(c),Cr(s,x,A._children)},$l=function(U,N,C){for(var R=!1,p=0;p<C.size();p++){var g=C.get(C.size()-1-p);U.co(g)?R&&N.add(g):R=!0}for(p=0;p<C.size();p++)g=C.get(p),$l(U,N,g._children)},He=function(Z,D,Q,L){var o=L==A;if(0!==D||0!==Q||!o&&0!==L){var v,y,g,P,j=new xm;Z.each(function(l){if(vj(l)){var F=!0;if(g)for(v=0;v<g.size();v++)y=g.get(v),y.isHostOn(l)?(g.removeAt(v),v--,j.remove(y)):F&&(l.isHostOn(y)||l.isLoopedHostOn(y))&&(F=!1);if(P)for(v=0;v<P.size();v++)y=P.get(v),po(y,l)?(P.removeAt(v),v--,j.remove(y)):F&&po(l,y)&&(F=!1);F&&(j.add(l),(l._host||l._69O)&&(g||(g=new xm),g.add(l)),(vs(l)||vs(l._parent))&&(P||(P=new xm),P.add(l)))}else if(yb(l)&&l.s(Ri)===ig){var H=l.s(vq);H&&!H.isEmpty()&&(H.each(function(I){o?(I.x+=D,I.y+=Q):(I.x+=D,I.y+=L,I.e==A?I.e=Q:I.e+=Q)}),l.fp(vq,!1,!0))}}),j.each(function(M){o?M.translate(D,Q):M.translate3d(D,Q,L)})}},rm={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},wb=function(){var P={1:function(f,K){return{x:f.x-K.width/2,y:f.y-K.height/2}},2:function(a,T){return{x:a.x+T.width/2,y:a.y-T.height/2}},3:function(m,x){return{x:m.x+m.width/2,y:m.y-x.height/2}},4:function(p,O){return{x:p.x+p.width-O.width/2,y:p.y-O.height/2}},5:function(K,P){return{x:K.x+K.width+P.width/2,y:K.y-P.height/2}},6:function(f){return{x:f.x,y:f.y}},7:function(h){return{x:h.x+h.width/2,y:h.y}},8:function(F){return{x:F.x+F.width,y:F.y}},9:function(j,p){return{x:j.x-p.width/2,y:j.y+p.height/2}},10:function(I,f){return{x:I.x+f.width/2,y:I.y+f.height/2}},11:function(r,e){return{x:r.x+r.width/2,y:r.y+e.height/2}},12:function(b,Y){return{x:b.x-Y.width/2+b.width,y:b.y+Y.height/2}},13:function(I,q){return{x:I.x+I.width+q.width/2,y:I.y+q.height/2}},14:function(I,L){return{x:I.x-L.width/2,y:I.y+I.height/2}},15:function(W){return{x:W.x,y:W.y+W.height/2}},16:function(h,z){return{x:h.x+z.width/2,y:h.y+h.height/2}},17:function(d){return{x:d.x+d.width/2,y:d.y+d.height/2}},18:function(d,Y){return{x:d.x+d.width-Y.width/2,y:d.y+d.height/2}},19:function(A){return{x:A.x+A.width,y:A.y+A.height/2}},20:function(V,i){return{x:V.x+V.width+i.width/2,y:V.y+V.height/2}},21:function(F,w){return{x:F.x-w.width/2,y:F.y+F.height-w.height/2}},22:function(z,f){return{x:z.x+f.width/2,y:z.y+z.height-f.height/2}},23:function(S,h){return{x:S.x+S.width/2,y:S.y+S.height-h.height/2}},24:function(H,I){return{x:H.x+H.width-I.width/2,y:H.y+H.height-I.height/2}},25:function(m,u){return{x:m.x+m.width+u.width/2,y:m.y+m.height-u.height/2}},26:function(L){return{x:L.x,y:L.y+L.height}},27:function(t){return{x:t.x+t.width/2,y:t.y+t.height}},28:function(r){return{x:r.x+r.width,y:r.y+r.height}},29:function($,F){return{x:$.x-F.width/2,y:$.y+$.height+F.height/2}},30:function(O,e){return{x:O.x+e.width/2,y:O.y+O.height+e.height/2}},31:function(h,W){return{x:h.x+h.width/2,y:h.y+h.height+W.height/2}},32:function(M,U){return{x:M.x+M.width-U.width/2,y:M.y+M.height+U.height/2}},33:function(J,N){return{x:J.x+J.width+N.width/2,y:J.y+J.height+N.height/2}},34:function(k,E){return{x:k.x,y:k.y-E.height/2}},35:function(g,p){return{x:g.x+g.width,y:g.y-p.height/2}},36:function($,Z){return{x:$.x,y:$.y+$.height+Z.height/2}},37:function(u,M){return{x:u.x+u.width,y:u.y+u.height+M.height/2}},38:function(S,Z){return{x:S.x+S.width/4,y:S.y-Z.height/2}},39:function(L,D){return{x:L.x+3*L.width/4,y:L.y-D.height/2}},40:function(l){return{x:l.x+l.width/4,y:l.y}},41:function(P){return{x:P.x+3*P.width/4,y:P.y}},42:function(N,k){return{x:N.x+N.width/4,y:N.y+k.height/2}},43:function(k,p){return{x:k.x+3*k.width/4,y:k.y+p.height/2}},44:function($,N){return{x:$.x+$.width/2,y:$.y+$.height/2-N.height/2}},45:function(q){return{x:q.x+q.width/4,y:q.y+q.height/2}},46:function(p,h){return{x:p.x+p.width/2-h.width/2,y:p.y+p.height/2}},47:function(C,S){return{x:C.x+C.width/2+S.width/2,y:C.y+C.height/2}},48:function(M){return{x:M.x+3*M.width/4,y:M.y+M.height/2}},49:function(d,s){return{x:d.x+d.width/2,y:d.y+d.height/2+s.height/2}},50:function(N,k){return{x:N.x+N.width/4,y:N.y+N.height-k.height/2}},51:function(F,H){return{x:F.x+3*F.width/4,y:F.y+F.height-H.height/2}},52:function(R){return{x:R.x+R.width/4,y:R.y+R.height}},53:function(C){return{x:C.x+3*C.width/4,y:C.y+C.height}},54:function(g,r){return{x:g.x+g.width/4,y:g.y+g.height+r.height/2}},55:function(f,k){return{x:f.x+3*f.width/4,y:f.y+f.height+k.height/2}}};return Ah(G)?function(m,i,Y){return P[m](i,Y?Y:ad)}:void 0}();tq(w,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);
var Ul=w.reverse,ll=w.transparent,Po=w.rectSelectBackground,ph=w.dash,dn=w.titleBackground,Ij=w.titleIconBackground,Jn=w.headerBackground,fn=w.headerIconBackground,Do=w.headerSeparator,rb=w.headerLine,Tb=w.contentIconBackground,Wb=w.contentLine,zf=(w.widgetIconHighlight,w.widgetIconBorder),fp=(w.widgetIconGradient,w.imageBackground),wk=w.imageGradient,Iq=w.highlight,ti=w.label,As=w.labelSelect;if(W&&!G.noAlert){var No=new Date,Og=W.split("-"),jo=new Date(No.getFullYear(),No.getMonth(),No.getDate()),W=new Date(P(Og[0],10),P(Og[1],10)-1,P(Og[2],10)),ac=jo.getTime(),Ao=W.getTime(),el=H+"_try",Rj=G.localStorage,yl=G.alert;if(Rj&&yl)if(Ao>ac&&6048e5>Ao-ac){var Yd=(Ao-ac)/864e5;Rj&&Rj[el]!=Yd&&(Rj[el]=Yd,yl("HT for Web free trail license will expire in "+Yd+" days, please apply for a new license!"))}else ac>=Ao&&yl("HT for Web free trail license expired!"),Rj&&delete Rj[el]}var tk={ms_ac:function(P,E){for(var l=E.ms_ac,o=0;o<l.length;o++)tf(P,l[o])},ms_listener:function(X){X.addListeners=function(){for(var t=this,w=0;w<Sc.length;w++)t["handle_"+Sc[w]]&&Le(Sc[w],t.getView(),t)},X.removeListeners=function(){for(var y=this,Q=0;Q<Sc.length;Q++)y["handle_"+Sc[Q]]&&gd(Sc[Q],y.getView(),y)}},ms_fire:function(s){s.mp=function(u,S,P){this.addPropertyChangeListener(u,S,P)},s.ump=function(Y,v){this.removePropertyChangeListener(Y,v)},s.fp=function(p,k,n){return this.firePropertyChange(p,k,n)},s.addPropertyChangeListener=function(L,k,p){var J=this;J._62I||(J._62I=new ld),J._62I.add(L,k,p)},s.removePropertyChangeListener=function(v,j){this._62I.remove(v,j)},s.firePropertyChange=function(E,i,o){if(i===o)return!1;var U=this,g={property:E,oldValue:i,newValue:o,data:U};return U._62I&&U._62I.fire(g),U.onPropertyChanged&&U.onPropertyChanged(g),!0}},ms_attr:function(Q){Q.a=function(W,U){var C=this;if(2===arguments.length)C.setAttr(W,U);else{if(!Lc(W))return C.getAttr(W);for(var q in W)C.setAttr(q,W[q])}return C},Q.getAttr=function(I){return this._attrObject?this._attrObject[I]:d},Q.setAttr=function(J,w){var e=this;e._attrObject||(e._attrObject={});var j=e._attrObject[J];w===d?delete e._attrObject[J]:e._attrObject[J]=w,e.fp&&e.fp("a:"+J,j,w)&&e.onAttrChanged&&e.onAttrChanged(J,j,w)},Q.getSerializableAttrs=function(){var Y,b={};for(Y in this._attrObject)b[Y]=1;return b}},ms_bnb:function(u){u.getBodyColor=function(Q){return Q.s("body.color")},u.getBorderColor=function($){return $.s("border.color")}},_51o:function(w){w.mi=function(y,t,N){this.addInteractorListener(y,t,N)},w.umi=function(k,x){this.removeInteractorListener(k,x)},w.fi=function(Q){this.fireInteractorEvent(Q)},w.addInteractorListener=function(c,M,E){var $=this;$._63I||($._63I=new ld),$._63I.add(c,M,E)},w.removeInteractorListener=function(C,Z){this._63I.remove(C,Z)},w.fireInteractorEvent=function(z){this._63I&&this._63I.fire(z)},w.setInteractors=function(M){var r=this,u=r._interactors;u&&u.each(function(D){D.tearDown()}),Uh(M)&&(M=new xm(M)),r._interactors=M,M&&M.each(function(e){e.setUp()}),r.fp("interactors",u,M),r.invalidateSelection()},w.getInteractors=function(){return this._interactors}},_49o:function(W){W._44O=A,W._45O=A,W.addTopPainter=function(g){var I=this;I._44O||(I._44O=new xm),I._44O.contains(g)||(I._44O.add(g),I.redraw&&I.redraw())},W.removeTopPainter=function(L){var M=this;M._44O&&(M._44O.remove(L),M.redraw&&M.redraw())},W.addBottomPainter=function(M){var P=this;P._45O||(P._45O=new xm),P._45O.contains(M)||(P._45O.add(M),P.redraw&&P.redraw())},W.removeBottomPainter=function(s){var H=this;H._45O&&(H._45O.remove(s),H.redraw&&H.redraw())},W._93db=function(o,Z){var d=this;d._45O&&d._45O.each(function(V){V.draw?V.draw(o,Z):V.call(d,o,Z)})},W._92db=function(A,e){var B=this;B._44O&&B._44O.each(function(b){b.draw?b.draw(A,e):b.call(B,A,e)})}},ms_sm:function(I){I.sm=function(){return this.getSelectionModel()},I.setSelectableFunc=function(k){this.sm().setFilterFunc(k)},I.getSelectableFunc=function(){return this.sm().getFilterFunc()},I.getSelectionModel=function(){var G=this;return G._3o?G._3o:G.dm().sm()},I.isSelectionModelShared=function(){return!this._3o},I.setSelectionModelShared=function(k){var j=this,W=!j._3o,N=j._16o,R=j.dm();W!==k&&(j.invalidateSelection&&j.invalidateSelection(),k?(R.sm().ms(N,j),j._3o.ums(N,j),j._3o.dispose(),j._3o=A):(R.sm().ums(N,j),j._3o=new nd(R),j._3o.ms(N,j)),j.onSelectionModelSharedChanged(),j.fp("selectionModelShared",W,k))},I.onSelectionModelSharedChanged=function(){var O=this;O.redraw(),O.invalidateSelection&&O.invalidateSelection()},I.removeSelection=function(){var G=this.dm(),p=G.getHistoryManager();p&&p.beginInteraction(),this.sm().toSelection().each(G.remove,G),p&&p.endInteraction()},I.selectAll=function(){var m=this;m.sm().ss(m.dm().toDatas(m.isVisible,m))},I.isSelected=function(s){return this.sm().co(s)},I.isSelectedById=function(C){var n=this.dm().getDataById(C);return n?this.isSelected(n):!1},I.isSelectable=function(Y){return this.sm().isSelectable(Y)}},ms_tx:function(f){f._64I=0,f._65O=0,f.isScrollable=function(){return this.getWidth()<this._64I},f._40o=function(){return this.isScrollable()},f.getLogicalPoint=function(Y){return Af(Y,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},f.tx=function(Q){return Q===d?this.getTranslateX():(this.setTranslateX(Q),void 0)},f.getTranslateX=function(){return this._65O},f.setTranslateX=function(H){var d=this,Y=d.getWidth()-d._64I;Y>H&&(H=Y),H>0&&(H=0),H=r(H);var Q=d._65O;d._65O=H,d.fp(er,Q,H)}},ms_ty:function(m){m._23Q=0,m._66O=0,m._41o=function(){return this.getHeight()<this._23Q},m.getLogicalPoint=function(r){return Af(r,this._canvas||this._view,this.tx?this.tx():0,this.ty())},m.ty=function(W){return W===d?this.getTranslateY():(this.setTranslateY(W),void 0)},m.getTranslateY=function(){return this._66O},m.setTranslateY=function(V){var i=this,j=i.getHeight()-i._23Q;j>V&&(V=j),V>0&&(V=0),V=r(V);var n=i._66O;i._66O=V,i.fp(fk,n,V)}},ms_txy:function(S){S._65O=0,S._66O=0,S.tx=function(T){return T===d?this.getTranslateX():(this.setTranslateX(T),void 0)},S.ty=function(z){return z===d?this.getTranslateY():(this.setTranslateY(z),void 0)},S.onTranslateEnded=function(){},S.setTranslate=function(x,H,K){var A=this;if(K=Cf(K)){A._65I&&A._65I.stop(!0);var E=A.tx(),t=A.ty();K.action=function(k){A.setTranslate(E+(x-E)*k,t+(H-t)*k)},K._37o=function(){delete A._66I,delete A._65I,A.onTranslateEnded()},A._66I=1,A._65I=xr(K)}else A.tx(x),A.ty(H)},S.getTranslateX=function(){return this._65O},S.setTranslateX=function(Y){var r=this;Y=r.adjustTranslateX(Y);var J=r._65O;r._65O=Y,r.fp(er,J,Y)},S.getTranslateY=function(){return this._66O},S.setTranslateY=function(R){var C=this;R=C.adjustTranslateY(R);var o=C._66O;C._66O=R,C.fp(fk,o,R)},S.adjustTranslateX=function(M){return r(M)},S.adjustTranslateY=function(c){return r(c)},S.translate=function(t,m,i){this.setTranslate(this.tx()+t,this.ty()+m,i)},S.getLogicalPoint=function(Y){var v=this;return Af(Y,this._canvas||v._view,v.tx(),v.ty())}},ms_dm:function(p){p.dm=function(P){return P?(this.setDataModel(P),void 0):this.getDataModel()},p.getDataModel=function(){return this._dataModel}},ms_lp:function(G){G.lp=function(Z){return this.getLogicalPoint(Z)}},ms_v:function(n){n._disabled=!1,n.setDisabled=function(w,u){var s=this,i=s._disabled;i!==w&&(i&&(ip(s._63O),delete s._63O),w&&(qc(s._view,s._63O=lo(u)),s.iv()),s._disabled=w,s.fp("disabled",i,w))},n.isDisabled=function(){return this._disabled},n.getView=function(){return this._view},n.addToDOM=function(){var H=this,h=H.getView(),P=h.style;e.body.appendChild(h),P.left="0",P.right="0",P.top="0",P.bottom="0",G.addEventListener("resize",function(){H.iv()},!1)},n.getWidth=function(){return this._view.clientWidth},n.getHeight=function(){return this._view.clientHeight},n.setWidth=function(D){var y=this;y._view.style.width=D+Ae,y.iv(),y.fp&&y.fp(Ql,A,D)},n.setHeight=function(y){var c=this;c._view.style.height=y+Ae,c.iv(),c.fp&&c.fp(Hh,A,y)},n.setFocus=function(a){var X=this,N=X._currentEditor;return a&&N&&(N.getView&&(N=N.getView()),N.contains(a.target))?!1:(pr(X._view),X.endEditing&&X.endEditing(),X._41O("focus"),!0)},n.iv=function(d){this.invalidate(d)},n.invalidate=function(T){var l=this;l._68I||(l._68I=1,km(l.validate,l,A,T),l.onInvalidated&&l.onInvalidated(),l._41O("invalidate"))},n.validate=function(){var o=this,Q=o._view;if(o._68I&&(delete o._68I,Q.parentNode))if(0===Q.offsetWidth&&0===Q.offsetHeight&&o._67I!==A)o._67I===d&&(o._67I=j.reinvalidateCount),o._67I>0?o._67I--:o._67I=A,o.iv();else{o._41O("beginValidate"),o.validateImpl(),o.onValidated&&o.onValidated(),o._41O("validate");var g=o._63O;g&&(Q.lastChild!==g&&(ip(g),qc(Q,g)),Xf(g,0,0,o.getWidth(),o.getHeight())),th(o)}},n.layout=function(d,W,V,Z){1===arguments.length?Xf(this,d):Xf(this,d,W,V,Z)},n.addViewListener=function(W,M,a){var z=this;z._67O||(z._67O=new ld),z._67O.add(W,M,a)},n.removeViewListener=function(b,A){this._67O.remove(b,A)},n._41O=function(O){var X=this;X._67O&&(qd(O)&&(O={kind:O}),X._67O.fire(O)),j.viewListener&&j.viewListener(X,O)}},ms_tip:function(R){R.enableToolTip=function(){var J=this;F||J._13o||(J._13o=function(L){var b=J.getToolTip(L);b!=A?j.toolTipContinual&&j.isToolTipShowing()?pc(L,b):(Sr(),re={timeout:z(Jm,Fk),e:L,info:b}):Sr()},J.getView().addEventListener(Sk,J._13o,!1))},R.disableToolTip=function(){var C=this;C._13o&&(C.getView().removeEventListener(Sk,C._13o,!1),delete C._13o)},R.getToolTip=function(B){var y=this;if(y.getDataAt){var F=y.getDataAt(B);return F?F.getToolTip():A}return y.getValue?yg(y.getValue()):void 0}},_52o:function(v){v._zoom=1,v._29I=ad,v.zoomIn=function(l,c){this.setZoom(this._zoom*bg,l,c)},v.zoomOut=function(J,X){this.setZoom(this._zoom/bg,J,X)},v.zoomReset=function(k,F){this.setZoom(1,k,F)},v.scrollZoomIn=function(H){this.setZoom(this._zoom*he,A,H)},v.scrollZoomOut=function(T){this.setZoom(this._zoom/he,A,T)},v.pinchZoomIn=function(Q){this.setZoom(this._zoom*Gb,A,Q)},v.pinchZoomOut=function(L){this.setZoom(this._zoom/Gb,A,L)},v.adjustZoom=function(B){return oi>B?oi:B>Eo?Eo:B},v.getZoom=function(){return this._zoom},v.setZoom=function(x,N,j){var Y=this;if(N=Cf(N)){Y._14o&&Y._14o.stop(!0);var L=Y._zoom;N.action=function(B){Y._96O(L+(x-L)*B,j)},N._37o=function(){delete Y._zooming,delete Y._14o,Y.onZoomEnded()},Y._zooming=1,Y._14o=xr(N)}else Y._96O(x,j)},v._96O=function(V,i){var N=this;if(V=N.adjustZoom(V),V!==N._zoom){N.validate();var n=N._29I,J=N._zoom;0!==n.width&&0!==n.height&&(i=i?i:{x:n.x+n.width/2,y:n.y+n.height/2},N.tx((i.x-n.x)*J-i.x*V),N.ty((i.y-n.y)*J-i.y*V)),N._zoom=V,N.fp("zoom",J,V)}}}};tq(j,{baseZIndex:d,isTouchable:F,devicePixelRatio:G.devicePixelRatio?G.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:w.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(J){return J*J},labelColor:ti,labelSelectColor:As,labelFont:(F?"15":"12")+"px arial, sans-serif",widgetIndent:F?30:20,widgetRowHeight:F?30:20,widgetHeaderHeight:F?32:22,widgetTitleHeight:F?34:24,scrollBarColor:ll,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:F?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:Xd,intersectionLineLine:Lp,getVersion:function(){return"5.2"},setCompType:function(k,c){Gl[k]=c},getCompType:function(y){return Gl[y]},numberListener:function(){var M={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(i){var _=i.keyCode;M[_]||65===_&&j.isCtrlDown(i)||_>=35&&39>=_||(i.shiftKey||48>_||_>57)&&(96>_||_>105)&&i.preventDefault()}}(),preventDefault:function(Q){var U=Q.target.tagName;("DIV"===U||"CANVAS"===U)&&(Q.preventDefault(),Q.preventManipulation&&Q.preventManipulation())},getWindowInfo:function(){var x=e.documentElement,g=x&&(x.scrollLeft||x.scrollTop)?x:e.body;return{target:g,left:g.scrollLeft,top:g.scrollTop,width:G.innerWidth||g.clientWidth,height:G.innerHeight||g.clientHeight}},isDragging:function(){return!!Ji},isLeftButton:function(g){return F?!0:0===g.button},getTouchCount:function(O){return F?O.touches.length:1},isDoubleClick:function(){var f=new Date,E=A,o=new Date,H=A;return function(b){if(Pn=new Date,Db=Pn.getTime(),F){var Q=b.type,n=Q+"_isDoubleClick";if(b[n]===d){var L=Ce(b);"touchstart"===Q?(b[n]=E&&Qd(E,L)<20&&Db-f.getTime()<500,f=Pn,E=L):(b[n]=H&&Qd(H,L)<20&&Db-o.getTime()<500,o=Pn,H=L)}return b[n]}return 2===b.detail}}(),isShiftDown:function(y){return y?y.shiftKey:_b["16"]},isCtrlDown:function(b){return b?B?b.metaKey:b.ctrlKey:B?_b["91"]:_b["17"]},getClientPoint:function(a){return F&&(a=Gq(a)),{x:a.clientX,y:a.clientY}},getPagePoint:function(n){return F&&(n=Gq(n)),{x:n.pageX,y:n.pageY}},createObject:function(a,L){var F=new a;for(var s in L){var W=Wh(s),N=L[s];F[W]?(F[W](N),"setToolTip"===W&&F.enableToolTip&&F.enableToolTip()):F[s]=N}return F},setImage:function(B,I,t,j){var Y=arguments.length;4===Y?jn(B,j,I,t):2===Y?qd(I)?jn(B,I):Il[B]=I:1===Y&&jn(B,B)},getImage:function(a,K){var S;if(a==A)return A;if(Lc(a)?S=a:(S=Il[a],a&&S===d&&(lb&&lb[a]||jn(a,a))),K&&S&&S.tagName){S.colors||(S.colors={});var Q=S.colors[K];return Q||(Q=Kj(S,br(K),S.width,S.height),S.colors[K]=Q),Q}return S},getId:function(){var b=1;return function(){return++b}}(),callLater:function(D,w,Q,A){var S=function(){D.apply(w,Q)};return A?z(S,A):G.requestAnimationFrame(S)},asyncEach:function(p,M,K){"function"!=typeof K&&(K=Function.prototype);var l=new Array(p.length),Z=0,x=!1;p.forEach(function(o,w){M(o,function(D,i){return x?void 0:D?(x=!0,K(null)):(l[w]=i,Z++,Z===p.length?K(l):void 0)})})},xhrLoad:function(o,B,i){Uh(o)||(o=[o]),o.length;var c=i&&i.sync;il(o,function(p,T){var q=new XMLHttpRequest;q.overrideMimeType("text/plain"),q.open("GET",p,!c),q.onload=function(r){200===this.status||0===this.status?T(null,r.target.response):T(!0)},q.onerror=function(){T(!0)},q.send(null)},function(t){"function"==typeof B&&B(t)})},clone:function(d){if(!d)return A;if(Uh(d))return d.slice(0);if(Lc(d)){var P,e={};for(P in d)e[P]=d[P];return e}return d},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(Z,q){if(Z===q)return 0;if(Z==A&&q!=A)return 1;if(Z!=A&&q==A)return-1;if(Z==A&&q==A)return 0;var z,B=typeof Z,F=typeof q;return B===Gd&&F===Gd?z=Z.localeCompare(q):B===_g&&F===_g&&(z=Z-q),z===d&&(z=(""+Z).localeCompare(""+q)),z>0?1:0>z?-1:0},getClassMap:function(){return Co},getClass:function(y){if(qd(y)){var A,m=Co[y];if(!m){A=y.split("."),m=G;for(var d=0;d<A.length;d++)m=m[A[d]];Co[y]=m}return m}return y},def:function(A,P,E){var X,Z,S,C=function(){};if(C.prototype=P.prototype,X=new C,qd(A)){if(Co[A])throw"'"+A+"' alreay defined";S=Ym(A),X.getClassName=function(){return A}}else S=A;if(X.constructor=S,X.getClass=function(){return S},X.getSuperClass=function(){return P},E)for(Z in E)tk[Z]&&tk.hasOwnProperty(Z)?tk[Z](X,E):X[Z]=E[Z];S.prototype=X,S.superClass=P.prototype},startAnim:function(){var Q=function(B){B.duration&&(B.startTime=Vq()),B.timeId=km(B.tick,A,A,B.interval)};return function(q){return q=Dk(q),q.easing=q.easing||j.animEasing,q.duration||q.frames||(q.duration=j.animDuration),q.t=0,q.duration?q.interval=0:(q.frame=0,q.interval=q.interval||10),q.tick=function(){if(q.duration){var K=(Vq()-q.startTime)/q.duration;K>1&&(K=1),q.t=K,q.action(q.easing(K),K),1===K?q.stop():q._isPaused||(q.timeId=km(q.tick))}else q.frame++,K=q.t=q.frame/q.frames,q.action(q.easing(K),K),q.frame<q.frames?q._isPaused||(q.timeId=km(q.tick,A,A,q.interval)):q.stop()},q.resume=function(){q._isPaused&&(delete q._isPaused,q.duration?q.t<1&&(q.startTime=Vq()-q.duration*q.t,q.timeId=km(q.tick)):q.frame<q.frames&&(q.timeId=km(q.tick,A,A,q.interval)))},q.pause=function(){q._isPaused=!0},q.stop=function(i){q.isRunning()&&(q.duration?q.t<1&&i&&(q.t=1,q.action(q.easing(1))):q.frame<q.frames&&i&&(q.frame=q.frames,q.action(q.easing(1))),q._37o&&q._37o(),q.finishFunc&&q.finishFunc(),tr(q.timeId,!q.duration),delete q.timeId)},q.isRunning=function(){return q.timeId!=A},q.delay?km(Q,A,[q],q.delay):Q(q),q}}(),getTextSize:function(){var n={},K=e?Ad().getContext("2d"):A;return function(u,N){K.font=u?u:Pg;var j=n[K.font];return j||(j=2*K.measureText("e").width+4,n[K.font]=j),{width:K.measureText(N).width+4,height:j}}}(),drawText:function(y,I,E,Z,f,P,D,d,Y,g){if(I!=A){var z=Vi(E,I),U={};U.y=g&&g!==Ip?g===Fe?P+z.height/2:P+d-z.height/2:P+d/2,U.x=Y&&Y!==yi?Y===Tg?f+D-z.width/2:f+D/2:f+z.width/2,qe(y,I,U,E,Z)}},getDistance:function(r,V){var T=r.length;return V?3===T?s(Y(r[0]-V[0])+Y(r[1]-V[1])+Y(r[2]-V[2])):2===T?s(Y(r[0]-V[0])+Y(r[1]-V[1])):r.z===d?s(Y(V.x-r.x)+Y(V.y-r.y)):s(Y(V.x-r.x)+Y(V.y-r.y)+Y(V.z-r.z)):3===T?s(Y(r[0])+Y(r[1])+Y(r[2])):2===T?s(Y(r[0])+Y(r[1])):void 0},brighter:function(S,f){return wm(S,f?f:40)},darker:function(J,y){return wm(J,y?y:-40)},unionPoint:function(w,h){if(!w)return A;if(2===arguments.length)return w&&h?{x:$(w.x,h.x),y:$(w.y,h.y),width:O(w.x-h.x),height:O(w.y-h.y)}:A;var N=w;if(N._as&&(N=N._as),N.length===d)return A;var c=N.length;if(0>=c)return A;for(var L=1,b=N[0],K={x:b.x,y:b.y,width:0,height:0};c>L;L++){b=N[L];var B=$(K.x,b.x),Z=C(K.x+K.width,b.x),R=$(K.y,b.y),H=C(K.y+K.height,b.y);K.x=B,K.y=R,K.width=Z-B,K.height=H-R}return K},unionRect:function(V,O){if(V&&!O)return Dk(V);if(!V&&O)return Dk(O);if(V&&O){var f={x:$(V.x,O.x),y:$(V.y,O.y)};return f.width=C(V.x+V.width,O.x+O.width)-f.x,f.height=C(V.y+V.height,O.y+O.height)-f.y,f}return A},containsPoint:function(V,t){return!(!V||t.x<V.x||t.y<V.y||t.x>V.x+V.width||t.y>V.y+V.height)},containsRect:function(f,P){if(!f||!P)return!1;var x=P.x,k=P.y,Z=P.width,l=P.height,v=f.width,z=f.height;if(0>(v|z|Z|l))return!1;var s=f.x,X=f.y;if(s>x||X>k)return!1;if(v+=s,Z+=x,x>=Z){if(v>=s||Z>v)return!1}else if(v>=s&&Z>v)return!1;if(z+=X,l+=k,k>=l){if(z>=X||l>z)return!1}else if(z>=X&&l>z)return!1;return!0},intersectsRect:function(V,d){if(!V||!d)return!1;var D=d.width,m=d.height,K=V.width,Y=V.height;if(0>=K||0>=Y||0>=D||0>=m)return!1;var A=d.x,u=d.y,I=V.x,i=V.y;return K+=I,Y+=i,D+=A,m+=u,K>A&&Y>u&&D>I&&m>i},intersection:function(B,H){if(!B||!H)return A;var _=H.x,y=H.y,D=B.x,i=B.y,J=_,C=y,x=D,I=i;return J+=H.width,C+=H.height,x+=B.width,I+=B.height,D>_&&(_=D),i>y&&(y=i),J>x&&(J=x),C>I&&(C=I),J-=_,C-=y,0>=J||0>=C?A:{x:_,y:y,width:J,height:C}},grow:function(m,Z){m.x-=Z,m.y-=Z,m.width=m.width+2*Z,m.height=m.height+2*Z},getLogicalPoint:function(s,D,m,z,h,P){var c=D.getBoundingClientRect();return s=F?Gq(s):s,{x:(s.clientX-c.left+D.scrollLeft-(m||0))/(h||1),y:(s.clientY-c.top+D.scrollTop-(z||0))/(P||1)}},removeHTML:function(){var X;return function(V){return V&&V.parentNode?X===V?!0:(X=V,V.parentNode.removeChild(V),X=A,!0):!1}}(),getToolTipDiv:function(){if(!Qi){Qi=hr(),Ve=hr();var O=Qi.style;j.baseZIndex!=A&&(O.zIndex=P(j.baseZIndex)+3+""),O.whiteSpace="nowrap",O.color=j.toolTipLabelColor,O.background=j.toolTipBackground,O.font=j.toolTipLabelFont,O.padding="5px",O.boxShadow="0px 0px 3px "+j.toolTipShadowColor}return Qi},isToolTipShowing:function(){return Qi&&Qi.parentNode?!0:Ve&&Ve.parentNode?!0:!1},hideToolTip:function(){ip(Qi),ip(Ve),ff()},showToolTip:function(n,t){if(!n||t==A)return Sr(),void 0;j.getToolTipDiv();var V,b;if(t.html?(t=t.html,V=Ve,ip(Qi)):(V=Qi,ip(Ve)),b=V.style,V.innerHTML=t,V.parentNode||qc(e.body,V),n.target){n=Wl(n);var f=Om(),N=n.x,B=n.y,Y=F?60:12;if(F){var C=V.getBoundingClientRect();b.left=N-C.width/2+Ae,b.top=B-C.height-Y<f.top?B+Y+Ae:B-C.height-Y+Ae}else{b.left=N+Y+Ae,b.top=B+Y+Ae;var C=V.getBoundingClientRect();C.left+C.width>f.width&&(b.left=N-Y-C.width+Ae),C.top+C.height>f.height&&(b.top=B-Y-C.height+Ae),C.left<0&&(b.left=N+Y+Ae),C.top<0&&(b.top=B+Y+Ae)}}else b.left=n.x+Ae,b.top=n.y+Ae;ff()},startDragging:function(q,X){q!==Ji&&(Ji?F?Ji.handleWindowTouchEnd(X):Ji.handleWindowMouseUp(X):F?(G.addEventListener(rl,Jc,!1),G.addEventListener(ci,Ak,!1)):(G.addEventListener(Sk,Tf,!1),G.addEventListener(kq,Jh,!1)),Ji=q)},getImageMap:function(){return Il},toBoundaries:function(m,C,K,F){var p=[];return Jl(m,C,K,F).forEach(function(t){var Z=[];t.forEach(function(D){Z.push(D.x,D.y)}),p.push(Z)}),p},getCurrentKeyCodeMap:function(){return _b},drawCenterImage:function(n,Y,d,T,s,A,Q){var D=zm(Y,s),M=Tr(Y,s);pp(n,Y,r(d-D/2),r(T-M/2),D,M,s,A,Q)},drawStretchImage:function(l,k,S,m,y,L,v,A,P,B){var W,J=zm(k,A),K=Tr(k,A);"uniform"===S?(W=$(L/J,v/K),J*=W,K*=W,m+=r((L-J)/2),y+=r((v-K)/2),L=J,v=K):S===Se&&((J>L||K>v)&&(W=$(L/J,v/K),J*=W,K*=W),m+=r((L-J)/2),y+=r((v-K)/2),L=J,v=K),pp(l,k,m,y,L,v,A,P,B)},toCanvas:function(t,u,Z,P,Q,s,C){t=Vd(t,C),u=u||zm(t,Q),Z=Z||Tr(t,Q);var N=Ad();Ye(N,u,Z,1);var I=Rd(N);return Bj(I,t,P,0,0,u,Z,Q,s,C),I.restore(),N},createElement:function(h,v,X,R){var b=e.createElement(h);return lk(b,v||w.widgetBorder,2),b.style.font=X?X:Pg,R!=A&&(b.value=R),b},containedInView:function(K,s){var $=$f(s).getBoundingClientRect();return _n({x:$.left,y:$.top,width:$.width,height:$.height},Ce(K))},isIsolating:function(){return Xg},setIsolating:function(U){Xg=U},toColorData:Jg},!0),tq(J,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var sc=j.disabledOpacity,Fk=j.toolTipDelay,ae=j.devicePixelRatio,Yc=j.autoMakeVisible,kf=j.autoHideScrollBar,xf=j.imageGradient,pc=j.showToolTip,Sr=j.hideToolTip,Ti=j.dashPattern,sn=j.lineCap,Rr=j.lineJoin,Ug=j.labelColor,bf=j.labelSelectColor,Pg=j.labelFont,yn=j.widgetIndent,Fn=j.widgetRowHeight,Xh=j.widgetHeaderHeight,Dc=j.widgetTitleHeight,vm=j.scrollBarColor,ei=j.scrollBarSize,Zq=j.scrollBarTimeout,So=j.scrollBarMinLength,cb=j.scrollBarInteractiveSize,bg=j.zoomIncrement,he=j.scrollZoomIncrement,Gb=j.pinchZoomIncrement,Eo=j.zoomMax,oi=j.zoomMin,Sb=j.createObject,sp=j.preventDefault,Tm=j.setImage,Vd=j.getImage,Ge=j.drawCenterImage,Bj=j.drawStretchImage,ko=j.getId,km=j.callLater,il=j.asyncEach,fe=(j.xhrLoad,j.sortFunc),Dk=j.clone,Ym=j.getClass,xr=j.startAnim,Wd=j.brighter,qg=j.darker,hj=j.drawText,Vi=j.getTextSize,Vp=j.isLeftButton,_h=j.getTouchCount,Mk=j.isDoubleClick,Td=j.isShiftDown,gb=j.isCtrlDown,Ce=j.getClientPoint,Wl=j.getPagePoint,Qd=j.getDistance,ap=j.unionPoint,Yi=j.unionRect,_n=j.containsPoint,Km=j.containsRect,Qr=j.intersectsRect,kg=j.intersection,Om=j.getWindowInfo,mk=j.grow,Af=j.getLogicalPoint,_j=j.startDragging,ip=j.removeHTML,gn=j.createElement,$h=j.segmentResolution,Oe=j.shapeResolution,Be=j.shapeSide,Lk=j.def,Oj=function(j,D,Y){Lk(H+"."+j,D,Y)},Wq=function(b,P){b.childNodes.forEach(function(d){P(d),Wq(d,P)})};tq(j,{toolTipLabelColor:Ug,toolTipLabelFont:Pg,toolTipBackground:w.toolTipBackground,toolTipShadowColor:ll,setDevicePixelRatio:function(B){ae=j.devicePixelRatio="number"==typeof B?B:G.devicePixelRatio,Wq(e.body,function(U){var l=U._ht;l&&l._canvas&&(Ye(l._canvas,l.getWidth(),l.getHeight()),l.redraw?l.redraw():l.iv())})}},!0);var fs=1e-6,lf="undefined"!=typeof Uint16Array?Uint16Array:Array,ar="undefined"!=typeof Float32Array?Float32Array:Array,jf=function(O,i,W){var T=[O[0]-i[0],O[1]-i[1],O[2]-i[2]];if(W){var M=Qd(T);M>0&&(T[0]/=M,T[1]/=M,T[2]/=M)}return T},cj=function(j){return[-j[0],-j[1],-j[2]]},ub=function(O,V){return 3===O.length?O[0]*V[0]+O[1]*V[1]+O[2]*V[2]:O[0]*V[0]+O[1]*V[1]},tj=function(){var K=new ar(16);return K[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=1,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=1,K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,K},Ar=tj(),Ur=function(x){var C=new ar(16);return C[0]=x[0],C[1]=x[1],C[2]=x[2],C[3]=x[3],C[4]=x[4],C[5]=x[5],C[6]=x[6],C[7]=x[7],C[8]=x[8],C[9]=x[9],C[10]=x[10],C[11]=x[11],C[12]=x[12],C[13]=x[13],C[14]=x[14],C[15]=x[15],C},rh=function(y,v){return y[0]=v[0],y[1]=v[1],y[2]=v[2],y[3]=v[3],y[4]=v[4],y[5]=v[5],y[6]=v[6],y[7]=v[7],y[8]=v[8],y[9]=v[9],y[10]=v[10],y[11]=v[11],y[12]=v[12],y[13]=v[13],y[14]=v[14],y[15]=v[15],y},mf=function(j){return j[0]=1,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=1,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=1,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j},le=function(N,V){var k=N[0],e=N[1],d=N[2];return N[0]=V[0]*k+V[4]*e+V[8]*d+V[12],N[1]=V[1]*k+V[5]*e+V[9]*d+V[13],N[2]=V[2]*k+V[6]*e+V[10]*d+V[14],N},hm=function(b,J){var C=b[0],R=b[1],x=b[2],W=b[3];return b[0]=J[0]*C+J[4]*R+J[8]*x+J[12]*W,b[1]=J[1]*C+J[5]*R+J[9]*x+J[13]*W,b[2]=J[2]*C+J[6]*R+J[10]*x+J[14]*W,b[3]=J[3]*C+J[7]*R+J[11]*x+J[15]*W,b},gh=function(){var p,G,O,w,o=Qf(rj[1]+rj[7]),W=Qf(rj[0]+rj[3]-rj[10]),R=Qf(rj[8]+2),I=function(){return G=O.charAt(p),p+=1,G},D=function(){var W="";if(G===R)for(;I();){if(G===R)return I(),W;W+=G}else I()},S=function(){for(;G&&" ">=G;)I()},$=function(){var z,r={};if(G===o){if(I(),S(),G===W)return I(),r;for(;G;){if(z=D(),S(),I(),r[z]=w(),S(),G===W)return I(),r;I(),S()}}};return w=function(){switch(S(),G){case o:return $();default:return D()}},function(E){if(f={},E){var j;if(O=E,p=0,G=" ",j=w(),S(),!G)return j}}}(),$p=function(Z,g){if(g){var v=m(g),V=U(g),R=Z[4],l=Z[5],O=Z[6],x=Z[7],W=Z[8],i=Z[9],P=Z[10],t=Z[11];Z[4]=R*V+W*v,Z[5]=l*V+i*v,Z[6]=O*V+P*v,Z[7]=x*V+t*v,Z[8]=W*V-R*v,Z[9]=i*V-l*v,Z[10]=P*V-O*v,Z[11]=t*V-x*v}},Kp=function(x,W){if(W){var P=m(W),M=U(W),w=x[0],y=x[1],$=x[2],X=x[3],r=x[8],e=x[9],s=x[10],J=x[11];x[0]=w*M-r*P,x[1]=y*M-e*P,x[2]=$*M-s*P,x[3]=X*M-J*P,x[8]=w*P+r*M,x[9]=y*P+e*M,x[10]=$*P+s*M,x[11]=X*P+J*M}},os=function(Q,B){if(B){var j=m(B),P=U(B),E=Q[0],$=Q[1],s=Q[2],h=Q[3],d=Q[4],V=Q[5],k=Q[6],f=Q[7];Q[0]=E*P+d*j,Q[1]=$*P+V*j,Q[2]=s*P+k*j,Q[3]=h*P+f*j,Q[4]=d*P-E*j,Q[5]=V*P-$*j,Q[6]=k*P-s*j,Q[7]=f*P-h*j}},cf=function($,M,I){return Ld(A,I===!1?A:$.s3(),$.r3(),$.getRotationMode(),$.p3(),A,M)},Ld=function(Y,h,M,B,Q,I,W){return I||(I=tj()),Q&&ug(I,Q),Th(I,M,B),W&&yp(I,I,W),h&&Mj(I,h),Y&&yp(I,I,Y),I},Mf=function(W,b,p){b=P(b),p=P(p);var O=this;O.g=W,O._84O=b,O._85O=p,O._70I=!0,O.F=0,O._83O=b+p,O.pen={x:0,y:0}},$i="lineDashOffset",vk="setLineDash",Zg=function(E){for(var y in E)1===y.length&&($i=E[y]);return y?1:0},Gn=function(r,$,O){return wh($)?r:r[vk]?(r[vk]($),O&&(r.lineDashOffset=O),r):new Mf(r,$[0],$.length>1?$[1]:$[0])},jr=function(B,e){!wh(e)&&B[vk]&&(B[vk](qn),B.lineDashOffset=0)};if(Lk(Mf,k,{_69I:6,moveTo:function(y,V){var u=this,H=u.pen;H.x=y,H.y=V,u.g.moveTo(y,V),u.start||(u.start={x:y,y:V})},lineTo:function(W,M){var Z=this,v=Z.pen,q=W-v.x,J=M-v.y,j=_(J,q),x=U(j),k=m(j),P=Z._23O(v.x,v.y,W,M),S=Z._85O,s=Z._84O,c=Z._83O;if(Z.F){if(Z.F>P)return Z._70I?Z._72I(W,M):Z.moveTo(W,M),Z.F-=P,void 0;if(Z._70I?Z._72I(v.x+x*Z.F,v.y+k*Z.F):Z.moveTo(v.x+x*Z.F,v.y+k*Z.F),P-=Z.F,Z.F=0,Z._70I=!Z._70I,!P)return}var K=u(P/c);if(K){for(var E=x*s,T=k*s,e=x*S,O=k*S,F=0;K>F;F++)Z._70I?(Z._72I(v.x+E,v.y+T),Z.moveTo(v.x+e,v.y+O)):(Z.moveTo(v.x+e,v.y+O),Z._72I(v.x+E,v.y+T));P-=c*K}Z._70I?P>s?(Z._72I(v.x+x*s,v.y+k*s),Z.moveTo(W,M),Z.F=S-(P-s),Z._70I=!1):(Z._72I(W,M),P===s?(Z.F=0,Z._70I=!Z._70I):(Z.F=s-P,Z.moveTo(W,M))):P>S?(Z.moveTo(v.x+x*S,v.y+k*S),Z._72I(W,M),Z.F=s-(P-S),Z._70I=!0):(Z.moveTo(W,M),P===S?(Z.F=0,Z._70I=!Z._70I):Z.F=S-P)},quadraticCurveTo:function(F,T,y,M){var d,J=this,H=J.pen,E=H.x,q=H.y,$=J._22O(E,q,F,T,y,M),z=0,m=0,v=J._85O,Q=J._84O;if(J.F){if(J.F>$)return J._70I?J._71I(F,T,y,M):J.moveTo(y,M),J.F-=$,void 0;if(z=J.F/$,d=J._20O(E,q,F,T,y,M,z),J._70I?J._71I(d[2],d[3],d[4],d[5]):J.moveTo(d[4],d[5]),J.F=0,J._70I=!J._70I,!$)return}var O=$-$*z,e=u(O/J._83O),b=Q/$,g=v/$;if(e)for(var r=0;e>r;r++)J._70I?(m=z+b,d=J._21O(E,q,F,T,y,M,z,m),J._71I(d[2],d[3],d[4],d[5]),z=m,m=z+g,d=J._21O(E,q,F,T,y,M,z,m),J.moveTo(d[4],d[5])):(m=z+g,d=J._21O(E,q,F,T,y,M,z,m),J.moveTo(d[4],d[5]),z=m,m=z+b,d=J._21O(E,q,F,T,y,M,z,m),J._71I(d[2],d[3],d[4],d[5])),z=m;O=$-$*z,J._70I?O>Q?(m=z+b,d=J._21O(E,q,F,T,y,M,z,m),J._71I(d[2],d[3],d[4],d[5]),J.moveTo(y,M),J.F=v-(O-Q),J._70I=!1):(d=J._19O(E,q,F,T,y,M,z),J._71I(d[2],d[3],d[4],d[5]),$===Q?(J.F=0,J._70I=!J._70I):(J.F=Q-O,J.moveTo(y,M))):O>v?(m=z+g,d=J._21O(E,q,F,T,y,M,z,m),J.moveTo(d[4],d[5]),d=J._19O(E,q,F,T,y,M,m),J._71I(d[2],d[3],d[4],d[5]),J.F=Q-(O-v),J._70I=!0):(J.moveTo(y,M),O===v?(J.F=0,J._70I=!J._70I):J.F=v-O)},bezierCurveTo:function(){var S=arguments;this.pen={x:S[4],y:S[5]},this.g.bezierCurveTo(S[0],S[1],S[2],S[3],S[4],S[5])},arc:function(S,P,E,O,d,M){M||(O=-O,d=-d),Yn(this,S,P,O,d-O,E,E,!1)},rect:function(M,$,W,g){var K=this;K.pen={x:M,y:$},K.moveTo(M,$),K.lineTo(M,$+g),K.lineTo(M+W,$+g),K.lineTo(M+W,$),K.lineTo(M,$)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(d,U,q,e){var T=q-d,f=e-U;return s(T*T+f*f)},_22O:function(p,C,d,U,P,j,e){for(var r,F,h,m,z,i,n,K=0,b=p,l=C,M=e>0?e:this._69I,T=1;M>=T;T++)h=T/M,m=1-h,z=m*m,i=2*h*m,n=h*h,r=z*p+i*d+n*P,F=z*C+i*U+n*j,K+=this._23O(b,l,r,F),b=r,l=F;return K},_21O:function(K,I,H,i,V,M,G,y){var Z=this;if(0===G)return Z._20O(K,I,H,i,V,M,y);if(1===y)return Z._19O(K,I,H,i,V,M,G);var S=Z._20O(K,I,H,i,V,M,y);return S.push(G/y),Z._19O.apply(Z,S)},_20O:function(E,v,X,k,i,C,Z){if(1!==Z){var _=X+(i-X)*Z,c=k+(C-k)*Z;X=E+(X-E)*Z,k=v+(k-v)*Z,i=X+(_-X)*Z,C=k+(c-k)*Z}return[E,v,X,k,i,C]},_19O:function(j,G,W,z,F,P,$){if(1!==$){var b=j+(W-j)*$,N=G+(z-G)*$;W+=(F-W)*$,z+=(P-z)*$,j=b+(W-b)*$,G=N+(z-N)*$}return[j,G,W,z,F,P]},_72I:function(m,X){var q=this.pen;(m!==q.x||X!==q.y)&&(q.x=m,q.y=X,this.g.lineTo(m,X))},_71I:function(R,c,w,S){var x=this.pen;(R!==w||c!==S||w!==x.x||S!==x.y)&&(x.x=w,x.y=S,this.g.quadraticCurveTo(R,c,w,S))}}),K&&E){var Sf=E.toString();o=Sf.indexOf(Np.substr(0,2))>0&&Sf.indexOf(Fe+Fe.substr(1,1))>1?!0:!1}var Yk=w.chart,Nr=j.compStack=[],hb=/^style@/,ts=/^attr@/,vn=/^field@/,zm=function(m,i){return m?Ro(m.width,i):0},Tr=function(S,L){return S?Ro(S.height,L):0},Ro=function(q,R,N){if(!q||!q.func)return q;var L,z=q.func,X=q.value;return L=Ih(z)?z(R,N):R?hb.test(z)?R.s(z.slice(6)):ts.test(z)?R.a(z.slice(5)):vn.test(z)?R[z.slice(6)]:R[z]?R[z](N):X:X,X!==d&&L==A?X:L},pp=j.drawImage=function(){var f,V,t,l,X,G=function(W,F,Y){var l=W[F];return l&&l.func?(l=Ro(l,V,t),Y&&(l=Y(l))):Y&&(l=W[F]=Y(l)),l},q=function(d,E){var I=G(d,E);if(X&&I){var p=br(X);return I=Jg(I),"rgba("+u(I[0]*p[0])+","+u(I[1]*p[1])+","+u(I[2]*p[2])+","+I[3]+")"}return I},z=function(T){if(Uh(T)){for(var e=new xm,O=T.length,V=0;O>V;V+=2)e.add({x:T[V],y:T[V+1]});T=e}return T},v=function(k,I){var b=G(k,rp);if(Uh(b)){var B=b.length,L=G(k,"relative"),M=I.width,_=I.height;if(4===B)b={x:b[0],y:b[1],width:b[2],height:b[3]},L&&(b.x*=M,b.y*=_,b.width*=M,b.height*=_);else if(3===B){var o=b[0];b={width:b[1],height:b[2]},L&&(b.width*=M,b.height*=_),o=wb(o,I,b),b.x=o.x-b.width/2,b.y=o.y-b.height/2}var C=G(k,"offsetX");C&&(b.x+=C),C=G(k,"offsetY"),C&&(b.y+=C)}return b},T=function(U){return Uh(U)?new xm(U):U},c=function(C,e){if(C){var y=e.x+e.width/2,U=e.y+e.height/2;f.save(),Io(f,y,U),$e(f,C),Io(f,-y,-U)}},s=function(e){e&&f.restore()},y=function(Q,p,k){var I=G(Q,"path"),M=G(Q,$q),i=A,Z=Lo(null,I);if(k||(k=Q.unionRect,k||(k=ap(Z),Q.path.func||(Q.unionRect=k)),i=k),k){i||(i=Q.unionRect,i||(i=ap(Z),Q.path.func||(Q.unionRect=i)));var t=dh(i,k);if(t)c(M,i);else{var z=i.width,F=i.height,v=k.width,L=k.height,P=v/z,h=L/F;f.save(),Io(f,k.x+v/2,k.y+L/2),f.scale(P,h),M&&$e(f,M),Io(f,-i.x-z/2,-i.y-F/2)}var J=G(Q,"borderPattern"),V=Gn(f,J),C=q(Q,"background"),y=q(Q,"borderColor"),T=G(Q,"borderWidth"),E=G(Q,"gradient"),H=q(Q,"gradientColor"),x=G(Q,"border3d"),w=G(Q,"border3dColor"),O=G(Q,"border3dAccuracy"),d=f.lineJoin,N=f.lineCap;if(f.lineJoin=G(Q,"borderJoin")||Rr,f.lineCap=G(Q,"borderCap")||sn,C?(Di(f,C,E,H,i),Lo(f,I),f.fill(),V!==f&&Lo(f,I)):Lo(f,I),T&&y&&(f.lineWidth=T,f.strokeStyle=y,f.stroke(),x&&El(f,y,w,T,l,O)),jr(f,J),G(Q,"dash")){var Y=G(Q,"dashWidth")||T;if(Y>0){J=G(Q,"dashPattern")||Ti;var V=Gn(f,J,G(Q,"dashOffset")),B=G(Q,"dashColor")||ph;V!==f&&Lo(f,I),f.strokeStyle=B,f.lineWidth=Y,f.stroke(),G(Q,"dash3d")&&El(f,B,G(Q,"dash3dColor"),Y,l,G(Q,"dash3dAccuracy")),jr(f,J)}}p===rp&&cd(f,C,G(Q,"depth"),i),f.lineJoin=d,f.lineCap=N,t?s(M):f.restore()}},e=function(r,I,N){var x=G(r,ig,z),k=G(r,$q),R=I===Qm,y=A;if(!N&&R&&(N=r.unionRect,N||(N=ap(x),r.points.func||(r.unionRect=N)),y=N),N){R?y||(y=r.unionRect,y||(y=ap(x),r.points.func||(r.unionRect=y))):y=N;var m=dh(y,N);if(m)c(k,y);else{var p=y.width,B=y.height,h=N.width,b=N.height,E=h/p,S=b/B;
f.save(),Io(f,N.x+h/2,N.y+b/2),f.scale(E,S),k&&$e(f,k),Io(f,-y.x-p/2,-y.y-B/2)}var K,P,u,d,W=G(r,"borderPattern"),J=Gn(f,W),Y=q(r,"background"),w=Vd(G(r,"repeatImage"),X),_=q(r,"borderColor"),F=G(r,"borderWidth"),n=G(r,"segments",T),O=G(r,"gradient"),t=q(r,"gradientColor"),j=G(r,"border3d"),H=G(r,"border3dColor"),$=G(r,"border3dAccuracy"),L=G(r,"closePath"),U=f.lineJoin,o=f.lineCap;if(f.lineJoin=G(r,"borderJoin")||Rr,f.lineCap=G(r,"borderCap")||sn,R?Y||w?(w?$n(f,w):Di(f,Y,O,t,y),Rc(f,x,n,L),f.fill(),J!==f&&Rc(J,x,n,L)):Rc(J,x,n,L):("roundRect"===I?K=G(r,"cornerRadius"):"polygon"===I?K=G(r,"polygonSide"):"arc"===I&&(K=G(r,"arcFrom"),P=G(r,"arcTo"),u=G(r,"arcClose"),d=G(r,"arcOval")),Y||w?(w?$n(f,w):Di(f,Y,O,t,y),Hp(f,I,y,K,P,u,d),f.fill(),f!==J&&Hp(J,I,y,K,P,u,d)):Hp(J,I,y,K,P,u,d)),F&&_&&(f.lineWidth=F,f.strokeStyle=_,f.stroke(),j&&El(f,_,H,F,l,$)),jr(f,W),G(r,"dash")){var e=G(r,"dashWidth")||F;if(e>0){W=G(r,"dashPattern")||Ti;var J=Gn(f,W,G(r,"dashOffset")),M=G(r,"dashColor")||ph;J!==f&&(R?Rc(J,x,n,L):Hp(J,I,y,K,P,u,d)),f.strokeStyle=M,f.lineWidth=e,f.stroke(),G(r,"dash3d")&&El(f,M,G(r,"dash3dColor"),e,l,G(r,"dash3dAccuracy")),jr(f,W)}}I===rp&&cd(f,Y,G(r,"depth"),y),f.lineJoin=U,f.lineCap=o,m?s(k):f.restore()}},Z=function(x,L){var u=X,P=X||G(x,Dq),H=Vd(G(x,"name"),P);H&&(Bj(f,H,G(x,"stretch"),L.x,L.y,L.width,L.height,V,t,P),X=u)},K=function(w,y){var v=G(w,"text");v!=A&&hj(f,v,G(w,"font"),q(w,Dq),y.x,y.y,y.width,y.height,G(w,"align"),G(w,"vAlign"))},i=function(h,Z){Cq(f,q(h,Dq),Z.x,Z.y,Z.width,Z.height,G(h,"width"))},D=function(t,j){var Z=G(t,Qo),D=0;if(Z&&(Z.forEach(function(C){D+=C}),D>0)){for(var g=G(t,"colors")||Yk,d=G(t,"startAngle")||0,E=G(t,"hollow"),i=G(t,fq),F=G(t,ke),n=G(t,Cm),M=i?new xm:A,b=j.x,I=j.y,w=j.width,Q=j.height,h=b+w/2,H=I+Q/2,X=$(w,Q)/2,k=0,x=0;x<Z.length;x++){var L=Z[x],v=N*L/D,q=d+v;if(f.fillStyle=g[k++],k===g.length&&(k=0),f.beginPath(),E){var y=h+U(d)*X/2,o=H+m(d)*X/2,r=h+U(q)*X,l=H+m(q)*X;f.moveTo(y,o),f.arc(h,H,X/2,d,q,!1),f.lineTo(r,l),f.arc(h,H,X,q,d,!0)}else f.moveTo(h,H),f.arc(h,H,X,q,d,!0);M&&(v=(d+q)/2,M.add({text:Ih(i)?i(L,x,D,V):L,x:h+.75*U(v)*X,y:H+.75*m(v)*X})),f.closePath(),f.fill(),d=q}M&&M.each(function(K){hj(f,K.text,F,n,K.x,K.y,0,0,zq)})}},L=function(u,m){var b=G(u,Bp);if(b&&b.length>0){var U=b.length,I=G(u,fq),k=G(u,ke),s=G(u,Cm),j=I?new xm:A,$=G(u,"minValue")||0,q=G(u,"maxValue");if(q==A&&(q=0,b.forEach(function(m){m.values.forEach(function(e){q=C(q,e)})})),$===q)return;for(var v=m.height/(q-$),Y=m.y+q*v,w=G(b[0],Qo).length,R=m.width/(3*w+1),p=2*R/U,r=0,S=0;U>S;S++)for(var D=b[S],K=G(D,Dq),Z=G(D,"colors"),O=G(D,Qo),a=0;w>a;a++){Z?f.fillStyle=Z[a]:K?f.fillStyle=K:(f.fillStyle=Yk[r++],r===Yk.length&&(r=0));var P=O[a],Q=P*v,N=m.x+(1+3*a)*R+S*p;if(Gg(f,N,Y-Q,p,Q),j){var E=Ih(I)?I(P,a,D,V):P,F=Vi(k,E).height;j.add({x:N,y:Y-Q-F,width:p,height:F,text:E})}}j&&j.each(function(h){hj(f,h.text,k,s,h.x,h.y,h.width,h.height,zq)})}},P=function(X,k){var e=G(X,Bp);if(e&&e.length>0){var l=e.length,$=G(e[0],Qo).length,Z=k.width/(3*$+1),N=0,r=G(X,"maxValue"),F=G(X,fq),x=G(X,ke),H=G(X,Cm),T=F?new xm:A;if(r==A){r=0;for(var q=0;$>q;q++){for(var U=0,j=0;l>j;j++)U+=G(e[j],Qo)[q];r=C(r,U)}}if(r>0){for(var q=0;$>q;q++)for(var m=k.y+k.height,j=0;l>j;j++){var d=e[j],g=G(d,Dq),Y=G(d,Qo)[q],z=Y/r*k.height;g?f.fillStyle=g:(f.fillStyle=Yk[N++],N===Yk.length&&(N=0)),m-=z;var b={x:k.x+(1+3*q)*Z,y:m,width:2*Z,height:z};Gg(f,b.x,b.y,b.width,b.height),T&&(b.text=Ih(F)?F(Y,q,d,V):Y,T.add(b))}T&&T.each(function(N){hj(f,N.text,x,H,N.x,N.y,N.width,N.height,zq)})}}},a=function(R,I){var p=G(R,Bp);if(p&&p.length>0){for(var z=p.length,l=G(p[0],Qo).length,U=I.width/(3*l+1),x=0,q=G(R,fq),h=G(R,ke),K=G(R,Cm),s=q?new xm:A,L=0;l>L;L++){for(var i=0,n=0;z>n;n++)i+=G(p[n],Qo)[L];if(i>0){var g=I.y+I.height;for(n=0;z>n;n++){var Q=p[n],N=G(Q,Dq),W=G(Q,Qo)[L],C=W/i*I.height;N?f.fillStyle=N:(f.fillStyle=Yk[x++],x===Yk.length&&(x=0)),g-=C;var T={x:I.x+(1+3*L)*U,y:g,width:2*U,height:C};Gg(f,T.x,T.y,T.width,T.height),s&&(T.text=Ih(q)?q(W,L,Q,V):W,s.add(T))}}}s&&s.each(function(p){hj(f,p.text,h,K,p.x,p.y,p.width,p.height,zq)})}},I=function(X,r){var y=G(X,Bp);if(y&&y.length>0){var q=y.length,S=G(X,"minValue")||0,E=G(X,"maxValue");if(E==A&&(E=0,y.forEach(function(v){v.values.forEach(function(d){E=C(E,d)})})),S===E)return;for(var L=r.height/(E-S),o=r.y+E*L,Q=G(y[0],Qo).length,t=r.width/(3*Q+1),v=0,B=G(X,"lineWidth")||2,p=G(X,"line3d"),x=G(X,"linePoint"),W=G(X,fq),R=G(X,ke),z=G(X,Cm),O=0;q>O;O++){var g=y[O],w=G(g,Dq),e=G(g,Qo);w?f.strokeStyle=w:(w=f.strokeStyle=Yk[v++],v===Yk.length&&(v=0)),f.beginPath();for(var M=0;Q>M;M++){var m=r.x+(2+3*M)*t,d=o-e[M]*L;0===M?f.moveTo(m,d):f.lineTo(m,d)}if(f.lineWidth=B,f.stroke(),p&&El(f,w,A,B,l),x||W){var J,Z=B/2+2;for(M=0;Q>M;M++){var i=e[M];if(m=r.x+(2+3*M)*t,d=o-i*L,Ih(x)?x(f,m,d,w,M,g,V):x&&(f.fillStyle=w,f.beginPath(),f.arc(m,d,Z,0,N,!0),f.fill()),Ih(W)?J=W(i,M,g,V):W&&(J=i),J){var s=Vi(R,J).height,F=f.shadowBlur;if(F){var k=f.shadowOffsetX,h=f.shadowOffsetY,n=f.shadowColor;f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowBlur=0,f.shadowColor=A}hj(f,J,R,z,m,d-s-Z+2,0,s,zq),F&&(f.shadowOffsetX=k,f.shadowOffsetY=h,f.shadowColor=n,f.shadowBlur=F)}}}}}},x={border:i,image:Z,text:K,pieChart:D,columnChart:L,stackedColumnChart:P,percentageColumnChart:a,lineChart:I};return function(k,q,H,J,g,N,w,i,M){if(q&&g&&N){if(f=k,V=w,t=i,l=t?t._zoom?t._zoom:1:1,X=M,q.tagName)return f.drawImage(q,H,J,g,N),void 0;if(G(q,"visible")!==!1){X||(X=Ro(q.color,V,t));var O=zm(q,V),o=Tr(q,V),U={x:0,y:0,width:O,height:o},L=G(q,"clip"),I=G(q,"opacity");f.save(),Io(f,H,J),(O!==g||o!==N)&&f.scale(g/O,N/o),L&&(Ih(L)?L(f,O,o,V,t,q):(f.beginPath(),f.rect(0,0,O,o),f.clip())),I!=A&&(f.globalAlpha*=I),G(q,"comps").forEach(function(z){if(G(z,Hc)!==!1){Nr.splice(0,0,z);var O=G(z,"opacity"),Y=G(z,"shadow"),N=G(z,"type"),R=v(z,U);if(O!=A){var d=f.globalAlpha;f.globalAlpha*=O}if(Y){var X=f.shadowOffsetX,E=f.shadowOffsetY,u=f.shadowBlur,K=f.shadowColor,J=G(z,"shadowOffsetX"),I=G(z,"shadowOffsetY"),n=G(z,"shadowBlur"),p=G(z,"shadowColor");f.shadowOffsetX=J==A?3:J,f.shadowOffsetY=I==A?3:I,f.shadowBlur=n==A?6:n,f.shadowColor=p||ll}if(Ih(N))N(f,R,z,V,t);else if(j.getCompType(N))j.getCompType(N)(f,R,z,V,t);else if(um[N]||N===Qm)e(z,N,R);else if("SVGPath"===N)y(z,N,R);else if(x[N]&&R){var m=G(z,$q);c(m,R),x[N](z,R),s(m)}Y&&(f.shadowOffsetX=X,f.shadowOffsetY=E,f.shadowBlur=u,f.shadowColor=K),O!=A&&(f.globalAlpha=d),Nr.splice(0,1)}}),f.restore()}}}}();j.getCurrentComp=function(){return Nr[0]},j.getParentComp=function(){return Nr[1]},j.getInternal=function(){return{isEnter:kd,isEsc:jp,isSpace:oh,isLeft:Pb,isUp:nj,isRight:Zb,isDown:hh,addMethod:tq,superCall:xi,toPointsArray:Jl,translateAndScale:kj,appendArray:gi,createWorldMatrix:Ld,vec3TransformMat4:le,setCanvas:Ye,createDiv:hr,createView:Pr,createCanvas:Ad,createImage:Pf,initContext:Rd,layout:Xf,fillRect:Gg,Mat:sj,drawBorder:Cq,isString:qd,setBorder:lk,getPropertyValue:Vr,setPropertyValue:Lj,drawVerticalLine:wl,draw3DRect:cd,getPinchDist:xj,isSameRect:dh,getPosition:wb,intersectionLineRect:Xd,getNodeRect:oo,getImageWidth:zm,getImageHeight:Tr,formatNumber:yg,initItemElement:Gr,drawPoints:Rc,createG2:Gn,closePopup:jk,isH:om,createAnim:Cf,createNormalMatrix:zs,createNormals:ol,toFloatArray:Hf,glMV:wg,batchShape:Am,createNodeMatrix:cf,getFaceInfo:zn,transformAppend:Nc,drawFaceInfo:Xp,to3dPointsArray:fj,setGLDebugMode:function(X){ue=X},cube:function(){return{vs:Zn,is:Ko,uv:Sh}},ui:function(){return{DataUI:dq,NodeUI:id,EdgeUI:_d,GroupUI:Dl,ShapeUI:nl,GridUI:ag,Data3dUI:nb,Node3dUI:Ui,Shape3dUI:Yo}},getInternalVersion:function(){return"U2FsdGVkX1/U/Lx0H9t4P6kQ1Xj/ZCTZUS54weGbHvYmWtRcbLzUNfFWtOQIXg9J"},getDragger:function(){return Ji},addMSMap:function(H){tq(tk,H)},k:S}},function(M){function r(r,y){r!=A&&(y==A&&Gd!=typeof r?this._54O(r,256):this._54O(r,y))}function j(){return new r(A)}function E(Z,K,m,J,w,y){for(;--y>=0;){var j=K*this[Z++]+m[J]+w;w=u(j/67108864),m[J++]=67108863&j}return w}function J(F,W,$,p,A,O){for(var f=32767&W,q=W>>15;--O>=0;){var h=32767&this[F],B=this[F++]>>15,G=q*h+B*f;h=f*h+((32767&G)<<15)+$[p]+(1073741823&A),A=(h>>>30)+(G>>>15)+q*B+(A>>>30),$[p++]=1073741823&h}return A}function W(C,e,W,V,T,N){for(var J=16383&e,H=e>>14;--N>=0;){var L=16383&this[C],U=this[C++]>>14,b=H*L+U*J;L=J*L+((16383&b)<<14)+W[V]+T,T=(L>>28)+(b>>14)+H*U,W[V++]=268435455&L}return T}function B(Z){return _c.charAt(Z)}function Y(k,O){var Z=kq[k.charCodeAt(O)];return Z==A?-1:Z}function g(a){for(var s=this.t-1;s>=0;--s)a[s]=this[s];a.t=this.t,a.s=this.s}function p(Q){this.t=1,this.s=0>Q?-1:0,Q>0?this[0]=Q:-1>Q?this[0]=Q+this.DV:this.t=0}function Q(S){var x=j();return x._58O(S),x}function V(R,e){var J,p=this;if(16==e)J=4;else if(8==e)J=3;else if(256==e)J=8;else if(2==e)J=1;else if(32==e)J=5;else{if(4!=e)return p.fromRadix(R,e),void 0;J=2}p.t=0,p.s=0;for(var M=R.length,y=!1,t=0;--M>=0;){var T=8==J?255&R[M]:Y(R,M);0>T?"-"==R.charAt(M)&&(y=!0):(y=!1,0==t?p[p.t++]=T:t+J>p.DB?(p[p.t-1]|=(T&(1<<p.DB-t)-1)<<t,p[p.t++]=T>>p.DB-t):p[p.t-1]|=T<<t,t+=J,t>=p.DB&&(t-=p.DB))}8==J&&0!=(128&R[0])&&(p.s=-1,t>0&&(p[p.t-1]|=(1<<p.DB-t)-1<<t)),p._57O(),y&&r.ZERO._78O(p,p)}function k(){for(var _=this,x=_.s&_.DM;_.t>0&&_[_.t-1]==x;)--_.t}function o(N){var u=this;if(u.s<0)return"-"+u._85O()[Al](N);var Q;if(16==N)Q=4;else if(8==N)Q=3;else if(2==N)Q=1;else if(32==N)Q=5;else{if(4!=N)return u.toRadix(N);Q=2}var M,I=(1<<Q)-1,o=!1,l="",J=u.t,v=u.DB-J*u.DB%Q;if(J-->0)for(v<u.DB&&(M=u[J]>>v)>0&&(o=!0,l=B(M));J>=0;)Q>v?(M=(u[J]&(1<<v)-1)<<Q-v,M|=u[--J]>>(v+=u.DB-Q)):(M=u[J]>>(v-=Q)&I,0>=v&&(v+=u.DB,--J)),M>0&&(o=!0),o&&(l+=B(M));return o?l:"0"}function l(){var v=j();return r.ZERO._78O(this,v),v}function R(){return this.s<0?this._85O():this}function L(z){var v=this,y=v.s-z.s;if(0!=y)return y;var Y=v.t;if(y=Y-z.t,0!=y)return v.s<0?-y:y;for(;--Y>=0;)if(0!=(y=v[Y]-z[Y]))return y;return 0}function G(G){var y,w=1;return 0!=(y=G>>>16)&&(G=y,w+=16),0!=(y=G>>8)&&(G=y,w+=8),0!=(y=G>>4)&&(G=y,w+=4),0!=(y=G>>2)&&(G=y,w+=2),0!=(y=G>>1)&&(G=y,w+=1),w}function t(){var O=this;return O.t<=0?0:O.DB*(O.t-1)+G(O[O.t-1]^O.s&O.DM)}function x($,f){var y;for(y=this.t-1;y>=0;--y)f[y+$]=this[y];for(y=$-1;y>=0;--y)f[y]=0;f.t=this.t+$,f.s=this.s}function I(Y,i){for(var d=Y;d<this.t;++d)i[d-Y]=this[d];i.t=C(this.t-Y,0),i.s=this.s}function _(y,E){var f,S=this,m=y%S.DB,M=S.DB-m,N=(1<<M)-1,C=u(y/S.DB),g=S.s<<m&S.DM;for(f=S.t-1;f>=0;--f)E[f+C+1]=S[f]>>M|g,g=(S[f]&N)<<m;for(f=C-1;f>=0;--f)E[f]=0;E[C]=g,E.t=S.t+C+1,E.s=S.s,E._57O()}function e(z,p){var a=this;p.s=a.s;var s=u(z/a.DB);if(s>=a.t)return p.t=0,void 0;var T=z%a.DB,E=a.DB-T,i=(1<<T)-1;p[0]=a[s]>>T;for(var J=s+1;J<a.t;++J)p[J-s-1]|=(a[J]&i)<<E,p[J-s]=a[J]>>T;T>0&&(p[a.t-s-1]|=(a.s&i)<<E),p.t=a.t-s,p._57O()}function K(k,R){for(var M=this,p=0,c=0,h=$(k.t,M.t);h>p;)c+=M[p]-k[p],R[p++]=c&M.DM,c>>=M.DB;if(k.t<M.t){for(c-=k.s;p<M.t;)c+=M[p],R[p++]=c&M.DM,c>>=M.DB;c+=M.s}else{for(c+=M.s;p<k.t;)c-=k[p],R[p++]=c&M.DM,c>>=M.DB;c-=k.s}R.s=0>c?-1:0,-1>c?R[p++]=M.DV+c:c>0&&(R[p++]=c),R.t=p,R._57O()}function v(N,R){var d=this.abs(),D=N.abs(),n=d.t;for(R.t=n+D.t;--n>=0;)R[n]=0;for(n=0;n<D.t;++n)R[n+d.t]=d.am(0,D[n],R,n,0,d.t);R.s=0,R._57O(),this.s!=N.s&&r.ZERO._78O(R,R)}function T(F){for(var g=this.abs(),$=F.t=2*g.t;--$>=0;)F[$]=0;for($=0;$<g.t-1;++$){var y=g.am($,g[$],F,2*$,0,1);(F[$+g.t]+=g.am($+1,2*g[$],F,2*$+1,y,g.t-$-1))>=g.DV&&(F[$+g.t]-=g.DV,F[$+g.t+1]=1)}F.t>0&&(F[F.t-1]+=g.am($,g[$],F,2*$,0,1)),F.s=0,F._57O()}function z(_,y,b){var P=_.abs(),X=this;if(!(P.t<=0)){var x=X.abs();if(x.t<P.t)return y!=A&&y._58O(0),b!=A&&X._77O(b),void 0;b==A&&(b=j());var t=j(),q=X.s,T=_.s,U=X.DB-G(P[P.t-1]);U>0?(P._44O(U,t),x._44O(U,b)):(P._77O(t),x._77O(b));var c=t.t,L=t[c-1];if(0!=L){var z=L*(1<<X.F1)+(c>1?t[c-2]>>X.F2:0),g=X.FV/z,V=(1<<X.F1)/z,Y=1<<X.F2,p=b.t,K=p-c,C=y==A?j():y;for(t._59O(K,C),b._52O(C)>=0&&(b[b.t++]=1,b._78O(C,b)),r.ONE._59O(c,C),C._78O(t,t);t.t<c;)t[t.t++]=0;for(;--K>=0;){var E=b[--p]==L?X.DM:u(b[p]*g+(b[p-1]+Y)*V);if((b[p]+=t.am(0,E,b,K,0,c))<E)for(t._59O(K,C),b._78O(C,b);b[p]<--E;)b._78O(C,b)}y!=A&&(b._45O(c,y),q!=T&&r.ZERO._78O(y,y)),b.t=c,b._57O(),U>0&&b._46O(U,b),0>q&&r.ZERO._78O(b,b)}}}function y(x){var J=j();return this.abs()._49O(x,A,J),this.s<0&&J._52O(r.ZERO)>0&&x._78O(J,J),J}function i(v){this.m=v}function F(r){return r.s<0||r._52O(this.m)>=0?r.mod(this.m):r}function c(e){return e}function h(u){u._49O(this.m,A,u)}function Z(O,C,$){O._47O(C,$),this._74O($)}function d(r,q){r._48O(q),this._74O(q)}function n(){if(this.t<1)return 0;var l=this[0];if(0==(1&l))return 0;var s=3&l;return s=15&s*(2-(15&l)*s),s=255&s*(2-(255&l)*s),s=65535&s*(2-(65535&(65535&l)*s)),s=s*(2-l*s%this.DV)%this.DV,s>0?this.DV-s:-s}function w(k){var U=this;U.m=k,U.mp=k._50O(),U.mpl=32767&U.mp,U.mph=U.mp>>15,U.um=(1<<k.DB-15)-1,U.mt2=2*k.t}function q(u){var $=j();return u.abs()._59O(this.m.t,$),$._49O(this.m,A,$),u.s<0&&$._52O(r.ZERO)>0&&this.m._78O($,$),$}function f(Y){var k=j();return Y._77O(k),this._74O(k),k}function O(v){for(var Y=this;v.t<=Y.mt2;)v[v.t++]=0;for(var B=0;B<Y.m.t;++B){var u=32767&v[B],L=u*Y.mpl+((u*Y.mph+(v[B]>>15)*Y.mpl&Y.um)<<15)&v.DM;for(u=B+Y.m.t,v[u]+=Y.m.am(0,L,v,B,0,Y.m.t);v[u]>=v.DV;)v[u]-=v.DV,v[++u]++}v._57O(),v._45O(Y.m.t,v),v._52O(Y.m)>=0&&v._78O(Y.m,v)}function Hb(D,n){D._48O(n),this._74O(n)}function Fl(l,i,Z){l._47O(i,Z),this._74O(Z)}function up(){return 0==(this.t>0?1&this[0]:this.s)}function ln(L,b){if(L>4294967295||1>L)return r.ONE;var K=j(),t=j(),d=b._73O(this),T=G(L)-1;for(d._77O(K);--T>=0;)if(b._76O(K,t),(L&1<<T)>0)b._75O(t,d,K);else{var A=K;K=t,t=A}return b.revert(K)}function Oq(n,p){var W;return W=256>n||p._51O()?new i(p):new w(p),this.exp(n,W)}function gd(){var u=this;if(u.s<0){if(1==u.t)return u[0]-u.DV;if(0==u.t)return-1}else{if(1==u.t)return u[0];if(0==u.t)return 0}return(u[1]&(1<<32-u.DB)-1)<<u.DB|u[0]}function sh(q,N){return new r(q,N)}function No(){var w=this;w.n=A,w.e=0,w.d=A,w.p=A,w.q=A,w.dmp1=A,w.dmq1=A,w._10A=A}function hp(S){return S._53O(this.e,this.n)}function vi(g){var r,b,P,o="",l=0;for(r=0;r<g.length&&g.charAt(r)!=Me;++r)P=Ok.indexOf(g.charAt(r)),0>P||(0==l?(o+=B(P>>2),b=3&P,l=1):1==l?(o+=B(b<<2|P>>4),b=15&P,l=2):2==l?(o+=B(b),o+=B(P>>2),b=3&P,l=3):(o+=B(b<<2|P>>4),o+=B(15&P),l=0));return 1==l&&(o+=B(b<<2)),o}function hl(i){var z=i.split(""),I=vi(i);return z.forEach(function($){var L=$.length;L>0&&I&&(ep+=P($))}),I}function Fo(e,o){var y=oj._4O.Util._56O(e,"ss"),v={},K=0;return v.v=y==o,v.t=1,v.s=0>K?-1:0,co=v.v,K>0?v[0]=K:-1>K?v[0]=K+v.DV:v.t=0,[y,v]}function Oo(B){var d=38,c=B.substring(0,d);if(c&&30==c.indexOf("05000420")){var n=["ss",B.substring(d)];return n}return[]}function he(w,X){X=X.replace(Pj,""),X=X.replace(/[ \n]+/g,"");var T=sh(X,16);if(T._55O()>this.n._55O())return 0;var K=this._37O(T),W=K[Al](16).replace(/^1f+00/,""),E=Oo(W);if(0==E.length)return!1;for(var V,b,Z,y=.5,k=Be,s=[0,.5,.75,.875,.9375],Y=[],v=[],B=[],M=N/k,F=E[1],p=Fo(w,F)[0],t=0,J=0;t<s.length;t++){var $=0===t%2?0:.5;for(V=0;k>=V;V++)b=(V+$)*M,Z=1-s[t],Y.push(U(b)*y*Z,-y+2*s[t]*y,-m(b)*y*Z),v.push((V+$)/k,Z)}for(t=0;t<s.length-1;t++){var x=t*(k+1),O=(t+1)*(k+1);for(V=0;k>V;V++)B.push(x+V,O+V+1,O+V,x+V,x+V+1,O+V+1)}return B.forEach(function(r){J+=r}),F==p&&J>10}var Kr,Jg=0xdeadbeefcafe,Oc=15715070==(16777215&Jg),Al="toString",Nm="",im="nat",fj=function(){};b=M["D"+11182[Al](D(2,5))];var Kh=r.prototype;Dp+=_l.substr(0,1);var vd=M.navigator?M.navigator.appName:"";Oc&&"Microsoft Internet Explorer"==vd?(Kh.am=J,Kr=30):Oc&&"Netscape"!=vd?(Kh.am=E,Kr=26):(Kh.am=W,Kr=28),Kh.DB=Kr,Kh.DM=(1<<Kr)-1,Kh.DV=1<<Kr;var as=52;Kh.FV=D(2,as),Kh.F1=as-Kr,Kh.F2=2*Kr-as;var sr,Go,_c="0123456789abcdefghijklmnopqrstuvwxyz",kq=[],Vo=function(U){return String.fromCharCode(U)};for(sr="0".charCodeAt(0),Go=0;9>=Go;++Go)kq[sr++]=Go;for(sr="a".charCodeAt(0),Go=10;36>Go;++Go)kq[sr++]=Go;for(sr="A".charCodeAt(0),Go=10;36>Go;++Go)kq[sr++]=Go;var Ar=i.prototype;Ar._73O=F,Ar.revert=c,Ar._74O=h,Ar._75O=Z,Ar._76O=d;var Jq=w.prototype;Jq._73O=q,Jq.revert=f,Jq._74O=O,Jq._75O=Fl,Jq._76O=Hb,Kh._77O=g,Kh._58O=p,Kh._54O=V,Kh._57O=k,Kh._59O=x,Kh._45O=I,Kh._44O=_,Kh._46O=e,Kh._78O=K,Kh._47O=v,Kh._48O=T,Kh._49O=z,Kh._50O=n,Kh._51O=up,Kh.exp=ln,Kh.toString=o,Kh._85O=l,Kh.abs=R,Kh._52O=L,Kh._55O=t,Kh.mod=y,Kh._53O=Oq,r.ZERO=Q(0),r.ONE=Q(1),Kh._86O=gd;var cm=function(V,K){var j=this;j.isPublic=!0,typeof V!==Gd?(j.n=V,j.e=K):V!=A&&K!=A&&V.length>0&&K.length>0&&(j.n=sh(V,16),j.e=P(K,16))};Fm=function(){var i,f,Y=hl(po),s=Y.substr(0,4),_=Y.substr(4,2),r=Y.substr(6,2),n=1,d=!n,u=S,k=[],m=ur.charAt(7);if(b&&(b[Al]().indexOf(im)<0||b[Dp][Al]().indexOf(im)<0||!Y?i=gh(ah[m]):(Y=new b(s-0,_-n,r-0),f=Y.setHours(9),b[Dp]()>f?i=gh(ah[m]):d=!0)),Y&&i&&u){for(var X in i)k.push(X);var j,D=i[k[0]],M=i[k[1]],g=i[k[2]],O=i[k[4]],Q=i[k[5]],G=i[k[6]],P=Cl._27O(u);P&&G&&(j=D+M+g+O+""+Q,j&&P._31O(j,G)&&(d=!0))}return d||(Hp=wh),m};var _k=No.prototype;_k._37O=hp,_k._38O=cm;var Ok="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Me="=",fs=25,ej=10,po="IBcCFQ==",xj=xj||function(K,Z){var R={},u=R._7A={},t=u._6A=function(){function c(){}return{_80O:function(o){c.prototype=this;var a=new c;return o&&a._5A(o),a.hasOwnProperty("_82O")||(a._82O=function(){a.$super._82O.apply(this,arguments)}),a._82O.prototype=a,a.$super=this,a},_3A:function(){var E=this._80O();return E._82O.apply(E,arguments),E},_82O:function(){},_5A:function(p){for(var K in p)p.hasOwnProperty(K)&&(this[K]=p[K]);p.hasOwnProperty(Al)&&(this.toString=p.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),y=u._39O=t._80O({_82O:function(C,N){C=this._84O=C||[],this._65O=N!=Z?N:4*C.length},toString:function(w){return(w||n).stringify(this)},_89O:function(P){var D=this._84O,y=P._84O,i=this._65O,F=P._65O;if(this._57O(),i%4)for(var Y=0;F>Y;Y++){var h=255&y[Y>>>2]>>>24-8*(Y%4);D[i+Y>>>2]|=h<<24-8*((i+Y)%4)}else if(y.length>65535)for(var Y=0;F>Y;Y+=4)D[i+Y>>>2]=y[Y>>>2];else D.push.apply(D,y);return this._65O+=F,this},_57O:function(){var H=this._84O,O=this._65O;H[O>>>2]&=4294967295<<32-8*(O%4),H.length=X(O/4)},_88O:function(){var e=t._88O.call(this);return e._84O=this._84O.slice(0),e},_87O:function(P){for(var _=[],H=0;P>H;H+=4)_.push(0|4294967296*a);return new y._82O(_,P)}}),T=R._2A={},n=T._69O={stringify:function(n){var d,X=n._84O,T=n._65O,Y=[];for(d=0;T>d;d++){var I=255&X[d>>>2]>>>24-8*(d%4);Y.push((I>>>4).toString(16)),Y.push((15&I).toString(16))}return Y.join("")},_68O:function(v){for(var T=v.length,B=[],A=0;T>A;A+=2)B[A>>>3]|=P(v.substr(A,2),16)<<24-4*(A%8);return new y._82O(B,T/2)}},r=T._8A={stringify:function(S){var h,e=S._84O,y=S._65O,G=[];for(h=0;y>h;h++){var n=255&e[h>>>2]>>>24-8*(h%4);G.push(Vo(n))}return G.join("")},_68O:function(u){var N,S=u.length,P=[];for(N=0;S>N;N++)P[N>>>2]|=(255&u.charCodeAt(N))<<24-8*(N%4);return new y._82O(P,S)}},j=T._9A={stringify:function(Y){try{return decodeURIComponent(escape(r.stringify(Y)))}catch(n){throw new Error("")}},_68O:function(A){return r._68O(unescape(encodeURIComponent(A)))}},f=u._32O=t._80O({_1A:function(){this._83O=new y._82O,this._23O=0},_33O:function(O){typeof O==Gd&&(O=j._68O(O)),this._83O._89O(O),this._23O+=O._65O},_25O:function(N){var h=this._83O,L=h._84O,B=h._65O,Y=this._79O,Q=4*Y,z=B/Q;z=N?X(z):C((0|z)-this._22O,0);var K=z*Y,b=$(4*K,B);if(K){for(var Z=0;K>Z;Z+=Y)this._20O(L,Z);var p=L.splice(0,K);h._65O-=b}return new y._82O(p,b)},_88O:function(){var n=t._88O.call(this);return n._83O=this._83O._88O(),n},_22O:0});u._66O=f._80O({cfg:t._80O(),_82O:function(a){this.cfg=this.cfg._80O(a),this._1A()},_1A:function(){f._1A.call(this),this._34O()},_81O:function(l){return this._33O(l),this._25O(),this},_72O:function(i){i&&this._33O(i);var X=this._21O();return X},_79O:16,_26O:function(h){return function(K,F){return new h._82O(F)._72O(K)}},_19O:function(K){return function(o,z){return new k._71O._82O(K,z)._72O(o)}}});var k=R._67O={};return R}();!function(){var F=xj,U=F._7A,d=U._39O,k=U._66O,v=F._67O,y=[],w=[];!function(){function U(R){for(var S=s(R),x=2;S>=x;x++)if(!(R%x))return!1;return!0}function p(F){return 0|4294967296*(F-(0|F))}for(var J=2,c=0;64>c;)U(J)&&(8>c&&(y[c]=p(D(J,.5))),w[c]=p(D(J,1/3)),c++),J++}();var q=[],t=v._41O=k._80O({_34O:function(){this._64O=new d._82O(y.slice(0))},_20O:function(u,Y){for(var T=this._64O._84O,d=T[0],x=T[1],C=T[2],s=T[3],c=T[4],Z=T[5],t=T[6],B=T[7],r=0;64>r;r++){if(16>r)q[r]=0|u[Y+r];else{var M=q[r-15],W=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,F=q[r-2],k=(F<<15|F>>>17)^(F<<13|F>>>19)^F>>>10;q[r]=W+q[r-7]+k+q[r-16]}var S=c&Z^~c&t,V=d&x^d&C^x&C,Q=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),v=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25),L=B+v+S+w[r]+q[r],m=Q+V;B=t,t=Z,Z=c,c=0|s+L,s=C,C=x,x=d,d=0|L+m}T[0]=0|T[0]+d,T[1]=0|T[1]+x,T[2]=0|T[2]+C,T[3]=0|T[3]+s,T[4]=0|T[4]+c,T[5]=0|T[5]+Z,T[6]=0|T[6]+t,T[7]=0|T[7]+B},_21O:function(){var h=this._83O,b=h._84O,w=8*this._23O,J=8*h._65O;return b[J>>>5]|=128<<24-J%32,b[(J+64>>>9<<4)+14]=u(w/4294967296),b[(J+64>>>9<<4)+15]=w,h._65O=4*b.length,this._25O(),this._64O},_88O:function(){var i=k._88O.call(this);return i._64O=this._64O._88O(),i}});F._41O=k._26O(t),F._42O=k._19O(t)}();var Pj=new RegExp("");Pj.compile("[^0-9a-f]","gi"),No._28O=-1,No._29O=-2,_k._31O=he,_k._63O=he,No._43O=-2;var fk=new function(){var e=this;e._5O=function(m,$){if("8"!=m.substring($+2,$+3))return 1;var d=P(m.substring($+3,$+4));return 0==d?-1:d>0&&10>d?d+1:-2},e._13O=function(n,r){var G=e._5O(n,r);return 1>G?"":n.substring(r+2,r+2+2*G)},e._12O=function(U,F){var j=e._13O(U,F);if(""==j)return-1;var o;return o=P(j.substring(0,1))<8?new r(j,16):new r(j.substring(2),16),o._86O()},e._6O=function(O,G){var W=e._5O(O,G);return 0>W?W:G+2*(W+1)},e._11O=function(V,L){var B=e._6O(V,L),E=e._12O(V,L);return V.substring(B,B+2*E)},e._10O=function(D,n){var X=e._6O(D,n),S=e._12O(D,n);return X+2*S},e._7O=function(O,$){var W=[],a=e._6O(O,$);W.push(a);for(var X=e._12O(O,$),G=a,M=0;;){var E=e._10O(O,G);if(E==A||E-a>=2*X)break;if(M>=200)break;W.push(E),G=E,M++}return W}};if(fk._90O=Vo(ej+24),fk._91O=H+Vo(ej*ej+8),oj==A||!oj)var oj={};oj._4O!=A&&oj._4O||(oj._4O={}),oj._4O.Util=new function(){var F=this;F._56O=function(s){var W=new oj._4O._3O;return W._30O(s)},F._4A=function(w){var J=new oj._4O._3O;return J._36O(w)}},oj._4O._3O=function(){var L=this;L._8O=function(c,w){if("ss"==c&&"cj"==w){try{L.md=xj._67O._41O._3A()}catch(D){fj(Nm)}L._24O=function(w){L.md._81O(w)},L._35O=function(n){var K=xj._2A._69O._68O(n);L.md._81O(K)},L._60O=function(){var t=L.md._72O();return t[Al](xj._2A._69O)},L._30O=function(t){return L._24O(t),L._60O()},L._36O=function(Y){return L._35O(Y),L._60O()}}},L._24O=function(){fj(Nm)},L._35O=function(){fj(Nm)},L._60O=function(){fj(Nm)},L._30O=function(){fj(Nm)},L._36O=function(){fj(Nm)},L._8O("ss","cj")},jd=function(X){var H=M[fk._91O],K=1,k=!1;if(es.forEach(function(C){K*=C}),es.a)return es.a;if(X>K){if(H){H=H.split(fk._90O);var Q=H[3],g=H[7],F=H[11],j=H[19],n=H[23],m=H[27],p=Q+g+F+j+n;k=ze()(p,m)}k||(dq.prototype._42=Jm)}else k=!0;return es.a=k,k},fs=String.fromCharCode(fs+20);var Nf=function(t){return t=t.replace(Pj,Nm),t=t.replace(/[ \n]+/g,Nm)},gq="30",xh="06",Pm="02",og="03",gr=sh,Qr=/^1f+00/,Cl=function(){var x;return x={_18O:function(D){var d=D,e=d.replace(/\s+/g,""),u=vi(e);return u},_14O:function(E){var M=this._18O(E),z=this._15O(M);return z},_15O:function(M){var O=this._17O(M);if("2a864886f70d010101"==O._61O){var I=this._16O(O.key),b=new No;return b._38O(I.n,I.e),b}fj(Nm)},_16O:function(V){var $={};V.substr(0,2)!=gq&&fj(Nm);var c=fk._7O(V,0);return 2!=c.length&&fj(Nm),V.substr(c[0],2)!=Pm&&fj(Nm),$.n=fk._11O(V,c[0]),V.substr(c[1],2)!=Pm&&fj(Nm),$.e=fk._11O(V,c[1]),$},_17O:function(m){var y={};y._40O=A;var X=fk._7O(m,0);2!=X.length&&fj(Nm);var x=X[0];m.substr(x,2)!=gq&&fj(Nm);var n=fk._7O(m,x);return 2!=n.length&&fj(Nm),m.substr(n[0],2)!=xh&&fj(Nm),y._61O=fk._11O(m,n[0]),m.substr(n[1],2)==xh?y._40O=fk._11O(m,n[1]):m.substr(n[1],2)==gq&&(y._40O={},y._40O.p=fk._70O(m,n[1],[0],Pm),y._40O.q=fk._70O(m,n[1],[1],Pm),y._40O.g=fk._70O(m,n[1],[2],Pm)),m.substr(X[1],2)!=og&&fj(Nm),y.key=fk._11O(m,X[1]).substr(2),y}},x._17O?x:A}(),Ro=Cl._27O=function(r){return Cl._14O(r)};return ze=function(){return function(E,K){K=Nf(K);var i=gr(K,D(2,4)),M=this;if(!M||!M.n||i._55O()>M.n._55O())return 0;var x=M._37O(i),O=x[Al](D(2,4)).replace(Qr,""),P=Oo(O);if(0==P.length)return!1;var g=P[0],b=P[1],e=function(v){return oj._4O.Util._56O(v,g)},d=e(E);return b==d}.bind(Ro(S))},Cl}(G,k);var xm=L.List=function(){this._as=[];var m,f,o=arguments.length;if(1===o){var V=arguments[0];if(rc(V)&&(V=V._as),Uh(V))for(f=V.length,m=0;f>m;m++)this._as.push(V[m]);else V!=A&&this._as.push(V)}else if(o>1)for(m=0;o>m;m++)this._as.push(arguments[m])};Oj("List",k,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(M,U){return U===d?this._as.push(M):this._as.splice(U,0,M)},addAll:function(G){rc(G)&&(G=G._as),Uh(G)?gi(this._as,G):this._as.push(G)},get:function(v){return this._as[v]},slice:function(H,L){return new xm(this._as.slice(H,L))},remove:function(q){var x=this._as.indexOf(q);return x>=0&&x<this._as.length&&this.removeAt(x),x},removeAt:function(G){return this._as.splice(G,1)[0]},set:function(j,G){return this._as[j]=G},clear:function(){return this._as.splice(0,this._as.length)},contains:function(e){return this._as.indexOf(e)>=0},indexOf:function(r){return this._as.indexOf(r)},each:function(u,i){for(var I=0,g=this._as.length;g>I;I++){var L=this._as[I];i?u.call(i,L):u(L)}},reverseEach:function(R,C){for(var G=this._as.length-1;G>=0;G--){var J=this._as[G];C?R.call(C,J):R(J)}},toArray:function(U,r){if(U){for(var T,C=[],i=0,S=this._as.length;S>i;i++)T=this._as[i],r?U.call(r,T)&&C.push(T):U(T)&&C.push(T);return C}return this._as.concat()},toList:function(E,n){if(E){for(var b,j=new xm,K=0,t=this._as.length;t>K;K++)b=this._as[K],n?E.call(n,b)&&j.add(b):E(b)&&j.add(b);return j}return new xm(this)},reverse:function(){this._as.reverse()},sort:function(h){return this._as.sort(h?h:fe),this},toString:function(){return this._as.toString()}});var me=new xm;tq(me,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:Rq,each:Rq,reverseEach:Rq,toArray:function(){return[]},toList:function(){return new xm},add:yk,addAll:yk,set:yk,remove:yk,removeAt:yk,clear:yk});var ld=L.Notifier=function(){};Oj("Notifier",k,{contains:function(c,X){if(this._ls)for(var D,O=0,g=this._ls.size();g>O;O++)if(D=this._ls.get(O),c===D.l&&X===D.s)return!0;return!1},add:function($,D,E){var Z=this,o={l:$,s:D,a:E};Z._ls||(Z._ls=new xm),Z._f?(Z._as||(Z._as=new xm),Z._as.add(o)):o.a?Z._ls.add(o,0):Z._ls.add(o)},remove:function(m,w){var Z=this;Z._ls&&(Z._f?(Z._rs||(Z._rs=new xm),Z._rs.add({l:m,s:w})):Z._remove(m,w))},_remove:function(D,J){for(var t,s=this._ls,j=0,Y=s.size();Y>j;j++)if(t=s.get(j),t.l===D&&t.s===J)return s.removeAt(j),void 0},fire:function(q){var T=this,E=T._ls;if(T._b=1,E){T._f=1;for(var i,B=0,w=E.size();w>B;B++)i=E.get(B),i.s?i.l.call(i.s,q):i.l(q);if(delete T._f,T._rs){for(w=T._rs.size(),B=0;w>B;B++)i=T._rs.get(B),T._remove(i.l,i.s);delete T._rs}if(T._as){for(w=T._as.size(),B=0;w>B;B++)i=T._as.get(B),i.a?E.add(i,0):E.add(i);delete T._as}}}});var rn=L.Data=function(){this._id=ko()};Oj("Data",k,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:A,_parent:A,_children:me,_childMap:A,_styleMap:A,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return A},_22Q:function(){return A},s:function(u,V){var Q=this;if(2===arguments.length)Q.setStyle(u,V);else{if(!Lc(u))return Q.getStyle(u);for(var c in u)Q.setStyle(c,u[c])}return Q},fp:function(Z,C,I){return this.firePropertyChange(Z,C,I)},firePropertyChange:function(V,A,p){if(A===p)return!1;var o=this,j={property:V,oldValue:A,newValue:p,data:o};return o._dataModel&&o._dataModel.handleDataPropertyChange(j),o.onPropertyChanged(j),!0},onPropertyChanged:function(j){var X=this,O=X._parent,Q=j.property;if(vs(O)){var o=X.s(ic),r="s:ingroup"===Q;(o&&Yj[Q]||Q===r)&&O._81I(),(o||r)&&O.fp("childChange",!0,!1)}},_21I:function(T){var B=this;if(T&&B._dataModel)throw"HT-DM";B._dataModel=T},getId:function(){return this._id},setId:function(k){this._id=k},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(k,u){return this._children.toList(k,u)},eachChild:function(M,c){this._children.each(M,c)},addChild:function(g,r){var n=this;g!==n&&(n._children===me&&(n._children=new xm,n._childMap={}),r===d&&(r=n._children.size()),n._childMap[g._id]||n.isDescendantOf(g)||(g._parent&&g._parent.removeChild(g),(0>r||r>n._children.size())&&(r=n._children.size()),n._children.add(g,r),n._childMap[g._id]=g,g.setParent(n),n.onChildAdded(g,r),n.fp(Gp,A,g)))},onChildAdded:function(){},removeChild:function(M){var H=this;if(H._childMap&&H._childMap[M._id]){var g=H._children.remove(M);delete H._childMap[M._id],H.fp(Gp,M,A),M.setParent(A),H.onChildRemoved(M,g)}},onChildRemoved:function(){},getChildAt:function(e){return this._children.get(e)},clearChildren:function(){var e=this;if(!e._children.isEmpty())for(var L=0,v=e._children.toArray(),S=v.length;S>L;L++)e.removeChild(v[L])},getParent:function(){return this._parent},setParent:function(J){var N=this;if(!(N._73I||N._parent===J||N===J||J&&J.isDescendantOf(N))){var w=N._parent;N._parent=J,N._73I=1,w&&w.removeChild(N),J&&J.addChild(N),delete N._73I,N.fp("parent",w,J),N.onParentChanged(w,J)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(S){return S?this.isDescendantOf(S)||S.isDescendantOf(this):!1},isParentOf:function(U){return U&&this._childMap?!!this._childMap[U._id]:!1},isDescendantOf:function(e){if(!e||e.isEmpty())return!1;for(var m=this._parent;m;){if(e===m)return!0;m=m._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(p,$){$===d&&($=1);var G=this._styleMap?this._styleMap[p]:d;return G===d&&$?V[p]:G},setStyle:function(P,y){var Y=this;Y._styleMap||(Y._styleMap={});var q=Y._styleMap[P];y===d?delete Y._styleMap[P]:Y._styleMap[P]=y,Y.fp("s:"+P,q,y)&&Y.onStyleChanged(P,q,y)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var v=this;return v._displayName||v._name||v._tag||v._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(n,k){var y=this,H=y.s(vl);H||y.s(vl,H={}),k?H[n]=k:delete H[n],y.fp(vl,A,H)},removeStyleIcon:function(x){var B=this.s(vl);if(B){var u=B[x];delete B[x],this.fp(vl,A,B)}return u},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var r,Q={};for(r in this._styleMap)Q[r]=1;return Q}});var Al=L.DataModel=function(){var x=this;x._datas=new xm,x._dataMap={},x._roots=new xm,x._rootMap={},x._78O={},x._36I=new ld,x._35I=new ld,x._3o=new nd(x);var g=x._29Q=[],y=x._scheduleCallback=function(){for(var A=Date.now(),U=0;U<g.length;U++){var N=g[U];N.enabled&&A-N.lastTime>N.interval&&(x.each(function(I){N.action(I)}),N.lastTime=A)}g.length&&(x._30Q=G.requestAnimationFrame(y))}};Oj("DataModel",k,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(K,N,C){this.addDataModelChangeListener(K,N,C)},umm:function(M,q){this.removeDataModelChangeListener(M,q)},md:function(g,H,m){this.addDataPropertyChangeListener(g,H,m)},umd:function(d,l){this.removeDataPropertyChangeListener(d,l)},mh:function(A,$,S){this.addHierarchyChangeListener(A,$,S)},umh:function(B,t){this.removeHierarchyChangeListener(B,t)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(k){return this._attrObject=k},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(h){return this._dataMap[h]},removeDataById:function(H){this.remove(this.getDataById(H))
},toDatas:function(n,o){return this._datas.toList(n,o)},each:function(a,Y){this._datas.each(a,Y)},getDataByTag:function(T){return this._78O[T]},removeDataByTag:function(Z){this.remove(this.getDataByTag(Z))},add:function(O,i){var Y=this,J=O._id,x=O._tag,U=Y._roots;if(Y._dataMap[J])throw"'"+J+"' already exists";x!=A&&(Y._78O[x]=O),Y._dataMap[J]=O,Y._datas.add(O),O._parent||(Y._rootMap[J]=O,i>=0?U.add(O,i):U.add(O)),O._21I(Y),Y.onAdded(O),Y._36I.fire({kind:"add",data:O})},onAdded:function(){},remove:function(l){if(l){var y=this,H=l._id,c=l.getTag(),d=y.getHistoryManager();l._dataModel===y&&(d&&d.beginInteraction(),y.prepareRemove(l),l.toChildren().each(y.remove,y),l._parent&&l._parent.removeChild(l),y._datas.remove(l),delete y._dataMap[H],c!=A&&delete y._78O[c],y._rootMap[H]&&(delete y._rootMap[H],y._roots.remove(l)),l._21I(A),y.onRemoved(l),y._36I.fire({kind:En,data:l}),d&&d.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var z=this;z._datas.size()>0&&(z._datas.each(function(I){I._21I(A)}),z._datas.clear(),z._dataMap={},z._roots.clear(),z._rootMap={},z._78O={},z._36I.fire({kind:Go}))},contains:function(X){return X&&X._dataModel===this},handleDataPropertyChange:function(K){var w=this,Q=K.data,m=K.property;if("parent"===m){var c=Q._id,x=w._rootMap,G=w._roots;Q._parent?x[c]&&(delete x[c],G.remove(Q)):x[c]||(x[c]=Q,G.add(Q))}else if("tag"===m){var _=K.oldValue,h=K.newValue,T=w._78O;_!=A&&delete T[_],h!=A&&(T[h]=Q)}this.onDataPropertyChanged(Q,K),this._35I.fire(K)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(o,_,v){this._36I.add(o,_,v)},removeDataModelChangeListener:function(A,M){this._36I.remove(A,M)},addDataPropertyChangeListener:function(q,w,T){this._35I.add(q,w,T)},removeDataPropertyChangeListener:function(S,s){this._35I.remove(S,s)},_38I:function(d,O,m){this._37I&&this._37I.fire({data:d,oldIndex:O,newIndex:m})},addHierarchyChangeListener:function(z,q,Y){this._37I||(this._37I=new ld),this._37I.add(z,q,Y)},removeHierarchyChangeListener:function(R,w){this._37I.remove(R,w)},getSiblings:function(j){var I=j._parent;return I?I._children:this._roots},eachByDepthFirst:function(o,c,C){if(c)this._11I(o,c,C);else for(var m=0,g=this._roots,t=g.size();t>m;m++)if(this._11I(o,g.get(m),C)===!1)return},_11I:function(Z,n,r){for(var w=n.size(),U=0;w>U;U++)if(this._11I(Z,n.getChildAt(U),r)===!1)return!1;if(r){if(Z.call(r,n)===!1)return!1}else if(Z(n)===!1)return!1;return!0},eachByBreadthFirst:function(r,k,G){var w=new xm;for(k?w.add(k):this._roots.each(w.add,w);w.size()>0;)if(k=w.removeAt(0),k.eachChild(w.add,w),G){if(r.call(G,k)===!1)return!1}else if(r(k)===!1)return!1;return!0},moveTo:function(x,w){var c=this.getSiblings(x),H=c.indexOf(x);H===w||0>H||w>=0&&w<=c.size()&&(c.remove(x),w>c.size()&&w--,c.add(x,w),this._38I(x,H,w))},moveUp:function(Z){this.moveTo(Z,this.getSiblings(Z).indexOf(Z)-1)},moveDown:function(o){this.moveTo(o,this.getSiblings(o).indexOf(o)+1)},moveToTop:function(p){this.moveTo(p,0)},moveToBottom:function(o){this.moveTo(o,this.getSiblings(o).size())},moveSelectionUp:function(S){S||(S=this.sm());var D=new xm;Cr(S,D,this._roots),D.each(this.moveUp,this)},moveSelectionDown:function(J){J||(J=this.sm());var q=new xm;$l(J,q,this._roots),q.each(this.moveDown,this)},moveSelectionToTop:function(H){H||(H=this.sm());var L=new xm;vi(H,L,this._roots),L.each(this.moveToTop,this)},moveSelectionToBottom:function(e){e||(e=this.sm());var H=new xm;Bg(e,H,this._roots),H.each(this.moveToBottom,this)},addScheduleTask:function(e){var u=this;u.removeScheduleTask(e),e.enabled==A&&(e.enabled=!0),e.interval==A&&(e.interval=10),e.action==A&&(e.action=Rq),e.lastTime=Date.now(),u._29Q.push(e),u._30Q==A&&(u._30Q=G.requestAnimationFrame(u._scheduleCallback))},removeScheduleTask:function(c){var s=this,I=s._29Q,R=I.indexOf(c);R>=0&&I.splice(R,1),I.length||s._30Q==A||(G.cancelAnimationFrame(s._30Q),delete s._30Q)}});var nd=L.SelectionModel=function(T){var u=this;u._68O=y,u._map={},u._73O=new xm,u._74I=new ld,u._21I(T)};Oj("SelectionModel",k,{ms_fire:1,ms_dm:1,ms:function(h,U,M){this.addSelectionChangeListener(h,U,M)},ums:function(m,z){this.removeSelectionChangeListener(m,z)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===q},co:function(M){return this._map[M._id]!=A},ss:function(T){this.setSelection(T)},as:function(a){this.appendSelection(a)},rs:function(b){this.removeSelection(b)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(R){var F=this;if(F._68O!==R&&(R===no||R===q||R===y)){F.cs();var x=F._68O;F._68O=R,F.fp("selectionMode",x,R)}},_21I:function(V){var O=this,t=O._dataModel;t!==V&&(t&&(O.cs(),t.umm(O.handleDataModelChange,O)),O._dataModel=V,V.mm(O.handleDataModelChange,O,!0),O.fp(hd,t,V))},dispose:function(){var k=this;k.cs(),k._dataModel.umm(k.handleDataModelChange,k)},handleDataModelChange:function(b){var f=this;if(b.kind===En){var m=b.data;f.co(m)&&(f._73O.remove(m),delete f._map[m._id],f._75I(En,new xm(m)))}else b.kind===Go&&f.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(c){var q=this;if(q._filterFunc!==c){q.cs();var U=q._filterFunc;q._filterFunc=c,q.fp("filterFunc",U,q._filterFunc)}},_75I:function(q,H,d,A){d&&(this._73O.each(function(S){A[S._id]?d.remove(S):d.add(S)}),H=d.toList()),this._74I.fire({kind:q,datas:new xm(H)})},addSelectionChangeListener:function(x,l,T){this._74I.add(x,l,T)},removeSelectionChangeListener:function(w,i){this._74I.remove(w,i)},_97O:function(h,S){for(var f,A=this,E=0,j=new xm(h);E<j.size();E++)f=j.get(E),(A._filterFunc&&!A._filterFunc(f)||S&&A.co(f)||!S&&!A.co(f)||!A._dataModel.contains(f))&&(j.removeAt(E),E--);return j},appendSelection:function(W){var h=this;if(h._68O!==no){var D,j,A=h._73O,_=h._97O(W,!0);_.isEmpty()||(h.sg()&&(D=new xm(A),j=h._map,A.clear(),h._map={},_=new xm(_.get(_.size()-1))),_.each(function(p){A.add(p),h._map[p._id]=p}),h._75I("append",_,D,j))}},removeSelection:function(X){var h=this,M=h._97O(X),j=0,m=M.size();if(0!==m){for(;m>j;j++){var H=M.get(j);h._73O.remove(H),delete h._map[H._id]}h._75I(En,M)}},toSelection:function(B,Y){return this._73O.toList(B,Y)},getSelection:function(){return this._73O},each:function(Y,F){this._73O.each(Y,F)},setSelection:function(J){var g=this,i=g._73O;if(g._68O!==no&&!(i.isEmpty()&&!J||1===i.size()&&g.ld()===J)){var d=new xm(i),F=g._map;i.clear(),g._map={};var H=g._97O(J,!0);g.sg()&&H.size()>1&&(H=new xm(H.get(H.size()-1))),H.each(function(l){i.add(l),g._map[l._id]=l}),g._75I("set",A,d,F)}},clearSelection:function(){var Y=this,e=Y._73O;if(e.size()>0){var L=e.toList();e.clear(),Y._map={},Y._75I(Go,L)}},selectAll:function(){var D=this;if(D._68O!==no){var m,f,M=D._dataModel.toDatas();if(D._filterFunc)for(m=0;m<M.size();m++)f=M.get(m),D._filterFunc(f)||(M.removeAt(m),m--);var l=D._73O,x=new xm(l),O=D._map;l.clear(),D._map={},D.sg()&&M.size()>1&&(M=new xm(M.get(M.size()-1)));var X=M.size();for(m=0;X>m;m++)f=M.get(m),l.add(f),D._map[f._id]=f;D._75I("all",A,x,O)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(y){return this._map[y._id]!=A},getLastData:function(){var C=this._73O;return C.size()>0?C.get(C.size()-1):A},getFirstData:function(){var s=this._73O;return s.size()>0?s.get(0):A},isSelectable:function(R){var j=this;return R&&j._68O!==no?j._filterFunc?j._filterFunc(R):!0:!1}}),tq(j,{edgeGroupAgentFunc:A,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:w.rectSelectBorder,graphViewRectSelectBackground:Po,graphViewEditPointSize:F?17:7,graphViewEditPointBorderColor:w.editPointBorder,graphViewEditPointBackground:w.editPointBackground,setEdgeType:function(h,o,m){bl[h]=o,eo[h]=m},getEdgeType:function(j){return bl[j]}},!0),tq(V,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":d,"image.stretch":"fill",icons:d,ingroup:!0,"body.color":d,opacity:d,pixelPerfect:!0,"select.color":Iq,"select.width":1,"select.padding":2,"select.type":rp,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":Iq,"border.color":d,"border.width":2,"border.padding":2,"border.type":rp,label:d,"label.font":d,"label.color":Ug,"label.background":d,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":d,"label.max":d,"label.opacity":d,"label.scale":1,"label.align":d,label2:d,"label2.font":d,"label2.color":Ug,"label2.background":d,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":d,"label2.max":d,"label2.opacity":d,"label2.scale":1,"label2.align":d,note:d,"note.expanded":!0,"note.font":d,"note.color":bf,"note.background":Iq,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":d,"note.toggleable":!0,"note.border.width":1,"note.border.color":d,"note.opacity":d,"note.scale":1,"note.align":d,note2:d,"note2.expanded":!0,"note2.font":d,"note2.color":bf,"note2.background":Iq,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":d,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":d,"note2.opacity":d,"note2.scale":1,"note2.align":d,"group.type":d,"group.image":d,"group.image.stretch":"fill","group.repeat.image":d,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":d,"group.title.color":bf,"group.title.background":w.groupTitleBackground,"group.title.align":yi,"group.background":w.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":d,"group.border.color":fp,"group.border.cap":sn,"group.border.join":Rr,"group.gradient":A,"group.gradient.color":"#FFF",shape:d,"shape.background":fp,"shape.repeat.image":d,"shape.border.width":0,"shape.border.color":fp,"shape.border.3d":!1,"shape.border.3d.color":d,"shape.border.3d.accuracy":d,"shape.border.cap":sn,"shape.border.join":Rr,"shape.border.pattern":d,"shape.gradient":A,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":Ti,"shape.dash.offset":0,"shape.dash.color":ph,"shape.dash.width":d,"shape.dash.3d":!1,"shape.dash.3d.color":d,"shape.dash.3d.accuracy":d,"shape.polygon.side":6,"shape.arc.from":n,"shape.arc.to":N,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":d,"edge.type":d,"edge.points":d,"edge.segments":d,"edge.color":fp,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":d,"edge.3d.accuracy":d,"edge.cap":sn,"edge.join":Rr,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":d,"edge.dash":!1,"edge.dash.pattern":Ti,"edge.dash.offset":0,"edge.dash.color":ph,"edge.dash.width":d,"edge.dash.3d":!1,"edge.dash.3d.color":d,"edge.dash.3d.accuracy":d,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":d,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":d,"grid.column.percents":d,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":w.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":w.gridCellBorderColor,"grid.block":d,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":w.gridBlockColor},!0),tq(Al,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(n){this._5I=n},_76I:function(D,t,L){this._39I&&this._39I.fire({data:D,oldIndex:t,newIndex:L})},addIndexChangeListener:function(H,C,B){var r=this;r._39I||(r._39I=new ld),r._39I.add(H,C,B)},removeIndexChangeListener:function(w,q){this._39I.remove(w,q)},prepareRemove:function(r){yb(r)&&(r.setSource(A),r.setTarget(A)),r._70O&&r._70O.toList().each(this.remove,this),r._69O&&r._69O.toList().each(function(d){d.setHost(A)}),r._host&&r.setHost(A)},onAdded:function(u){this.isAutoAdjustIndex()&&this._76O(u)},onDataPropertyChanged:function($,m){Dg[m.property]&&this.isAutoAdjustIndex()&&this._76O($)},isAdjustable:function(b){return vj(b)||yb(b)},isAdjustedToBottom:function(w){return vs(w)?w.isExpanded()&&hg(w):!1},_76O:function(I){var _=this;_.isAdjustedToBottom(I)?(_.sendToBottom(I),I.eachChild(_._76O,_)):_.sendToTop(I)},sendToTop:function(D){var b=this;if(b.contains(D)&&b.isAdjustable(D)){var Z=b._datas;if(D!==Z.get(b.size()-1)){var z=Z.indexOf(D);Z.removeAt(z),Z.add(D),b._76I(D,z,b.size()-1)}if(yb(D)){var c=D._40I;c&&!b.isAdjustedToBottom(c)&&b.sendToTop(c),c=D._41I,c&&!b.isAdjustedToBottom(c)&&b.sendToTop(c)}D._69O&&D._69O.each(function(O){O.isRelatedTo(D)||vj(D)&&O.isLoopedHostOn(D)||b.sendToTop(O)}),D.ISubGraph||(!vs(D)||D.isExpanded())&&D._adjustChildrenToTop&&D.eachChild(function(A){yb(A)||b.sendToTop(A)})}},sendToBottom:function(Q,b){var O=this;if(Q!==b&&O.contains(Q)&&O.isAdjustable(Q)&&(!b||O.contains(b))){var D=O._datas,K=D.remove(Q),T=b?O._datas.indexOf(b):0;if(D.add(Q,T),K!==T){O._76I(Q,K,T);var E=Q._parent;!E||E.ISubGraph||yb(E)||O.sendToBottom(Q._parent,Q)}}}}),tq(tk,{ms_edit:function(E){E._46O=function(C){var e=this,A=e.gv.dm(),i=A.getHistoryManager(),q=e._index,Q=e._89I,V=e._node,j=e._shape,K=e._edge,$=e._77I;V&&Q?(this.fi({kind:"endEditRect",event:C,data:V,direction:Q}),i&&i.endInteraction()):j&&q>=0?(e.fi({kind:"endEditPoint",event:C,data:j,index:q}),i&&i.endInteraction()):K&&q>=0?(e.fi({kind:"endEditPoint",event:C,data:K,index:q}),i&&i.endInteraction()):$&&(e.fi({kind:"endEditRotation",event:C,data:$}),i&&i.endInteraction())},E._78I=function(S){var d=this;d.autoScroll(S);var $=d.gv.lp(S),I=d._index,T=d._89I,o=d._node,r=d._shape,F=d._edge,q=d._77I;if(o&&T)d._80O($),d.fi({kind:"betweenEditRect",event:S,data:o,direction:T});else if(r&&I>=0)$.e=r.getPoints().get(I).e,r.setPoint(I,$),d.fi({kind:"betweenEditPoint",event:S,data:r,index:I});else if(F&&I>=0){var g=F.s(vq);$.e=g.get(I).e,g.set(I,$),F.fp(vq,A,g),d.fi({kind:"betweenEditPoint",event:S,data:F,index:I})}else if(q){var X=q.p(),D=p+_($.y-X.y,$.x-X.x);O(D)<.04&&(D=0),q.setRotation(D),d.fi({kind:"betweenEditRotation",event:S,data:q})}},E._80O=function(y){var A=this,D=A._rect,r=D.x,g=D.y,u=D.width,x=D.height,q=A._89I;"northwest"===q?D=ap(y,{x:r+u,y:g+x}):q===Mg?D=ap({x:r,y:y.y},{x:r+u,y:g+x}):"northeast"===q?D=ap({x:r,y:y.y},{x:y.x,y:g+x}):q===_l?D=ap({x:y.x,y:g},{x:r+u,y:g+x}):q===Sg?D=ap({x:r,y:g},{x:y.x,y:g+x}):"southwest"===q?D=ap({x:y.x,y:g},{x:r+u,y:y.y}):"south"===q?D=ap({x:r,y:g},{x:r+u,y:y.y}):"southeast"===q&&(D=ap({x:r,y:g},y)),A._node.setRect(D)},E._80I=function(m,o,f,P,A){var W=this,I=W.gv.getEditPointSize()+2;return _n({x:o-I/2,y:f-I/2,width:I,height:I},m)?(W._89I!==P&&(W.setCursor(A),W._89I=P),!0):!1},E._79I=function(G,d,x){var R=this,b=R.gv,j=d?b.getDataUI(d):A,V=j?j._55O:A;if(V){var W,M,q,N=b.getEditPointSize()+2,L=b.lp(G);if(vj(d)){if(V._56O&&vj(d)&&(M=V._98o,_n({x:M.x-N/2,y:M.y-N/2,width:N,height:N},L)))return R._77I=d,x&&R.fi({kind:"beginEditRotation",event:G,data:d}),R.setCursor("crosshair"),!0;if(V._43O&&d instanceof be)for(q=d.getPoints(),W=q.size()-1;W>=0;W--)if(M=q.get(W),_n({x:M.x-N/2,y:M.y-N/2,width:N,height:N},L))return R._index=W,R._shape=d,x&&R.fi({kind:"beginEditPoint",event:G,data:d,index:W}),R.setCursor("crosshair"),!0;if(V._42O){var v=d.getRect(),k=v.x,l=v.y,u=v.width,z=v.height;if(R._80I(L,k,l,"northwest","nwse-resize")||R._80I(L,k+u/2,l,Mg,ur)||R._80I(L,k+u,l,"northeast","nesw-resize")||R._80I(L,k,l+z/2,_l,kk)||R._80I(L,k+u,l+z/2,Sg,kk)||R._80I(L,k,l+z,"southwest","nesw-resize")||R._80I(L,k+u/2,l+z,"south",ur)||R._80I(L,k+u,l+z,"southeast","nwse-resize"))return R._node=d,R._rect=d.getRect(),x&&R.fi({kind:"beginEditRect",event:G,data:d,direction:R._89I}),!0}}if(V._43O&&yb(d)&&d.s(Ri)===ig&&(q=d.s(vq)))for(W=q.size()-1;W>=0;W--)if(M=q.get(W),_n({x:M.x-N/2,y:M.y-N/2,width:N,height:N},L))return R._index=W,R._edge=d,x&&R.fi({kind:"beginEditPoint",event:G,data:d,index:W}),R.setCursor("crosshair"),!0}return!1}},ms_gv:function(v){v._currentSubGraph=A,v.upSubGraph=function(){this.setCurrentSubGraph(gg(this._currentSubGraph))},v.isVisible=function(w){var n=this;if(gg(w)!==n._currentSubGraph)return!1;if(yb(w)){var d=w._40I,j=w._41I;if(!d||!j)return!1;if(!(w.s("edge.independent")||n.isVisible(d)&&n.isVisible(j)))return!1;if(w.isEdgeGroupHidden())return!1}else for(var L=w._parent;L&&!L.ISubGraph;){if(vs(L)&&(!L.isExpanded()||!n.isVisible(L)))return!1;L=L._parent}if(n instanceof Zp){if(!w.s("3d.visible"))return!1}else if(!w.s("2d.visible"))return!1;return n._visibleFunc?n._visibleFunc(w):!0},v._16o=function(Y){var s=this;Y.datas.each(function(h){s.invalidateData(h);var i=h._parent;vs(i)&&vj(h)&&h.s(ic)&&(s.invalidateData(i),i._49I&&i._49I.each(function(D){s.invalidateData(D)}))}),s.onSelectionChanged(Y)},v.onSelectionChanged=function(X){var c=this,P=c.sm();if(1===P.size()&&("set"===X.kind||"append"===X.kind)){var Z=P.ld();c.isAutoMakeVisible()&&c.makeVisible(Z),c._76O&&c._dataModel.isAutoAdjustIndex()&&c._76O(Z)}},v.makeVisible=function(Y){if(Y){var E=this,I=E.getDataUI?E.getDataUI(Y):E.getData3dUI(Y);if(I){var G=Y,z=gg(Y);for(z!==E._currentSubGraph&&E.setCurrentSubGraph(z);(G=G._parent)&&G!==z;)vs(G)&&G.setExpanded(!0);E._23I=Y,E.iv()}}},v.getLabel=function(B){var H=B.getStyle(fq);return H===d?B.getName():H},v.getLabelBackground=function(r){return r.getStyle("label.background")},v.getLabelColor=function(O){return O.getStyle("label.color")},v.getLabel2=function(t){return t.getStyle("label2")},v.getLabel2Background=function(f){return f.getStyle("label2.background")},v.getLabel2Color=function(O){return O.getStyle("label2.color")},v.getNote=function(x){return x.getStyle(ej)},v.getNoteBackground=function(L){return L.getStyle("note.background")},v.getNote2=function(x){return x.getStyle(Nb)},v.getNote2Background=function(U){return U.getStyle("note2.background")},v.handleClick=function(T,w,P){var W=this;w?(W.fi({kind:"clickData",event:T,data:w,part:P}),W.onDataClicked(w,T)):(W.fi({kind:"clickBackground",event:T}),W.onBackgroundClicked(T))},v.handleDoubleClick=function(e,p,T){var K=this;Vp(e)&&(p?(K.fi({kind:"doubleClickData",event:e,data:p,part:T}),K.onDataDoubleClicked(p,e,T),K.checkDoubleClickOnNote(e,p,T)||K.checkDoubleClickOnRotation&&K.checkDoubleClickOnRotation(e,p,T)||(yb(p)?K.onEdgeDoubleClicked(p,e,T):p.ISubGraph?K.onSubGraphDoubleClicked(p,e,T):vs(p)?K.onGroupDoubleClicked(p,e,T):p.IDoorWindow?K.onDoorWindowDoubleClicked(p,e,T):p.ICSGBox&&K.onCSGBoxDoubleClicked(p,e,T))):(K.fi({kind:"doubleClickBackground",event:e}),K.onBackgroundDoubleClicked(e)))},v.onSubGraphDoubleClicked=function(v){this.setCurrentSubGraph(v)},v.onEdgeDoubleClicked=function(w,L){w.ISubGraph&&!gb(L)?this.setCurrentSubGraph(w):w.s("edge.toggleable")&&w.toggle()},v.onGroupDoubleClicked=function(Y){Y.s("group.toggleable")&&Y.toggle()},v.onDoorWindowDoubleClicked=function(U){U.s("dw.toggleable")&&U.toggle(!0)},v.onCSGBoxDoubleClicked=function(i,x){var s=this;if(s instanceof Zp){var H=s.getHitFaceInfo(x);H&&H.face&&i.s(H.face+".toggleable")&&i.toggleFace(H.face,!0)}},v.onBackgroundClicked=function(){},v.onBackgroundDoubleClicked=function(){this.upSubGraph()},v.onDataClicked=function(){},v.onDataDoubleClicked=function(){},v.onAutoLayoutEnded=function(){},v.onMoveEnded=function(){},v.onPanEnded=function(){},v.onPinchEnded=function(){},v.onRectSelectEnded=function(){},v.onZoomEnded=function(){}},ms_icons:function(u){u.getRotation=function(C){return C==A?0:C},u._15O=function(){var H=this,J=H.s(vl);if(J){var d=H,L=H.data||H._data,W=H._38o={icons:J,rects:{}};for(var V in J){var j=J[V],y=Ro(j.shape3d,L,d);if(!(Ro(j.visible,L,d)===!1||Ro(j.for3d,L,d)&&!H.I3d||y&&!H.I3d)){var O=y?[y]:Ro(j.names,L,d),_=O?O.length:0,D=Ro(j.position,L,d)||3,k=Ro(j.offsetX,L,d)||0,F=Ro(j.offsetY,L,d)||0,e=Ro(j.direction,L,d)||Sg,q=Ro(j.gap,L,d),Z=q!=A?q:1,E=Ro(j.rotation,L,d),B=Ro(j.keepOrien,L,d),i=Ro(j.rotationFixed,L,d)?E:H.getRotation(E,B,D),f=A,U=W.rects[V]=new Array(_);U.rotation=i;for(var C=0;_>C;C++){var o,z,X,S,u=O[C];if(y)X=0,S=0;else{var Q=Vd(u);X=Ro(j.width,L,d),S=Ro(j.height,L,d),X==A&&(X=zm(Q,L)),S==A&&(S=Tr(Q,L))}if(f?e===Sg?k+=X/2:e===_l?k-=X/2:e===Mg?F-=S/2:F+=S/2:f={width:X,height:S},H.I3d){var P=-X/2,I=-S/2;z={width:X,height:S,mat:H._16O(Ro(j.autorotate,L,d),D,f,Ro(j.face,L,d)||Li,Ro(j.t3,L,d),Ro(j.r3,L,d),Ro(j.rotationMode,L,d),k,F),vs:new ar([P,-I,0,P,-I-S,0,P+X,-I-S,0,P+X,-I,0])}}else o=H.getPosition(D,k,F,f,Ro(j.positionFixed,L,d)),z={x:o.x-X/2,y:o.y-S/2,width:X,height:S},H._68o(z,i);U[C]=z,e===Sg?k+=X/2+Z:e===_l?k-=X/2+Z:e===Mg?F-=S/2+Z:F+=S/2+Z}}}}}}});var Hq={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Zk={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Hd={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Dg={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Yj={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},ee={"edge.type":1,"edge.group":1},Dd={rotation:1,rotationX:1,rotationZ:1},un={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},te={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},an={shape:1,thickness:1,position:1},po=function(H,i){if(!H||!vs(i)||i.isEmpty())return!1;for(H=H._parent;vs(H);){if(H===i)return!0;H=H._parent}return!1},gg=function(v){if(!v)return A;if(yb(v)){var b=v._40I,B=v._41I;if(!b||!B)return A;var H=gg(b),s=gg(B);return H===s?H:A}for(var I=v._parent;yb(I)&&!I.ISubGraph;)I=I._parent;return I?I.ISubGraph?I:gg(I):A},Yg=function(B,s,y,v){var O=s.getStyle(y)*v;O&&mk(B,O),O=s.getStyle(y+".left")*v,O&&(B.x-=O,B.width+=O),O=s.getStyle(y+".right")*v,O&&(B.width+=O),O=s.getStyle(y+".top")*v,O&&(B.y-=O,B.height+=O),O=s.getStyle(y+".bottom")*v,O&&(B.height+=O),B.width<0&&(B.width=-B.width,B.x-=B.width),B.height<0&&(B.height=-B.height,B.y-=B.height)},hg=function(c){for(var G,Z=0,d=c.size();d>Z;Z++)if(G=c.getChildAt(Z),vj(G)&&hg(G))return!0;return c.hasAgentEdges()},Fo=function(d){if(!d)return A;for(var Y=d._parent;vs(Y);){if(!vs(Y._parent))return Y.isExpanded()?d:Y;Y.isExpanded()||(d=Y),Y=Y._parent}return d},Ed=function(T,v){if(!T||!v)return A;var s,k,g,$=gg(T),n=gg(v);if($!==n){for(;n&&$!==n;)n=gg(n);if($===n)return T;s=new xm,s.add(T,0);for(var R=T._parent;vj(R)&&!v.isDescendantOf(R);)s.add(R,0),R=R._parent;for(g=s.size(),k=0;g>k;k++){var S=s.get(k);if(vs(S)&&!S.isExpanded())return S;if(S.ISubGraph)return S}return T}return T},Vb=function(u){if(u.isLooped())return u._source;var P=Fo(u._source),$=Fo(u._target);return P===$?u._source:Ed(P,$)},Qn=function(a){if(a.isLooped())return a._target;var i=Fo(a._source),O=Fo(a._target);return i===O?a._target:Ed(O,i)},oo=function(n,R){var P;if(vs(R)&&R.isExpanded()){var Z=n.getDataUI(R);Z&&Z._88I&&(P=Z._88I.rect)}return P?P:R.getRect()},sf=function(S,w,k,t,h){return w?(k=wb(k,oo(S,w)),k.x+=t,k.y+=h,k):A},ok=function(M,K){if(!M||!K)return A;var G,w,a,Y,B,h;if(M===K){if(Y=M.getLoopedEdges(),!Y)return A;Y=new xm(Y)}else{if(B=M.getAgentEdges(),h=K.getAgentEdges(),!B||!h)return A;for(w=B.size(),G=0;w>G;G++)a=B.get(G),h.contains(a)&&(Y||(Y=new xm),Y.add(a))}if(Y)for(G=0;G<Y.size();G++)a=Y.get(G),a.getStyle(Ri)===ig&&(a._22I(A),Y.removeAt(G),G--);return Y},Me=function(q,C){var y=ok(q,C);if(y&&!y.isEmpty()){if(1===y.size())return y.get(0)._22I(A),void 0;var I=new xm,X=new xm;y.each(function(W){var A=W.s("edge.group");I.contains(A)||I.add(A)}),I.sort(),I.each(function(Z){X.add(new L.EdgeGroup(y.toList(function(p){return Z===p.s("edge.group")}),X))}),X.each(function($){$.each(function(D){D._22I($)})})}},hc=function(f,F){if(F){var D=F.rect,U=F.color,l=F.rotation,w=F.labelWidth,y=F.background,T=F.opacity,k=F.scale,B=k!=A&&1!==k;if(T!=A){var r=f.globalAlpha;f.globalAlpha*=T}if(l||B){f.save();var i=D.x+D.width/2,x=D.y+D.height/2;Io(f,i,x),l&&$e(f,l),B&&f.scale(k,k),Io(f,-i,-x)}if(y&&Gg(f,D.x,D.y,D.width,D.height,y),w){var a=D.width,N=f.createLinearGradient(D.x,D.y,D.x+a,D.y);N.addColorStop(0,U),N.addColorStop(.9,U),N.addColorStop(1,Uk),U=N,D.width=w}Eq(f,F.ss,D,F.font,U,F.align),w&&(D.width=a),(l||B)&&f.restore(),T!=A&&(f.globalAlpha=r)}},op=function(Z,t){if(t){var r=t.rect,V=r.x,z=r.y,S=r.width,j=r.height,X=t.background,i=t.backgroundImage,K=t.borderWidth,R=t.borderColor,b=t.labelWidth,M=t.opacity,x=t.scale,m=x!=A&&1!==x;if(M!=A){var C=Z.globalAlpha;Z.globalAlpha*=M}if(m){Z.save();var w=r.x+r.width/2,O=r.y+r.height/2;Io(Z,w,O),Z.scale(x,x),Io(Z,-w,-O)}if(t.expanded){var g=$(8,S/4),Q=z+j-8;if(Z.fillStyle=X,Z.beginPath(),Z.moveTo(V,z),Z.lineTo(V,Q),Z.lineTo(V+S/2,Q),Z.lineTo(V+S/2,z+j),Z.lineTo(V+S/2+g,Q),Z.lineTo(V+S,Q),Z.lineTo(V+S,z),Z.closePath(),Z.fill(),K&&(Z.lineWidth=K,Z.lineJoin="round",Z.lineCap="round",Z.strokeStyle=R?R:qg(X),Z.beginPath(),Z.moveTo(V+S,z),Z.lineTo(V+S,Q),Z.lineTo(V+S/2+g,Q),Z.lineTo(V+S/2,z+j),Z.stroke(),Z.strokeStyle=R?R:Wd(X),Z.beginPath(),Z.moveTo(V+S,z),Z.lineTo(V,z),Z.lineTo(V,Q),Z.lineTo(V+S/2,Q),Z.lineTo(V+S/2,z+j),Z.stroke()),i)Bj(Z,Vd(i),Se,r.x,r.y,r.width,r.height-8,t.data,t.view);else{if(r.height-=8,X=t.color,b){var k=S,L=Z.createLinearGradient(V,z,V+k,z);L.addColorStop(0,X),L.addColorStop(.9,X),L.addColorStop(1,Uk),X=L,r.width=b}Eq(Z,t.ss,r,t.font,X,t.align),b&&(r.width=k),r.height+=8}}else if(t.icon)pp(Z,Vd(t.icon),V,z,S,j,t.data,t.view);else{var G=S/2;K&&(Z.lineWidth=K,Z.lineJoin="round",Z.lineCap="round",Z.strokeStyle=R?R:qg(X),Z.beginPath(),Z.arc(V+G,z+G,G,p,1.6*n,!0),Z.moveTo(V+G,z+j),Z.lineTo(V+S-G/5,z+G),Z.stroke(),Z.strokeStyle=R?R:Wd(X),Z.beginPath(),Z.arc(V+G,z+G,G,1.6*n,p,!0),Z.moveTo(V+G,z+j),Z.lineTo(V+G/5,z+G),Z.stroke()),Z.fillStyle=X,Z.beginPath(),Z.arc(V+G,z+G,G,0,N,!0),Z.moveTo(V+G,z+j),Z.lineTo(V+S-G/5,z+G),Z.lineTo(V+G/5,z+G),Z.closePath(),Z.fill(),Z.fillStyle=t.color,Z.beginPath(),Z.arc(V+G,z+G,G/3,0,N,!0),Z.fill()}m&&Z.restore(),M!=A&&(Z.globalAlpha=C)}},Pe=function(u,r){return r>2*u?u:r/2},_m=function(g,T,W,z){if(!g||!T)return 0;var s=_(T.y-g.y,T.x-g.x);return W||(s=T.x<g.x?s+n:s),s+z},io=function(j,F,R,o,O,w,u){u&&(j.x>F.x||j.x===F.x&&j.y>F.y)&&(R=rm[R],O=-O);var y=wb(R,{x:0,y:0,width:Qd(j,F),height:0},w);return y.x+=o,y.y+=O,y=new sj(_(F.y-j.y,F.x-j.x)).tf(y),y.x+=j.x,y.y+=j.y,y},Vk=function(O,s,Q,k,B){if(O._19Q=!0,!Q.getEdgeGroup())return k?Q.s("edge.gap"):0;var l,V=0,A=0,x=0;if(Q.getEdgeGroup().getSiblings().each(function(u){u.each(function(C){if(s.isVisible(C)&&C.s(Ri)==B){var H=C.s("edge.gap");l?(A+=x/2+H/2,x=H):(l=C,x=H),C===Q&&(V=A)}})}),k)return A-V+x;var Z=V-A/2;return l&&Q._40I!==l._40I&&(O._19Q=!1),Z},cp=function(){var v=function(U){var e=[];return U.forEach(function(g){e.push({x:g.x,y:g.y}),e.push({x:g.x+g.width,y:g.y+g.height}),e.push({x:g.x+g.width,y:g.y}),e.push({x:g.x,y:g.y+g.height})}),e};return function(r,i,L){if("oval"===r){var h=0,n=L.height/L.width,F=n*n,O=L.x+L.width/2,Y=L.y+L.height/2,A=v(i);A.forEach(function($){var _=$.x-O,s=$.y-Y,z=_*_+s*s/F;z>h&&(h=z)}),h=s(h);var Q=n*h;return{x:O-h,y:Y-Q,width:2*h,height:2*Q}}if("circle"===r){var M=0,O=L.x+L.width/2,Y=L.y+L.height/2,A=v(i);return A.forEach(function(N){var g=N.x-O,W=N.y-Y,L=g*g+W*W;L>M&&(M=L)}),M=s(M),{x:O-M,y:Y-M,width:2*M,height:2*M}}return"roundRect"===r?(mk(L,$(L.width,L.height)/16),L):L}}(),uj=L.graph={},Op=function(W,$,a){Lk(H+".graph."+W,$,a)};L.layout={};var jh={comps:[{type:Qm,points:[85,50,70,115,100,71,86,107,88,49,57,54,105,119,56,43,43,43,68,84,70,119,50,110,65,86,75,69,104,122,83,82,99,80,55,122,51,51,117,107,67,87,52,84,97,57,78,111,119,98,101,76,79,109,82,56,78,112,89,109,111,47,110,51],borderWidth:1,borderColor:A}]};jh[Ql]=jh[Hh]=160,Tm("node_image",Pf(30,30,[{type:rp,rect:[4,5,22,16],gradient:xf,gradientColor:wk,background:fp},{type:rp,rect:[2,3,26,20],borderWidth:1,borderColor:fp},{type:rp,rect:[11,23,8,4],background:fp},{type:rp,rect:[6,27,18,2],background:fp}])),Tm("node_icon",Pf(16,16,[{type:rp,rect:[2,2,12,10],gradient:xf,gradientColor:wk,background:fp},{type:yd,rect:[2,2,12,10],width:1,color:fp},{type:rp,rect:[6,12,4,2],background:fp},{type:rp,rect:[4,14,8,1],background:fp}])),Tm("group_image",Pf(66,39,[{type:rp,rect:[44.3,18,18.1,12.8],gradient:xf,gradientColor:wk,background:fp},{type:rp,rect:[3.3,17.8,18.1,12.8],gradient:xf,gradientColor:wk,background:fp},{type:rp,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:fp,gradient:xf,gradientColor:wk,background:fp},{type:rp,rect:[26.2,29.4,12.8,4.2],background:fp},{type:rp,rect:[21.3,33.5,22.5,2.3],background:fp},{type:rp,rect:[5.3,32.7,14.1,2.1],background:fp},{type:rp,rect:[9,30.4,6.7,2.4],background:fp},{type:rp,rect:[50,30.7,6.7,2.4],background:fp},{type:rp,rect:[46.3,33,14.1,2.1],background:fp}])),Tm("group_icon",Pf(16,16,[{type:rp,rect:[4,12,4,2],background:fp},{type:rp,rect:[2,13,8,1],background:fp},{type:rp,rect:[12,12,2,1],background:fp},{type:rp,rect:[11,13,4,1],background:fp},{type:rp,rect:[10,7,6,5],gradient:xf,gradientColor:wk,background:fp},{type:rp,rect:[1,2,10,10],gradient:xf,gradientColor:wk,background:fp},{type:yd,rect:[1,2,10,10],width:1,color:fp}])),Tm("edge_icon",Pf(16,16,[{type:rp,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:xf,gradientColor:wk,background:fp},{type:rp,rect:[10.8,1,4,4],background:fp},{type:rp,rect:[1,11,4,4],background:fp}])),Tm("subGraph_image",Pf(72,45,[{type:Qm,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:xf,gradientColor:wk,background:fp},{type:rp,rect:[29.6,30.7,3.6,1.8],background:fp},{type:rp,rect:[28.4,32.3,6,1.2],background:fp},{type:rp,rect:[37.3,32,10.8,1.8],background:fp},{type:rp,rect:[39.1,29.9,7.2,2.3],background:fp},{type:rp,rect:[26.6,23.7,9.6,7.2],gradient:xf,gradientColor:wk,background:fp},{type:rp,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:fp,gradient:xf,gradientColor:wk,background:fp}])),Tm("subGraph_icon",Pf(17,17,[{type:Qm,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:xf,gradientColor:wk,background:fp}])),Tm("shape_icon",Pf(16,16,[{type:Qm,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:fp}])),Tm("polyline_icon",Pf(16,16,[{type:Qm,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:fp},lj(7.5,.4),lj(7.5,6.3),lj(13.6,6.3),lj(13.6,14),lj(.7,13.9),lj(.7,.3)])),Tm("grid_icon",Pf(16,16,[{type:rp,rect:[1,1,4,4],background:fp,gradient:xf,gradientColor:wk},{type:rp,rect:[6,1,4,4],background:fp,gradient:xf,gradientColor:wk},{type:rp,rect:[11,1,4,4],background:fp,gradient:xf,gradientColor:wk},{type:rp,rect:[11,6,4,4],background:fp,gradient:xf,gradientColor:wk},{type:rp,rect:[6,6,4,4],background:fp,gradient:xf,gradientColor:wk},{type:rp,rect:[1,6,4,4],background:fp,gradient:xf,gradientColor:wk},{type:rp,rect:[11,11,4,4],background:fp,gradient:xf,gradientColor:wk},{type:rp,rect:[6,11,4,4],background:fp,gradient:xf,gradientColor:wk},{type:rp,rect:[1,11,4,4],background:fp,gradient:xf,gradientColor:wk}])),Tm("light_icon",Pf(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:fp},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:fp,gradient:xf,gradientColor:wk,background:{func:function(n){var k=n?n.s(ks):A;
return Uh(k)?"rgb("+P(255*k[0])+","+P(255*k[1])+","+P(255*k[2])+")":k||fp}}}]));var Jo=function(B,p){for(var U=B.vertices,z=0;z<U.length;z++){var Z=U[z],r=Z.y;Z.y=Z.z,Z.z=-r,p&&(Z.y+=p)}},vr=function($){for(var e,E,p,j,c,J,b=[],m=[],X=[],W=$.faces,h=0,o=0,R=0,w=W.length;w>h;h++,o+=6,R+=9){var v=W[h];1===v.i?(e||(e=[],E=[],p=[]),bj(v,h,o,R,$,e,p,E)):2===v.i?(j||(j=[],c=[],J=[]),bj(v,h,o,R,$,j,J,c)):bj(v,h,o,R,$,b,X,m)}return{vs:b,uv:m,ns:X,top_vs:e,top_uv:E,top_ns:p,bottom_vs:j,bottom_uv:c,bottom_ns:J}},bj=function(t,i,Y,S,y,d,e,V){var P=y.vertices,u=y.faceVertexUvs,X=P[t.a],a=P[t.b],w=P[t.c];d[S]=X.x,d[S+1]=X.y,d[S+2]=X.z,d[S+3]=a.x,d[S+4]=a.y,d[S+5]=a.z,d[S+6]=w.x,d[S+7]=w.y,d[S+8]=w.z;var M=t.vertexNormals;if(3===M.length){var p=M[0],F=M[1],l=M[2];e[S]=p.x,e[S+1]=p.y,e[S+2]=p.z,e[S+3]=F.x,e[S+4]=F.y,e[S+5]=F.z,e[S+6]=l.x,e[S+7]=l.y,e[S+8]=l.z}else{var C=t.normal;e[S]=C.x,e[S+1]=C.y,e[S+2]=C.z,e[S+3]=C.x,e[S+4]=C.y,e[S+5]=C.z,e[S+6]=C.x,e[S+7]=C.y,e[S+8]=C.z}var R=u[0][i][0],f=u[0][i][1],H=u[0][i][2];V[Y]=R.x,V[Y+1]=R.y,V[Y+2]=f.x,V[Y+3]=f.y,V[Y+4]=H.x,V[Y+5]=H.y},xc=function(o,L,B,j,m,D,q,x,V){B==A&&(B=!0),j==A&&(j=!0),q==A&&(q=1),x==A&&(x=0);var y=new Cl;return Rc(y,o,L,V),vr(new to(y,{top:B,bottom:j,curveSegments:m,amount:q,repeatUVLength:D},-q/2+x))},Dr=function(s,j){this.x=s||0,this.y=j||0};Dr.prototype={constructor:Dr,add:function(U){return this.x+=U.x,this.y+=U.y,this},sub:function(m){return this.x-=m.x,this.y-=m.y,this},equals:function(Q){return Q.x===this.x&&Q.y===this.y},multiplyScalar:function(H){return this.x*=H,this.y*=H,this},distanceTo:function(O){return s(this.distanceToSquared(O))},distanceToSquared:function(Z){var k=this.x-Z.x,y=this.y-Z.y;return k*k+y*y},clone:function(){return new Dr(this.x,this.y)}};var xo=function(e,H,L){this.x=e||0,this.y=H||0,this.z=L||0};xo.prototype={constructor:xo,set:function(H,l,t){return this.x=H,this.y=l,this.z=t,this},setY:function(V){return this.y=V,this},copy:function(A){return this.x=A.x,this.y=A.y,this.z=A.z,this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this},addVectors:function(I,B){return this.x=I.x+B.x,this.y=I.y+B.y,this.z=I.z+B.z,this},sub:function(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z,this},subVectors:function(k,Y){return this.x=k.x-Y.x,this.y=k.y-Y.y,this.z=k.z-Y.z,this},multiplyScalar:function(R){return this.x*=R,this.y*=R,this.z*=R,this},applyMatrix4:function(x){var p=this.x,R=this.y,Y=this.z,N=x.elements;return this.x=N[0]*p+N[4]*R+N[8]*Y+N[12],this.y=N[1]*p+N[5]*R+N[9]*Y+N[13],this.z=N[2]*p+N[6]*R+N[10]*Y+N[14],this},divideScalar:function(R){if(0!==R){var Z=1/R;this.x*=Z,this.y*=Z,this.z*=Z}else this.x=0,this.y=0,this.z=0;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},length:function(){return s(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(D){var N=this.x,B=this.y,X=this.z;return this.x=B*D.z-X*D.y,this.y=X*D.x-N*D.z,this.z=N*D.y-B*D.x,this},crossVectors:function(E,e){var W=E.x,X=E.y,V=E.z,h=e.x,S=e.y,J=e.z;return this.x=X*J-V*S,this.y=V*h-W*J,this.z=W*S-X*h,this},distanceTo:function(j){return s(this.distanceToSquared(j))},distanceToSquared:function(m){var I=this.x-m.x,r=this.y-m.y,M=this.z-m.z;return I*I+r*r+M*M},clone:function(){return new xo(this.x,this.y,this.z)}};var In=function(){this.elements=new Float32Array(16)};In.prototype={constructor:In,set:function(c,I,x,w,j,u,o,L,C,D,O,k,f,p,P,m){var H=this.elements;return H[0]=c,H[4]=I,H[8]=x,H[12]=w,H[1]=j,H[5]=u,H[9]=o,H[13]=L,H[2]=C,H[6]=D,H[10]=O,H[14]=k,H[3]=f,H[7]=p,H[11]=P,H[15]=m,this},makeRotationAxis:function(w,k){var c=U(k),L=m(k),B=1-c,N=w.x,u=w.y,i=w.z,A=B*N,n=B*u;return this.set(A*N+c,A*u-L*i,A*i+L*u,0,A*u+L*i,n*u+c,n*i-L*N,0,A*i-L*u,n*i+L*N,B*i*i+c,0,0,0,0,1),this}};var so=function(H){this.repeatUVLength=H};so.prototype={generateTopUV:function(i,E,c,k,q,t,w){var N,g,_,s,l=i.vertices,r=l[k].x,h=l[k].y,x=l[q].x,F=l[q].y,m=l[t].x,C=l[t].y,j=this.repeatUVLength;if(j)N=0,g=0,_=j,s=j;else{this._bb||(this._bb=E.getBoundingBox());var d=this._bb;N=d.minX,g=d.minY,_=d.maxX-N,s=d.maxY-g}return w?[new Dr((r-N)/_,(h-g)/s),new Dr((x-N)/_,(F-g)/s),new Dr((m-N)/_,(C-g)/s)]:[new Dr((r-N)/_,1-(h-g)/s),new Dr((x-N)/_,1-(F-g)/s),new Dr((m-N)/_,1-(C-g)/s)]},generateBottomUV:function(r,o,L,J,d,D){return this.generateTopUV(r,o,L,J,d,D,!0)},generateSideWallUV:function(K,c,w,U,C,k,Y,j,N,n,p,M){if(!this._cl){for(var v,u,Z=[],t=0,F=w.length,l=0;F>l;l++){v=w[l],u=w[(l+1)%F];var D=v.x-u.x,B=v.y-u.y,Q=s(D*D+B*B);Z.push(t),t+=Q}for(var l=0;F>l;l++)Z[l]/=t;this._cl=Z}var Z=this._cl,$=1-N/n,X=1-(N+1)/n,f=Z[p],H=Z[M];return H>f&&(f+=1),[new Dr(f,$),new Dr(H,$),new Dr(H,X),new Dr(f,X)]}};var Mq=function(k,Z,H,q,v,W){this.a=k,this.b=Z,this.c=H,this.i=W,this.normal=q instanceof xo?q:new xo,this.vertexNormals=q instanceof Array?q:[]};Mq.prototype={constructor:Mq};var Cg=function(){},Xr=Cg.prototype;Xr.getPointAt=function(G){var B=this.getUtoTmapping(G);return this.getPoint(B)},Xr.getPoints=function(p){p||(p=5);var C,D=[];for(C=0;p>=C;C++)D.push(this.getPoint(C/p));return D},Xr.getSpacedPoints=function($){$||($=5);var c,I=[];for(c=0;$>=c;c++)I.push(this.getPointAt(c/$));return I},Xr.getLength=function(){var R=this.getLengths();return R[R.length-1]},Xr.getLengths=function(Z){if(Z||(Z=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==Z+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var s,K,R=[],B=this.getPoint(0),f=0;for(R.push(0),K=1;Z>=K;K++)s=this.getPoint(K/Z),f+=s.distanceTo(B),R.push(f),B=s;return this.cacheArcLengths=R,R},Xr.getUtoTmapping=function(X,t){var h,s=this.getLengths(),V=0,B=s.length;h=t?t:X*s[B-1];for(var D,w=0,O=B-1;O>=w;)if(V=u(w+(O-w)/2),D=s[V]-h,0>D)w=V+1;else{if(!(D>0)){O=V;break}O=V-1}if(V=O,s[V]==h){var W=V/(B-1);return W}var R=s[V],b=s[V+1],o=b-R,K=(h-R)/o,W=(V+K)/(B-1);return W},Xr.getTangent=function(X){var i=1e-4,h=X-i,y=X+i;0>h&&(h=0),y>1&&(y=1);var t=this.getPoint(h),Y=this.getPoint(y),P=Y.clone().sub(t);return P.normalize()},Xr.getTangentAt=function(s){var C=this.getUtoTmapping(s);return this.getTangent(C)},Cg.create=function(Z,z){return Z.prototype=cm(Cg.prototype),Z.prototype.getPoint=z,Z};var Vj=function(){this.curves=[],this.autoClose=!1},Ir=Vj.prototype=cm(Xr);Ir.add=function(G){this.curves.push(G)},Ir.closePath=function(){var _=this.curves[0].getPoint(0),V=this.curves[this.curves.length-1].getPoint(1);_.equals(V)||this.curves.push(new Bd(V,_))},Ir.getPoint=function(N){for(var d,M,h=N*this.getLength(),O=this.getCurveLengths(),p=0;p<O.length;){if(O[p]>=h){d=O[p]-h,M=this.curves[p];var x=1-d/M.getLength();return M.getPointAt(x)}p++}return null},Ir.getLength=function(){var k=this.getCurveLengths();return k[k.length-1]},Ir.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var D,u=[],p=0,B=this.curves.length;for(D=0;B>D;D++)p+=this.curves[D].getLength(),u.push(p);return this.cacheLengths=u,u},Ir.getTransformedPoints=function(b){return this.getPoints(b)},Ir.getBoundingBox=function(){var R,s,x,u,t,Y,J=this.getPoints();R=s=Number.NEGATIVE_INFINITY,u=t=Number.POSITIVE_INFINITY;var I,P,Q,e,C=J[0]instanceof xo;for(e=C?new xo:new Dr,P=0,Q=J.length;Q>P;P++)I=J[P],I.x>R&&(R=I.x),I.x<u&&(u=I.x),I.y>s&&(s=I.y),I.y<t&&(t=I.y),C&&(I.z>x&&(x=I.z),I.z<Y&&(Y=I.z)),e.add(I);var b={minX:u,minY:t,maxX:R,maxY:s};return C&&(b.maxZ=x,b.minZ=Y),b};var Tl=function(U){Vj.call(this),this.actions=[],U&&this.fromPoints(U)},Nl=Tl.prototype=cm(Vj.prototype),tm="moveTo",Xc="lineTo",tb="quadraticCurveTo",Bi="bezierCurveTo",oc="arc",uk="ellipse";Nl.fromPoints=function(q){this.moveTo(q[0].x,q[0].y);for(var T=1,G=q.length;G>T;T++)this.lineTo(q[T].x,q[T].y)},Nl.moveTo=function(){var K=Array.prototype.slice.call(arguments);this.actions.push({action:tm,args:K})},Nl.lineTo=function(X,L){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,M=s[s.length-2],B=s[s.length-1],x=new Bd(new Dr(M,B),new Dr(X,L));this.curves.push(x),this.actions.push({action:Xc,args:a})},Nl.quadraticCurveTo=function(s,k,e,L){var f=Array.prototype.slice.call(arguments),h=this.actions[this.actions.length-1].args,j=h[h.length-2],t=h[h.length-1],A=new Oq(new Dr(j,t),new Dr(s,k),new Dr(e,L));this.curves.push(A),this.actions.push({action:tb,args:f})},Nl.bezierCurveTo=function(V,S,E,t,U,g){var q=Array.prototype.slice.call(arguments),F=this.actions[this.actions.length-1].args,T=F[F.length-2],R=F[F.length-1],K=new Re(new Dr(T,R),new Dr(V,S),new Dr(E,t),new Dr(U,g));this.curves.push(K),this.actions.push({action:Bi,args:q})},Nl.arc=function(y,Z,g,K,$,X){var j=this.actions[this.actions.length-1].args,r=j[j.length-2],V=j[j.length-1];this.absarc(y+r,Z+V,g,K,$,X)},Nl.absarc=function(p,Y,q,Z,d,b){this.absellipse(p,Y,q,q,Z,d,b)},Nl.ellipse=function(P,n,Q,L,a,S,T){var s=this.actions[this.actions.length-1].args,v=s[s.length-2],V=s[s.length-1];this.absellipse(P+v,n+V,Q,L,a,S,T)},Nl.absellipse=function(E,K,V,N,i,g,y){var W=Array.prototype.slice.call(arguments),h=new rs(E,K,V,N,i,g,y);this.curves.push(h);var G=h.getPoint(1);W.push(G.x),W.push(G.y),this.actions.push({action:uk,args:W})},Nl.getSpacedPoints=function(Z){Z||(Z=40);for(var r=[],E=0;Z>E;E++)r.push(this.getPoint(E/Z));return r},Nl.getPoints=function(r,c){r=r||12;var T,C,l,b,H,D,o,$,N,X,i,F,f,j,G,q,s,Z,I=[];for(T=0,C=this.actions.length;C>T;T++)switch(l=this.actions[T],b=l.action,H=l.args,b){case tm:I.push(new Dr(H[0],H[1]));break;case Xc:I.push(new Dr(H[0],H[1]));break;case tb:for(D=H[2],o=H[3],X=H[0],i=H[1],I.length>0?(j=I[I.length-1],F=j.x,f=j.y):(j=this.actions[T-1].args,F=j[j.length-2],f=j[j.length-1]),G=1;r>=G;G++)q=G/r,s=Wn.b2(q,F,X,D),Z=Wn.b2(q,f,i,o),I.push(new Dr(s,Z));break;case Bi:for(D=H[4],o=H[5],X=H[0],i=H[1],$=H[2],N=H[3],I.length>0?(j=I[I.length-1],F=j.x,f=j.y):(j=this.actions[T-1].args,F=j[j.length-2],f=j[j.length-1]),G=1;r>=G;G++)q=G/r,s=Wn.b3(q,F,X,$,D),Z=Wn.b3(q,f,i,N,o),I.push(new Dr(s,Z));break;case oc:var u,P=H[0],h=H[1],w=H[2],y=H[3],E=H[4],x=!!H[5],a=E-y,B=2*r;for(G=1;B>=G;G++)q=G/B,x||(q=1-q),u=y+q*a,s=P+w*U(u),Z=h+w*m(u),I.push(new Dr(s,Z));break;case uk:var u,P=H[0],h=H[1],k=H[2],n=H[3],y=H[4],E=H[5],x=!!H[6],a=E-y,B=2*r;for(G=1;B>=G;G++)q=G/B,x||(q=1-q),u=y+q*a,s=P+k*U(u),Z=h+n*m(u),I.push(new Dr(s,Z))}var V=I[I.length-1],Q=1e-10;return O(V.x-I[0].x)<Q&&O(V.y-I[0].y)<Q&&I.splice(I.length-1,1),c&&I.push(I[0]),I},Nl.toShapes=function(b,s){function U(j){var a,r,D,B,A,y=[],l=new Tl;for(a=0,r=j.length;r>a;a++)D=j[a],A=D.args,B=D.action,B==tm&&0!=l.actions.length&&(y.push(l),l=new Tl),l[B].apply(l,A);return 0!=l.actions.length&&y.push(l),y}function p(M){for(var j=[],h=0,T=M.length;T>h;h++){var S=M[h],p=new Cl;p.actions=S.actions,p.curves=S.curves,j.push(p)}return j}function t(Z,V){for(var h=1e-10,K=V.length,y=!1,H=K-1,L=0;K>L;H=L++){var R=V[H],s=V[L],r=s.x-R.x,$=s.y-R.y;if(O($)>h){if(0>$&&(R=V[L],r=-r,s=V[H],$=-$),Z.y<R.y||Z.y>s.y)continue;if(Z.y==R.y){if(Z.x==R.x)return!0}else{var m=$*(Z.x-R.x)-r*(Z.y-R.y);if(0==m)return!0;if(0>m)continue;y=!y}}else{if(Z.y!=R.y)continue;if(s.x<=Z.x&&Z.x<=R.x||R.x<=Z.x&&Z.x<=s.x)return!0}}return y}var F=U(this.actions);if(0==F.length)return[];if(s===!0)return p(F);var h,w,r,P=[];if(1==F.length)return w=F[0],r=new Cl,r.actions=w.actions,r.curves=w.curves,P.push(r),P;var q=!Cl.Utils.isClockWise(F[0].getPoints());q=b?!q:q;var V,z=[],o=[],_=[],i=0;o[i]=d,_[i]=[];var n,E;for(n=0,E=F.length;E>n;n++)w=F[n],V=w.getPoints(),h=Wn.isClockWise(V),h=b?!h:h,h?(!q&&o[i]&&i++,o[i]={s:new Cl,p:V},o[i].s.actions=w.actions,o[i].s.curves=w.curves,q&&i++,_[i]=[]):_[i].push({h:w,p:V[0]});if(!o[0])return p(F);if(o.length>1){for(var e=!1,M=[],j=0,J=o.length;J>j;j++)z[j]=[];for(var j=0,J=o.length;J>j;j++){o[j];for(var I=_[j],D=0;D<I.length;D++){for(var x=I[D],H=!0,f=0;f<o.length;f++)t(x.p,o[f].p)&&(j!=f&&M.push({froms:j,tos:f,hole:D}),H?(H=!1,z[f].push(x)):e=!0);H&&z[j].push(x)}}M.length>0&&(e||(_=z))}var K,S,A;for(n=0,E=o.length;E>n;n++)for(r=o[n].s,P.push(r),K=_[n],S=0,A=K.length;A>S;S++)r.holes.push(K[S].h);return P};var Cl=function(){Tl.apply(this,arguments),this.holes=[]},Uj=Cl.prototype=cm(Nl);Uj.getPointsHoles=function(r){var p,g=this.holes.length,N=[];for(p=0;g>p;p++)N[p]=this.holes[p].getTransformedPoints(r);return N},Uj.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},Uj.extractPoints=function(K){return this.extractAllPoints(K)};var Wn={triangulateShape:function(Y,u){function x(Z,v,s){return Z.x!=v.x?Z.x<v.x?Z.x<=s.x&&s.x<=v.x:v.x<=s.x&&s.x<=Z.x:Z.y<v.y?Z.y<=s.y&&s.y<=v.y:v.y<=s.y&&s.y<=Z.y}function F(o,p,n,d,H){var r=1e-10,C=p.x-o.x,y=p.y-o.y,J=d.x-n.x,z=d.y-n.y,P=o.x-n.x,A=o.y-n.y,g=y*J-C*z,D=y*P-C*A;if(O(g)>r){var i;if(g>0){if(0>D||D>g)return[];if(i=z*P-J*A,0>i||i>g)return[]}else{if(D>0||g>D)return[];if(i=z*P-J*A,i>0||g>i)return[]}if(0==i)return!H||0!=D&&D!=g?[o]:[];if(i==g)return!H||0!=D&&D!=g?[p]:[];if(0==D)return[n];if(D==g)return[d];var F=i/g;return[{x:o.x+F*C,y:o.y+F*y}]}if(0!=D||z*P!=J*A)return[];var k=0==C&&0==y,K=0==J&&0==z;if(k&&K)return o.x!=n.x||o.y!=n.y?[]:[o];if(k)return x(n,d,o)?[o]:[];if(K)return x(o,p,n)?[n]:[];var m,u,W,Z,S,U,v,V;return 0!=C?(o.x<p.x?(m=o,W=o.x,u=p,Z=p.x):(m=p,W=p.x,u=o,Z=o.x),n.x<d.x?(S=n,v=n.x,U=d,V=d.x):(S=d,v=d.x,U=n,V=n.x)):(o.y<p.y?(m=o,W=o.y,u=p,Z=p.y):(m=p,W=p.y,u=o,Z=o.y),n.y<d.y?(S=n,v=n.y,U=d,V=d.y):(S=d,v=d.y,U=n,V=n.y)),v>=W?v>Z?[]:Z==v?H?[]:[S]:V>=Z?[S,u]:[S,U]:W>V?[]:W==V?H?[]:[m]:V>=Z?[m,u]:[m,U]}function $(v,J,B,U){var f=1e-10,L=J.x-v.x,z=J.y-v.y,M=B.x-v.x,p=B.y-v.y,j=U.x-v.x,a=U.y-v.y,W=L*p-z*M,r=L*a-z*j;if(O(W)>f){var Y=j*p-a*M;return W>0?r>=0&&Y>=0:r>=0||Y>=0}return r>0}function o(j,B){function x(R,l){var p=u.length-1,t=R-1;0>t&&(t=p);var f=R+1;f>p&&(f=0);var y=$(u[R],u[t],u[f],S[l]);if(!y)return!1;var n=S.length-1,r=l-1;0>r&&(r=n);var F=l+1;return F>n&&(F=0),y=$(S[l],S[r],S[F],u[R]),y?!0:!1}function t(H,q){var b,s,o;for(b=0;b<u.length;b++)if(s=b+1,s%=u.length,o=F(H,q,u[b],u[s],!0),o.length>0)return!0;return!1}function U(R,b){var T,s,W,i,d;for(T=0;T<I.length;T++)for(s=B[I[T]],W=0;W<s.length;W++)if(i=W+1,i%=s.length,d=F(R,b,s[W],s[i],!0),d.length>0)return!0;return!1}for(var S,L,D,g,C,H,e,k,P,V,s,u=j.concat(),I=[],K=[],m=0,z=B.length;z>m;m++)I.push(m);for(var A=0,v=2*I.length;I.length>0&&(v--,!(0>v));)for(D=A;D<u.length;D++){g=u[D],L=-1;for(var m=0;m<I.length;m++)if(H=I[m],e=g.x+":"+g.y+":"+H,K[e]===d){S=B[H];for(var W=0;W<S.length;W++)if(C=S[W],x(D,W)&&!t(g,C)&&!U(g,C)){L=W,I.splice(m,1),k=u.slice(0,D+1),P=u.slice(D),V=S.slice(L),s=S.slice(0,L+1),u=k.concat(V).concat(s).concat(P),A=D;break}if(L>=0)break;K[e]=!0}if(L>=0)break}return u}for(var Z,R,g,q,b,n,L={},H=Y.concat(),s=0,D=u.length;D>s;s++)Array.prototype.push.apply(H,u[s]);for(Z=0,R=H.length;R>Z;Z++)b=H[Z].x+":"+H[Z].y,L[b]!==d,L[b]=Z;var z=o(Y,u),I=Bo.Triangulate(z,!1);for(Z=0,R=I.length;R>Z;Z++)for(q=I[Z],g=0;3>g;g++)b=q[g].x+":"+q[g].y,n=L[b],n!==d&&(q[g]=n);return I.concat()},isClockWise:function(N){return Bo.Triangulate.area(N)<0},b2p0:function(j,R){var G=1-j;return G*G*R},b2p1:function(X,I){return 2*(1-X)*X*I},b2p2:function(L,z){return L*L*z},b2:function(o,N,V,J){return this.b2p0(o,N)+this.b2p1(o,V)+this.b2p2(o,J)},b3p0:function(L,X){var T=1-L;return T*T*T*X},b3p1:function(e,b){var u=1-e;return 3*u*u*e*b},b3p2:function(l,i){var W=1-l;return 3*W*l*l*i},b3p3:function(Q,Z){return Q*Q*Q*Z},b3:function(b,v,r,S,X){return this.b3p0(b,v)+this.b3p1(b,r)+this.b3p2(b,S)+this.b3p3(b,X)}},Bo={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(B){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(T){var e=T.familyName.toLowerCase(),u=this;return u.faces[e]=u.faces[e]||{},u.faces[e][T.cssFontWeight]=u.faces[e][T.cssFontWeight]||{},u.faces[e][T.cssFontWeight][T.cssFontStyle]=T,u.faces[e][T.cssFontWeight][T.cssFontStyle]=T,T},drawText:function(Y){var D,t=this.getFace(),h=this.size/t.resolution,r=0,K=String(Y).split(""),_=K.length,x=[];for(D=0;_>D;D++){var F=new Tl,s=this.extractGlyphPoints(K[D],t,h,r,F);r+=s.offset,x.push(s.path)}var I=r/2;return{paths:x,offset:I}},extractGlyphPoints:function(u,g,w,d,s){var W,G,h,k,z,v,x,e,T,Q,o,X,j,S,A,q,C,r,U,M=[],t=g.glyphs[u]||g.glyphs["?"];if(t){if(t.o)for(k=t._cachedOutline||(t._cachedOutline=t.o.split(" ")),v=k.length,x=w,e=w,W=0;v>W;)switch(z=k[W++]){case"m":T=k[W++]*x+d,Q=k[W++]*e,s.moveTo(T,Q);break;case"l":T=k[W++]*x+d,Q=k[W++]*e,s.lineTo(T,Q);break;case"q":if(o=k[W++]*x+d,X=k[W++]*e,A=k[W++]*x+d,q=k[W++]*e,s.quadraticCurveTo(A,q,o,X),U=M[M.length-1])for(j=U.x,S=U.y,G=1,h=this.divisions;h>=G;G++){var $=G/h;Wn.b2($,j,A,o),Wn.b2($,S,q,X)}break;case"b":if(o=k[W++]*x+d,X=k[W++]*e,A=k[W++]*x+d,q=k[W++]*e,C=k[W++]*x+d,r=k[W++]*e,s.bezierCurveTo(A,q,C,r,o,X),U=M[M.length-1])for(j=U.x,S=U.y,G=1,h=this.divisions;h>=G;G++){var $=G/h;Wn.b3($,j,A,C,o),Wn.b3($,S,q,r,X)}}return{offset:t.ha*w,path:s}}}};Bo.generateShapes=function(v,y){y=y||{};var Y=y.size!==d?y.size:100,D=y.curveSegments!==d?y.curveSegments:4,R=y.font!==d?y.font:"helvetiker",$=y.weight!==d?y.weight:"normal",w=y.style!==d?y.style:"normal";Bo.size=Y,Bo.divisions=D,Bo.face=R,Bo.weight=$,Bo.style=w;for(var I=Bo.drawText(v),q=I.paths,e=[],J=0,b=q.length;b>J;J++)Array.prototype.push.apply(e,q[J].toShapes());return e},function(r){var u=1e-10,D=function(b,P){var t=b.length;if(3>t)return null;var r,z,A,J=[],o=[],h=[];if(c(b)>0)for(z=0;t>z;z++)o[z]=z;else for(z=0;t>z;z++)o[z]=t-1-z;var E=t,K=2*E;for(z=E-1;E>2;){if(K--<=0)return P?h:J;if(r=z,r>=E&&(r=0),z=r+1,z>=E&&(z=0),A=z+1,A>=E&&(A=0),d(b,r,z,A,E,o)){var C,G,Y,B,D;for(C=o[r],G=o[z],Y=o[A],J.push([b[C],b[G],b[Y]]),h.push([o[r],o[z],o[A]]),B=z,D=z+1;E>D;B++,D++)o[B]=o[D];E--,K=2*E}}return P?h:J},c=function(l){for(var i=l.length,C=0,H=i-1,q=0;i>q;H=q++)C+=l[H].x*l[q].y-l[q].x*l[H].y;return.5*C},d=function(d,V,l,e,U,P){var k,J,W,X,h,H,b,n,o;if(J=d[P[V]].x,W=d[P[V]].y,X=d[P[l]].x,h=d[P[l]].y,H=d[P[e]].x,b=d[P[e]].y,u>(X-J)*(b-W)-(h-W)*(H-J))return!1;var w,F,t,x,K,Q,g,S,r,B,z,A,O,D,q;for(w=H-X,F=b-h,t=J-H,x=W-b,K=X-J,Q=h-W,k=0;U>k;k++)if(n=d[P[k]].x,o=d[P[k]].y,!(n===J&&o===W||n===X&&o===h||n===H&&o===b)&&(g=n-J,S=o-W,r=n-X,B=o-h,z=n-H,A=o-b,q=w*B-F*r,O=K*S-Q*g,D=t*A-x*z,q>=-u&&D>=-u&&O>=-u))return!1;return!0};return r.Triangulate=D,r.Triangulate.area=c,r}(Bo),G._typeface_js={faces:Bo.faces,loadFace:Bo.loadFace};var dl=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},hq=dl.prototype={constructor:dl,computeFaceNormals:function(){for(var l=new xo,y=new xo,h=0,N=this.faces.length;N>h;h++){var M=this.faces[h],C=this.vertices[M.a],z=this.vertices[M.b],$=this.vertices[M.c];l.subVectors($,z),y.subVectors(C,z),l.cross(y),l.normalize(),M.normal.copy(l)}},computeVertexNormals:function(X){var B,o,$,p,q,y;for(y=new Array(this.vertices.length),B=0,o=this.vertices.length;o>B;B++)y[B]=new xo;if(X){var L,D,H,b=new xo,O=new xo;for($=0,p=this.faces.length;p>$;$++)q=this.faces[$],L=this.vertices[q.a],D=this.vertices[q.b],H=this.vertices[q.c],b.subVectors(H,D),O.subVectors(L,D),b.cross(O),y[q.a].add(b),y[q.b].add(b),y[q.c].add(b)}else for($=0,p=this.faces.length;p>$;$++)q=this.faces[$],y[q.a].add(q.normal),y[q.b].add(q.normal),y[q.c].add(q.normal);for(B=0,o=this.vertices.length;o>B;B++)y[B].normalize();for($=0,p=this.faces.length;p>$;$++)q=this.faces[$],q.vertexNormals[0]=y[q.a].clone(),q.vertexNormals[1]=y[q.b].clone(),q.vertexNormals[2]=y[q.c].clone()},mergeVertices:function(){var u,K,F,z,g,l,_,b,B={},G=[],H=[],i=4,t=D(10,i);for(F=0,z=this.vertices.length;z>F;F++)u=this.vertices[F],K=r(u.x*t)+"_"+r(u.y*t)+"_"+r(u.z*t),B[K]===d?(B[K]=F,G.push(this.vertices[F]),H[F]=G.length-1):H[F]=H[B[K]];var p=[];for(F=0,z=this.faces.length;z>F;F++){g=this.faces[F],g.a=H[g.a],g.b=H[g.b],g.c=H[g.c],l=[g.a,g.b,g.c];for(var y=0;3>y;y++)if(l[y]==l[(y+1)%3]){p.push(F);break}}for(F=p.length-1;F>=0;F--){var n=p[F];for(this.faces.splice(n,1),_=0,b=this.faceVertexUvs.length;b>_;_++)this.faceVertexUvs[_].splice(n,1)}var Y=this.vertices.length-G.length;return this.vertices=G,Y}},rs=function(u,M,Y,Z,n,X,N){this.aX=u,this.aY=M,this.xRadius=Y,this.yRadius=Z,this.aStartAngle=n,this.aEndAngle=X,this.aClockwise=N};rs.prototype=cm(Xr),rs.prototype.getPoint=function(z){var n,E=this.aEndAngle-this.aStartAngle;0>E&&(E+=N),E>N&&(E-=N),n=this.aClockwise===!0?this.aEndAngle+(1-z)*(N-E):this.aStartAngle+z*E;var F=this.aX+this.xRadius*U(n),h=this.aY+this.yRadius*m(n);return new Dr(F,h)};var Bd=function(e,H){this.v1=e,this.v2=H},$c=Bd.prototype=cm(Xr);$c.getPoint=function(q){var N=this.v2.clone().sub(this.v1);return N.multiplyScalar(q).add(this.v1),N},$c.getPointAt=function(t){return this.getPoint(t)},$c.getTangent=function(){var x=this.v2.clone().sub(this.v1);return x.normalize()};var Oq=function(o,W,K){this.v0=o,this.v1=W,this.v2=K};Oq.prototype=cm(Xr),Oq.prototype.getPoint=function(J){var y,g;return y=Wn.b2(J,this.v0.x,this.v1.x,this.v2.x),g=Wn.b2(J,this.v0.y,this.v1.y,this.v2.y),new Dr(y,g)};var Re=function(X,G,E,D){this.v0=X,this.v1=G,this.v2=E,this.v3=D};Re.prototype=cm(Xr),Re.prototype.getPoint=function(A){var B,L;return B=Wn.b3(A,this.v0.x,this.v1.x,this.v2.x,this.v3.x),L=Wn.b3(A,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Dr(B,L)},Cg.create(function(d,b){this.v1=d,this.v2=b},function(H){var $=new xo;return $.subVectors(this.v2,this.v1),$.multiplyScalar(H),$.add(this.v1),$});var Ik=Cg.create(function(y,R,$){this.v0=y,this.v1=R,this.v2=$},function(P){var Z,w,B;return Z=Wn.b2(P,this.v0.x,this.v1.x,this.v2.x),w=Wn.b2(P,this.v0.y,this.v1.y,this.v2.y),B=Wn.b2(P,this.v0.z,this.v1.z,this.v2.z),new xo(Z,w,B)}),cc=Cg.create(function(O,K,G,n){this.v0=O,this.v1=K,this.v2=G,this.v3=n},function(x){var r,M,m;return r=Wn.b3(x,this.v0.x,this.v1.x,this.v2.x,this.v3.x),M=Wn.b3(x,this.v0.y,this.v1.y,this.v2.y,this.v3.y),m=Wn.b3(x,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new xo(r,M,m)}),gj=function(c,p,P,M,Z,g,I,i){dl.call(this),M=M!==d?M:.5,Z=Z!==d?Z:.5,i=i!==d?i:1,c=c||8,g=g||0,I=I||N;var k,O,f=1,j=i/2,F=[],G=[],A=this.vertices,C=this.faces,z=this.faceVertexUvs;for(O=0;f>=O;O++){var x=[],t=[],Y=O/f,n=Y*(Z-M)+M;for(k=0;c>=k;k++){var w=k/c,L=new xo,H=-(w*I+g);L.z=n*m(H),L.y=-Y*i+j,L.x=n*U(H),A.push(L),x.push(A.length-1),t.push(new Dr(w,Y))}F.push(x),G.push(t)}var b,V,e=(Z-M)/i;for(k=0;c>k;k++)for(0!==M?(b=A[F[0][k]].clone(),V=A[F[0][k+1]].clone()):(b=A[F[1][k]].clone(),V=A[F[1][k+1]].clone()),b.setY(s(b.x*b.x+b.z*b.z)*e).normalize(),V.setY(s(V.x*V.x+V.z*V.z)*e).normalize(),O=0;f>O;O++){var D=F[O][k],Q=F[O+1][k],X=F[O+1][k+1],W=F[O][k+1],S=b.clone(),o=b.clone(),a=V.clone(),u=V.clone(),q=G[O][k].clone(),l=G[O+1][k].clone(),B=G[O+1][k+1].clone(),h=G[O][k+1].clone();C.push(new Mq(D,Q,W,[S,o,u])),z[0].push([q,l,h]),C.push(new Mq(Q,X,W,[o.clone(),a,u.clone()])),z[0].push([l.clone(),B,h.clone()])}if(p&&M>0)for(this.vertices.push(new xo(0,j,0)),k=0;c>k;k++){var D=F[0][k],Q=F[0][k+1],X=this.vertices.length-1,S=new xo(0,1,0),o=new xo(0,1,0),a=new xo(0,1,0),q=G[0][k].clone(),l=G[0][k+1].clone(),B=new Dr(l.x,0);C.push(new Mq(D,Q,X,[S,o,a],null,1));var K=k/c*N,R=U(K),$=m(K),E=(k+1)/c*N,r=U(E),y=m(E);z[0].push([new Dr(.5+.5*R,.5+.5*$),new Dr(.5+.5*r,.5+.5*y),new Dr(.5,.5)])}if(P&&Z>0)for(this.vertices.push(new xo(0,-j,0)),k=0;c>k;k++){var D=F[O][k+1],Q=F[O][k],X=A.length-1,S=new xo(0,-1,0),o=new xo(0,-1,0),a=new xo(0,-1,0),q=G[O][k+1].clone(),l=G[O][k].clone();C.push(new Mq(D,Q,X,[S,o,a],null,2));var K=k/c*N,R=U(K),$=m(K),E=(k+1)/c*N,r=U(E),y=m(E);z[0].push([new Dr(.5+.5*r,.5-.5*y),new Dr(.5+.5*R,.5-.5*$),new Dr(.5,.5)])}};gj.prototype=cm(hq);var Br=function(c,o,l,u,V,S,F){dl.call(this),F=F||.5,c=c||16,o=o||16,l=(l!==d?l:0)-n,u=u!==d?u:N,V=V!==d?V:0,S=S!==d?S:n;var Z,g,r=[],f=[],P=this.vertices,k=this.faces,a=this.faceVertexUvs;for(g=0;o>=g;g++){var J=[],y=[];for(Z=0;c>=Z;Z++){var I=Z/c,A=g/o,G=new xo;G.x=-F*U(l+I*u)*m(V+A*S),G.y=F*U(V+A*S),G.z=F*m(l+I*u)*m(V+A*S),P.push(G),J.push(P.length-1),y.push(new Dr(I,A))}r.push(J),f.push(y)}for(g=0;o>g;g++)for(Z=0;c>Z;Z++){var e=r[g][Z+1],K=r[g][Z],L=r[g+1][Z],b=r[g+1][Z+1],C=P[e].clone().normalize(),D=P[K].clone().normalize(),H=P[L].clone().normalize(),p=P[b].clone().normalize(),T=f[g][Z+1].clone(),Q=f[g][Z].clone(),Y=f[g+1][Z].clone(),M=f[g+1][Z+1].clone();O(P[e].y)===F?(T.x=(T.x+Q.x)/2,k.push(new Mq(e,L,b,[C,H,p])),a[0].push([T,Y,M])):O(P[L].y)===F?(Y.x=(Y.x+M.x)/2,k.push(new Mq(e,K,L,[C,D,H])),a[0].push([T,Q,Y])):(k.push(new Mq(e,K,b,[C,D,p])),a[0].push([T,Q,M]),k.push(new Mq(K,L,b,[D.clone(),H,p.clone()])),a[0].push([Q.clone(),Y,M.clone()]))}};Br.prototype=cm(hq);var ed=function(M,D,A,t,E,b){dl.call(this),M=M||.33,D=D||.17,t=t||8,A=A||6,E=E||0,b=b||N;for(var X=new xo,u=[],s=[],J=0;t>=J;J++)for(var l=J/t*N+n,y=0;A>=y;y++){var S=y/A*b+E;X.x=M*U(S),X.z=-M*m(S);var K=new xo,q=M+D*U(l);K.x=q*U(S),K.z=-q*m(S),K.y=D*m(l),this.vertices.push(K),u.push(new Dr(y/A,1-J/t)),s.push(K.clone().sub(X).normalize())}for(var J=1;t>=J;J++)for(var y=1;A>=y;y++){var V=(A+1)*J+y-1,x=(A+1)*(J-1)+y-1,Q=(A+1)*(J-1)+y,p=(A+1)*J+y,Z=new Mq(V,x,p,[s[V].clone(),s[x].clone(),s[p].clone()]);this.faces.push(Z),this.faceVertexUvs[0].push([u[V].clone(),u[x].clone(),u[p].clone()]),Z=new Mq(x,Q,p,[s[x].clone(),s[Q].clone(),s[p].clone()]),this.faces.push(Z),this.faceVertexUvs[0].push([u[x].clone(),u[Q].clone(),u[p].clone()])}this.computeFaceNormals()};ed.prototype=cm(hq);var to=function(M,p,T){return M?(dl.call(this),M=M instanceof Array?M:[M],this.addShapeList(M,p),Jo(this,T),this.computeFaceNormals(),void 0):(M=[],void 0)},Em=to.prototype=cm(dl.prototype);Em.addShapeList=function(y,c){for(var z=y.length,L=0;z>L;L++){var U=y[L];this.addShape(U,c)}},Em.addShape=function(_,q){function t(){if(q.bottom)for(var r=0;l>r;r++)e=M[r],k(e[2],e[1],e[0],!0);if(q.top)for(r=0;l>r;r++)e=M[r],k(e[0]+b*L,e[1]+b*L,e[2]+b*L,!1)}function A(){var k=0;for(O(j,k),k+=j.length,u=0,m=N.length;m>u;u++)U=N[u],O(U,k),k+=U.length}function O(H,c){for(var T,J,C=H.length;--C>=0;){T=C,J=C-1,0>J&&(J=H.length-1);var Y=0,z=L;for(Y=0;z>Y;Y++){var B=b*Y,V=b*(Y+1),K=c+T+B,x=c+J+B,k=c+J+V,v=c+T+V;o(K,x,k,v,H,Y,z,T,J)}}}function X(x,$,B){p.vertices.push(new xo(x,$,B))}function k(Q,S,t,z){Q+=v,S+=v,t+=v,p.faces.push(new Mq(Q,S,t,null,null,z?2:1));var a=z?h.generateBottomUV(p,_,q,Q,S,t):h.generateTopUV(p,_,q,Q,S,t);p.faceVertexUvs[0].push(a)}function o(J,x,S,P,N,H,r,s,O){J+=v,x+=v,S+=v,P+=v,p.faces.push(new Mq(J,x,P)),p.faces.push(new Mq(x,S,P));var c=h.generateSideWallUV(p,_,N,q,J,x,S,P,H,r,s,O);p.faceVertexUvs[0].push([c[0],c[1],c[3]]),p.faceVertexUvs[0].push([c[1],c[2],c[3]])}var n,z,f,V,W,s=q.amount,C=q.curveSegments||Oe,L=q.steps||1,Z=q.extrudePath,K=!1,h=new so(q.repeatUVLength);Z&&(n=Z.getSpacedPoints(L),K=!0,z=q.frames!==d?q.frames:new cq.FrenetFrames(Z,L,!1),f=new xo,V=new xo,W=new xo);var U,u,m,p=this,v=this.vertices.length,S=_.extractPoints(C),R=S.shape,N=S.holes,I=!Wn.isClockWise(R);if(I){for(R=R.reverse(),u=0,m=N.length;m>u;u++)U=N[u],Wn.isClockWise(U)&&(N[u]=U.reverse());I=!1}var M=Wn.triangulateShape(R,N),j=R;for(u=0,m=N.length;m>u;u++)U=N[u],R=R.concat(U);for(var B,e,b=R.length,l=M.length,w=0;b>w;w++)B=R[w],K?(V.copy(z.normals[0]).multiplyScalar(B.x),f.copy(z.binormals[0]).multiplyScalar(B.y),W.copy(n[0]).add(V).add(f),X(W.x,W.y,W.z)):X(B.x,B.y,0);var T;for(T=1;L>=T;T++)for(w=0;b>w;w++)B=R[w],K?(V.copy(z.normals[T]).multiplyScalar(B.x),f.copy(z.binormals[T]).multiplyScalar(B.y),W.copy(n[T]).add(V).add(f),X(W.x,W.y,W.z)):X(B.x,B.y,s/L*T);t(),A()};var cq=function(e,Z,q,h,S){function s(L,m,V){return J.vertices.push(new xo(L,m,V))-1}dl.call(this),Z=Z||64,q=q||1,h=h||8,S=S||!1;var f,w,A,C,L,d,j,V,i,X,l,x,v,T,P,F,t,W,O,G,M=[],J=this,g=Z+1,r=new xo,p=new cq.FrenetFrames(e,Z,S),n=p.tangents,Y=p.normals,Q=p.binormals;for(this.tangents=n,this.normals=Y,this.binormals=Q,i=0;g>i;i++)for(M[i]=[],C=i/(g-1),V=e.getPointAt(C),f=n[i],w=Y[i],A=Q[i],X=0;h>X;X++)L=X/h*N,d=-q*U(L),j=q*m(L),r.copy(V),r.x+=d*w.x+j*A.x,r.y+=d*w.y+j*A.y,r.z+=d*w.z+j*A.z,M[i][X]=s(r.x,r.y,r.z);for(i=0;Z>i;i++)for(X=0;h>X;X++)l=S?(i+1)%Z:i+1,x=(X+1)%h,v=M[i][X],T=M[l][X],P=M[l][x],F=M[i][x],t=new Dr(i/Z,X/h),W=new Dr((i+1)/Z,X/h),O=new Dr((i+1)/Z,(X+1)/h),G=new Dr(i/Z,(X+1)/h),this.faces.push(new Mq(v,T,F)),this.faceVertexUvs[0].push([t,W,G]),this.faces.push(new Mq(T,P,F)),this.faceVertexUvs[0].push([W.clone(),O,G.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};cq.prototype=cm(hq),cq.FrenetFrames=function(t,A,V){function W(){q[0]=new xo,L[0]=new xo,s=Number.MAX_VALUE,o=O(z[0].x),X=O(z[0].y),Q=O(z[0].z),s>=o&&(s=o,S.set(1,0,0)),s>=X&&(s=X,S.set(0,1,0)),s>=Q&&S.set(0,0,1),b.crossVectors(z[0],S).normalize(),q[0].crossVectors(z[0],b),L[0].crossVectors(z[0],q[0])}var w,s,o,X,Q,m,d,S=new xo,z=[],q=[],L=[],b=new xo,f=new In,_=A+1,e=1e-4;for(this.tangents=z,this.normals=q,this.binormals=L,m=0;_>m;m++)d=m/(_-1),z[m]=t.getTangentAt(d),z[m].normalize();for(W(),m=1;_>m;m++)q[m]=q[m-1].clone(),L[m]=L[m-1].clone(),b.crossVectors(z[m-1],z[m]),b.length()>e&&(b.normalize(),w=R(mm(z[m-1].dot(z[m]),-1,1)),q[m].applyMatrix4(f.makeRotationAxis(b,w))),L[m].crossVectors(z[m],q[m]);if(V)for(w=R(mm(q[0].dot(q[_-1]),-1,1)),w/=_-1,z[0].dot(b.crossVectors(q[0],q[_-1]))>0&&(w=-w),m=1;_>m;m++)q[m].applyMatrix4(f.makeRotationAxis(z[m],w*m)),L[m].crossVectors(z[m],q[m])};var Yf=function(r,$,y,Y){dl.call(this),$=$||18,y=y||0,Y=Y==A?N:Y;for(var J=1/(r.length-1),j=1/$,Q=0,_=$;_>=Q;Q++)for(var Z=y+Q*j*Y,b=U(Z),K=m(Z),n=0,g=r.length;g>n;n++){var W=r[n],l=new xo;l.x=b*W.x-K*W.y,l.y=K*W.x+b*W.y,l.z=W.z,this.vertices.push(l)}for(var h=r.length,Q=0,_=$;_>Q;Q++)for(var n=0,g=r.length-1;g>n;n++){var s=n+h*Q,C=s,p=s+h,b=s+1+h,q=s+1,d=Q*j,R=n*J,o=d+j,O=R+J;this.faces.push(new Mq(C,q,p)),this.faceVertexUvs[0].push([new Dr(d,R),new Dr(d,O),new Dr(o,R)]),this.faces.push(new Mq(p,q,b)),this.faceVertexUvs[0].push([new Dr(o,R),new Dr(d,O),new Dr(o,O)])}this.mergeVertices(),Jo(this),this.computeFaceNormals(),this.computeVertexNormals()};Yf.prototype=cm(hq);var rr=function(T,L){L=L||{};var H=Bo.generateShapes(T,L);L.amount=L.height!==d?L.height:50,to.call(this,H,L)};rr.prototype=cm(Em);var Je=L.Node=function(){xi(Je,this)},Qk={X:$p,Y:Kp,Z:os},zj={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Ag="xzy",Th=function(a,V,h){if(V){var K=V[0],r=V[1],X=V[2];"xzy"===h?(Kp(a,r),os(a,X),$p(a,K)):"xyz"===h?(os(a,X),Kp(a,r),$p(a,K)):"yxz"===h?(os(a,X),$p(a,K),Kp(a,r)):"yzx"===h?($p(a,K),os(a,X),Kp(a,r)):"zxy"===h?(Kp(a,r),$p(a,K),os(a,X)):"zyx"===h?($p(a,K),Kp(a,r),os(a,X)):(Kp(a,r),os(a,X),$p(a,K))}};Oj("Node",rn,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:Ag,_64O:0,_rotationX:0,_53O:0,_host:A,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return id},_22Q:function(){return Ui},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(y,V){le(y,Ld(A,A,this.r3(),this.getRotationMode())),this.translate3d(y[0]*V,y[1]*V,y[2]*V)},translateFront:function(n){this.translate3dBy([0,0,1],n)},translateBack:function(_){this.translate3dBy([0,0,-1],_)},translateLeft:function(w){this.translate3dBy([-1,0,0],w)},translateRight:function(Y){this.translate3dBy([1,0,0],Y)},translateTop:function(_){this.translate3dBy([0,1,0],_)},translateBottom:function(D){this.translate3dBy([0,-1,0],D)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(o,Q,x){1===arguments.length&&(Q=o[1],x=o[2],o=o[0]),this.p(o,x),this.setElevation(Q)},translate3d:function(p,B,m){1===arguments.length&&(B=p[1],m=p[2],p=p[0]),this.translate(p,m),this.setElevation(this._54O+B)
},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(z,O,D){1===arguments.length&&(O=z[1],D=z[2],z=z[0]),this.setSize(z,D),this.setTall(O)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(C,_,k){1===arguments.length&&(_=C[1],k=C[2],C=C[0]),this.setRotationX(C),this.setRotation(-_),this.setRotationZ(k)},setRotationY:function($){this.setRotation(-$)},getRotationY:function(){return-this._64O},lookAt:function(B,i){i=i||Li;var v=this,F=jf(B,v.p3()),y=Qd(F);i===Li?(v.r3([-h(F[1]/y),-_(F[2],F[0])+p,0]),v.setRotationMode("xzy")):i===Tg?(v.r3(0,-_(F[2],F[0]),h(F[1]/y)),v.setRotationMode("zyx")):i===yi?(v.r3(0,-_(F[2],F[0])+n,-h(F[1]/y)),v.setRotationMode("zyx")):i===Fe?(v.r3([-h(F[1]/y)+p,-_(F[2],F[0])+p,0]),v.setRotationMode("xzy")):i===Fd&&(v.r3([-h(F[1]/y)-p,-_(F[2],F[0])+p,0]),v.setRotationMode("xzy")),i===Cn&&(v.r3([-h(F[1]/y)+n,-_(F[2],F[0])+p,n]),v.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(T){var R=this;if(R!==T&&R._host!==T){var J=R._host;J&&J._removeAttach(R),R._host=T,R._host&&R._host._addAttach(R),R.fp("host",J,T),R.onHostChanged(J,T)}},getAttaches:function(){return this._69O},_addAttach:function(o){var t=this;t._69O||(t._69O=new xm),t._69O.add(o),t.fp("attaches",A,o)},_removeAttach:function(y){var T=this;T._69O.remove(y),T._69O.isEmpty()&&delete T._69O,T.fp("attaches",y,A)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(l){var s=this;s._44I||(s._44I=new xm),s._42I||(s._42I=new xm),s._44I.add(l),s._42I.add(l),s._20I()},_4I:function(X){var L=this;L._44I||(L._44I=new xm),L._43I||(L._43I=new xm),L._44I.add(X),L._43I.add(X),L._20I()},_16I:function(G){var P=this;P._44I.remove(G),P._42I.remove(G),P._44I.isEmpty()&&delete P._44I,P._42I.isEmpty()&&delete P._42I,P._20I()},_18I:function(S){var I=this;I._44I.remove(S),I._43I.remove(S),I._44I.isEmpty()&&delete I._44I,I._43I.isEmpty()&&delete I._43I,I._20I()},_20I:function(){var b=this;if(delete b._45I,!b._44I||b._44I.isEmpty())return delete b._70O,void 0;var N;b._44I.each(function(I){I.isLooped()&&(N||(N={}),N[I._id]||(b._45I||(b._45I=new xm),b._45I.add(I),N[I._id]=I))}),N?(b._70O=new xm,b._44I.each(function(Y){N[Y._id]?"A"===N[Y._id]||(N[Y._id]="A",b._70O.add(Y)):b._70O.add(Y)})):b._70O=b._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(U){var y=this;y._46I||(y._46I=new xm),y._48I||(y._48I=new xm),y._46I.add(U),y._48I.add(U),y._19I()},_3I:function(r){var D=this;D._47I||(D._47I=new xm),D._48I||(D._48I=new xm),D._47I.add(r),D._48I.add(r),D._19I()},_15I:function(v){var w=this;w._46I.remove(v),w._48I.remove(v),w._46I.isEmpty()&&delete w._46I,w._48I.isEmpty()&&delete w._48I,w._19I()},_17I:function(V){var O=this;O._47I.remove(V),O._48I.remove(V),O._47I.isEmpty()&&delete O._47I,O._48I.isEmpty()&&delete O._48I,O._19I()},_19I:function(){var z=this;delete z._49I;var x=z._48I;if(x&&!x.isEmpty()){var l={};x.each(function(T){l[T._id]?z._49I||(z._49I=new xm):l[T._id]=T}),z._49I?x.each(function(Q){l[Q._id]&&(z._49I.add(Q),delete l[Q._id])}):z._49I=x}},getImage:function(){return this._image},setImage:function(j){var Q=this,V=Q._image,x=Q.getWidth(),N=Q.getHeight();Q._image=j,Q.fp("image",V,j),Q.fp(Ql,x,Q.getWidth()),Q.fp(Hh,N,Q.getHeight())},getElevation:function(){return this._54O},setElevation:function(v){var j=this;if(!j._50O){j._50O=1;var b=j._54O;j._54O=v,j.fp(zh,b,v),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(B){var w=this;if(!w._49O){w._49O=1;var i=w._64O;w._64O=B,w.fp($q,i,B),delete w._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(L){var g=this;if(!g._51O){g._51O=1;var O=g._rotationX;g._rotationX=L,g.fp("rotationX",O,L),delete g._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(z){var T=this;if(!T._52O){T._52O=1;var A=T._53O;T._53O=z,T.fp("rotationZ",A,z),delete T._52O}},getPosition:function(){return this._position},setPosition:function(X,C){var Q=this;if(!Q._50I){Q._50I=1;var A;if(A=2===arguments.length?{x:X,y:C}:X,A.x!==Q._position.x||A.y!==Q._position.y){var u=Q._position;Q._position=A,Q.fp(Ig,u,A)}delete Q._50I}},translate:function(R,A){var Y=this._position;this.p(Y.x+R,Y.y+A)},getWidth:function(){var t=this;if(t._width>=0)return t._width;var U=Vd(t._image);return U?zm(U,t):20},setWidth:function(T){var z=this,r=z._width;z._width=T,z.fp(Ql,r,T)},getHeight:function(){var M=this;if(M._height>=0)return M._height;var w=Vd(M._image);return w?Tr(w,M):20},setHeight:function(r){var D=this,C=D._height;D._height=r,D.fp(Hh,C,r)},setSize:function(i,H){var z=this;2===arguments.length?(z.setWidth(i),z.setHeight(H)):(z.setWidth(i.width),z.setHeight(i.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(R,F,f,D){var y=this;1===arguments.length?(y.p(R.x+R.width/2,R.y+R.height/2),y.setWidth(R.width),y.setHeight(R.height)):(y.p(R+f/2,F+D/2),y.setWidth(f),y.setHeight(D))},getRect:function(){var U=this,F=U.getWidth(),v=U.getHeight();return go({x:U._position.x-F/2,y:U._position.y-v/2,width:F,height:v},U._64O)},getCorners:function(h,E){h==A&&(h=0),E==A&&(E=h);var j=this,a=j._position,G=j.getWidth()/2+h,S=j.getHeight()/2+E,J=new sj(j._64O,a.x,a.y);return[J.tf(-G,-S),J.tf(G,-S),J.tf(G,S),J.tf(-G,S)]},rotateAt:function(o,S,y){var z=this,x=z._position,G=z._64O,k=new sj(G,x.x,x.y).tf(o,S),f=s(o*o+S*S),d=_(x.y-k.y,x.x-k.x)+y;z.setRotation(G+y),z.p(k.x+f*U(d),k.y+f*m(d))},onParentChanged:function(){Je.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(O){O._7I()})},onPropertyChanged:function(x){var w=this;Je.superClass.onPropertyChanged.call(w,x),w._69O&&w._69O.each(function(g){g.handleHostPropertyChange(x)}),w._49I&&w._49I.each(function(L){L.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(W){this.updateAttach(W)},onStyleChanged:function(f){Je.superClass.onStyleChanged.apply(this,arguments),te[f]&&this.updateAttach()},updateAttach:function(N){var n=this;n._51I||Xg||(n._51I=1,n._71O(N),delete n._51I)},_71O:function(z){var L,n,r,w,t,P,Q=this,B=Q._host,u=z?z.property:A,e=z?z.oldValue:A,h=z?z.newValue:A;if(B instanceof je){if(u===zh)Q.setElevation(Q._54O+h-e);else if(!z||un[u]){if(L=Q.s("attach.row.index"),n=Q.s("attach.column.index"),r=B.getCellRect(L,n),!r)return;w=Q.s("attach.row.span"),t=Q.s("attach.column.span"),(1!==w||1!==t)&&(r=Yi(r,B.getCellRect(L+w-1,n+t-1))),Yg(r,Q,"attach.padding",1),Q.setRect(r)}}else if(B instanceof be&&(P=Q.s("attach.index"))>=0&&(!z||an[u])){var F=Q.s("attach.thickness");F!=A&&Q.setHeight(B.getThickness()*F);var V=Q.s("attach.offset"),I=B.getPoints(),E=I.size();if(E>P){var T=I.get(P),o=E===P+1?I.get(0):I.get(P+1),U=[o.x-T.x,o.y-T.y],x=Qd(U);if(x){Q.s("attach.offset.relative")&&(V*=x),Q.s("attach.offset.opposite")&&(V=x-V);var X={x:T.x+U[0]/x*V,y:T.y+U[1]/x*V},H=Q.s("attach.gap");H&&(Q.s("attach.gap.relative")&&(H*=B.getThickness()),X=Rn(A,X,o,H)),Q.p(X),Q.setRotation(_(U[1],U[0]))}}}else z&&(u===Ig?Q.translate(h.x-e.x,h.y-e.y):u===zh?Q.setElevation(Q._54O+h-e):Dd[u]&&Q._11Q(B,u,h-e))},_11Q:function(b,d,P){var i=this,$=b.p3(),Z=jf(i.p3(),$),Y=tj(),u=zj[i.getRotationMode()],w=u[0],H=u[1],V=u[2],j=Qk[w],g=Qk[H],B=Qk[V];d===$q&&(d="rotationY",P=-P),d===$q+w?(B(Y,b[Kf+V]()),g(Y,b[Kf+H]()),j(Y,P),g(Y,-b[Kf+H]()),B(Y,-b[Kf+V]()),i[Ol+w](i[Kf+w]()+P)):d===$q+H?(B(Y,b[Kf+V]()),g(Y,P),B(Y,-b[Kf+V]()),i[Ol+H](i[Kf+H]()+P)):d===$q+V&&(B(Y,P),i[Ol+V](i[Kf+V]()+P)),le(Z,Y),i.p3($[0]+Z[0],$[1]+Z[1],$[2]+Z[2])},isHostOn:function(R){var m=this;if(m._host&&R&&R._69O)for(var s={},K=m._host;K&&K!==m&&!s[K._id];){if(K===R)return!0;s[K._id]=K,K=K._host}return!1},isLoopedHostOn:function(U){return this.isHostOn(U)&&U.isHostOn(this)},getSerializableProperties:function(){var A=Je.superClass.getSerializableProperties.call(this);return tq(A,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),A}});var Dj=L.Edge=function(c,o){var R=this;xi(Dj,R),R.setSource(c),R.setTarget(o)};Oj("Edge",rn,{_icon:"edge_icon",getUIClass:function(){return _d},_22Q:function(){return hf},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(X){var T=this;if(T._source!==X){var p=T._source;T._source=X,p&&p._16I(T),X&&X._2I(T),T._7I(),T.fp("source",p,X)}},setTarget:function(c){var m=this;if(m._target!==c){var g=m._target;m._target=c,g&&g._18I(m),c&&c._4I(m),m._7I(),m.fp("target",g,c)}},isLooped:function(){var P=this;return P._source===P._target&&!!P._source&&!!P._target},_7I:function(){var C,G=this,t=Vb(G);G._40I!==t&&(C=this._40I,C&&C._15I(G),G._40I=t,t&&t._1I(G),G.fp("sourceAgent",C,t),Me(C,G._41I),Me(t,G._41I));var q=Qn(G);G._41I!==q&&(C=G._41I,C&&C._17I(G),G._41I=q,q&&q._3I(G),G.fp("targetAgent",C,q),Me(C,G._40I),Me(q,G._40I))},_22I:function(k){this._52I=k,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var T=this;return T._52I&&T._52I.get(0)!==T&&!T.getStyle(kr)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var g=this,K=g._52I;return K&&!g.getStyle(kr)&&K.size()>1&&g===K.get(0)},toggle:function(){var u=this._52I,F=!this.s(kr);u&&u.size()>1&&(u.each(function(d){d.s(kr,F)}),u.getSiblings().each(function(n){n!==u&&n.each(function(Z){Z.fp("edgeGroup",A,n)})}))},setStyle:function(N,g){(N===vq||"edge.segments"===N)&&(g=Hn(g)),Dj.superClass.setStyle.call(this,N,g)},onStyleChanged:function(e){Dj.superClass.onStyleChanged.apply(this,arguments),ee[e]&&Me(this._41I,this._40I)},getSerializableProperties:function(){var g=Dj.superClass.getSerializableProperties.call(this);return tq(g,{source:1,target:1}),g}});var Tn=L.Group=function(){xi(Tn,this)};Oj("Group",Je,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Dl},onChildAdded:function(){Tn.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){Tn.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var D=this;if(!D._54I&&!Xg){var U=D.getChildrenRect();U&&(D._53I=1,D.p(wb(D.s("group.position"),U,D.getSize())),delete D._53I)}},getChildrenRect:function(){var r,G=this;return G.eachChild(function(Q){r=Yi(r,G.getChildRect(Q))}),r},getChildRect:function(m){var L;return vj(m)&&m.s(ic)&&(vs(m)&&m.isExpanded()&&m.eachChild(function(B){L=Yi(L,m.getChildRect(B))}),!L&&m.getRect&&(L=m.getRect())),L},setPosition:function(i,t){var W=this;if(!W._54I){var o;o=2===arguments.length?{x:i,y:t}:i,Xg||W._53I||(W._54I=1,He(W._children,o.x-W._position.x,o.y-W._position.y),delete W._54I),Tn.superClass.setPosition.call(this,o)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(O){var k=this;if(k._57O!==O){var d=k._57O;k._57O=O,k.fp("expanded",d,k._57O),k._8I()}},_8I:function(){Tn.superClass._8I.call(this),this.eachChild(function(u){vj(u)&&u._8I()})},onStyleChanged:function(T){Tn.superClass.onStyleChanged.apply(this,arguments),"group.position"===T&&this._81I()},getSerializableProperties:function(){var q=Tn.superClass.getSerializableProperties.call(this);return q.expanded=1,q}});var je=L.Grid=function(){xi(je,this)};Oj("Grid",Je,{IRotatable:!1,_icon:"grid_icon",_image:A,getUIClass:function(){return ag},setRotation:function(){},getCellRect:function(m,d){var l=this,Q=l.s("grid.row.count"),H=l.s("grid.column.count");if(0>=Q||0>=H||0>m||m>=Q||0>d||d>=H)return A;var L,r,p,O=l.getRect(),j=l.s("grid.row.percents"),$=l.s("grid.column.percents");if(Yg(O,l,"grid.border",-1),j&&j._as&&(j=j._as),$&&$._as&&($=$._as),j&&j.length===Q){for(p=0,L=0;m>L;L++)p+=O.height*j[L];O.y+=p,O.height=O.height*j[m]}else O.height=O.height/Q,O.y+=O.height*m;if($&&$.length===H){for(r=0,L=0;d>L;L++)r+=O.width*$[L];O.x+=r,O.width=O.width*$[d]}else O.width=O.width/H,O.x+=O.width*d;return mk(O,-l.s("grid.gap")),O}});var be=L.Shape=function(){xi(be,this),this._59O=new xm};be.__de__=jh,Oj("Shape",Je,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return nl},_22Q:function(){return Yo},getLength:function(W){return Ob(Jl(this._59O,this._58O,W,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var _=this._58O;return _?new xm(_._as.slice(0)):_},setSegments:function(z){var M=this._58O;z=z?Uh(z)?new xm(z.slice(0)):new xm(z._as.slice(0)):new xm,(M&&z&&M._as.join(",")!==z._as.join(",")||M!==z)&&(this._58O=z,this.fp("segments",M,z))},getPoints:function(){return this._59O},toPoints:function(){var v=this._59O;return new xm(v._as.slice(0))},setPoints:function(B){var s=this._59O;B=B?Uh(B)?new xm(B.slice(0)):new xm(B._as.slice(0)):new xm,(s&&B&&s._as.join(",")!==B._as.join(",")||s!==B)&&(this._59O=B,this.fs(),this.fp("points",s,B))},addPoint:function(X,F){var m=this.toPoints();m.add(X,F),this.setPoints(m)},setPoint:function(y,v){var k=this.toPoints();k.set(y,v),this.setPoints(k)},removePointAt:function(L){var N=this.toPoints();N.removeAt(L),this.setPoints(N)},setWidth:function(A){var W=this;if(1>A&&(A=1),!W._55I&&!Xg&&W.getWidth()){W._55I=1;var S=W._position.x,_=A/W.getWidth(),p=W.toPoints(),L=new xm;p.each(function(x){L.add({x:(x.x-S)*_+S,y:x.y,e:x.e})}),W.setPoints(L),W.fs(),delete W._55I}be.superClass.setWidth.call(W,A)},setHeight:function(p){var H=this;if(1>p&&(p=1),!H._55I&&!Xg&&H.getHeight()){H._55I=1;var l=H._position.y,A=p/H.getHeight(),G=H.toPoints(),m=new xm;G.each(function(q){m.add({x:q.x,y:(q.y-l)*A+l,e:q.e})}),H.setPoints(m),H.fs(),delete H._55I}be.superClass.setHeight.call(H,p)},setPosition:function(S,h){var b,m=this;if(!m._28Q){if(m._28Q=1,!m._55I&&!Xg){b=2===arguments.length?{x:S,y:h}:S;var P=b.x-m._position.x,r=b.y-m._position.y;if(0===P&&0===r)return delete m._28Q,void 0;m._55I=1;var A=m.toPoints(),J=new xm;A.each(function(W){J.add({x:W.x+P,y:W.y+r,e:W.e})}),m.setPoints(J),m.fs(),delete m._55I}be.superClass.setPosition.apply(m,arguments),delete m._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var b=this;if(!b._55I&&!Xg){var n=ap(b._59O);n&&(b._55I=1,b.setRect(n),delete b._55I)}b.fp(Qm,!1,!0)},getSerializableProperties:function(){var k=be.superClass.getSerializableProperties.call(this);return k.segments=1,k.points=1,k.thickness=1,k.closePath=1,k}});var bo=L.Polyline=function(){xi(bo,this),this.s({"shape.background":null,"shape.border.width":2})};Oj("Polyline",be,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return fo},getUIClass:function(){return Bc},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(P){var J=this;if(!J._24Q&&!Xg&&J.getTall()){J._24Q=1;var o=J._54O,u=P/J.getTall();J._59O.each(function(c){c.e=c.e==A?o:(c.e-o)*u+o}),J.fs(),delete J._24Q}bo.superClass.setTall.call(J,P)},setElevation:function(Y){var b=this;if(!b._24Q&&!Xg){b._24Q=1;var i=Y-b._54O;b._59O.each(function(C){C.e==A?C.e=Y:C.e+=i}),b.fs(),delete b._24Q}bo.superClass.setElevation.apply(b,arguments)},fireShapeChange:function(){var W=this,V=W._59O;if(!W._24Q&&!Xg){var S=V.size();if(S){var t=1,e=V.get(0),h=W._54O;e.e==A&&(e.e=h);for(var w=e.e,n=0;S>t;t++){e=V.get(t),e.e==A&&(e.e=h);var D=$(w,e.e),v=C(w+n,e.e);w=D,n=v-D}W._24Q=1,W.setTall(n),W.setElevation(w+n/2),delete W._24Q}}bo.superClass.fireShapeChange.apply(W,arguments)}});var mi=L.SubGraph=function(){xi(mi,this)};Oj("SubGraph",Je,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){mi.superClass._8I.call(this),this.eachChild(function(C){vj(C)&&C._8I()})}}),L.EdgeGroup=function(i,k){this._70O=i,this._siblings=k;for(var R,b,d=0,C=i.size(),Q=V[kr];C>d;d++)if(R=i.get(d).getStyle(kr,!1),R!=A){Q=R;break}Q==A&&(Q=!0);var r=j.edgeGroupAgentFunc;for(r&&(b=r(i),b&&b!==i.get(0)&&(i.remove(b),i.add(b,0))),d=0;C>d;d++)i.get(d).s(kr,Q)},Oj("EdgeGroup",k,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(H){return this._70O.get(H)},indexOf:function(t){return this._70O.indexOf(t)},each:function(L,P){this._70O.each(L,P)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(E,e){this._siblings.each(function(x){x._70O.each(E,e)})}});var zo=L.JSONSerializer=function(Z,I){this.dm=this._dataModel=Z,this._hierarchical=!!I};Oj("JSONSerializer",k,{ms_ac:["hierarchical"],serialize:function(D){return JSON.stringify(this.toJSON(),function(C,M){return Sj(M)?yg(M):M},D==A?2:D)},toJSON:function(){var f=this,X=f.dm,e=X.getRoots(),Z=f.json={v:j.getVersion(),d:[],a:{}},V=X.getSerializableAttrs();for(var L in V){var s=X.a(L);s!==d&&f[Rb](L,s,Z.a)}return zr(Z.a)&&delete Z.a,f._hierarchical?e.each(f.serializeData,this):X.each(function(U){f.serializeData(U)}),Z},isSerializable:function(){return!0},getProperties:function($){return $.getSerializableProperties()},getStyles:function(V){return V.getSerializableStyles()},getAttrs:function(Q){return Q.getSerializableAttrs()},serializeData:function(V){var l=this;if(l.isSerializable(V)){var v,L,u,q,h=V.getClass(),K=new h,t={c:V.getClassName(),i:V.getId(),p:{},s:{},a:{}};l.json.d.push(t),v=l.getProperties(V);for(L in v)q=Pm(L),V[q]&&(u=V[q](),u!==K[q]()&&l[Rb](L,u,t.p));v=l.getStyles(V);for(L in v)u=V.s(L),u!==K.s(L)&&l[Rb](L,u,t.s);v=l.getAttrs(V);for(L in v)u=V.a(L),u!==K.a(L)&&l[Rb](L,u,t.a);zr(t.p)&&delete t.p,zr(t.s)&&delete t.s,zr(t.a)&&delete t.a}l._hierarchical&&V.getChildren().each(l.serializeData,l)},serializeValue:function(d,s,_){rc(s)?s={__a:s._as}:s instanceof rn&&(s={__i:s.getId()}),_[d]=s},deserialize:function(o,O,S){Xg=!0;var r=this;o=r.json=qd(o)?JSON.parse(o):o,r._82I={};for(var H=r.dm,d=new xm,T=new xm,U=0,w=o.d.length;w>U;U++){var V=o.d[U],N=Ym(V.c),G=new N,u=V.i;S&&u!=A&&(G._id=u),r._82I[u]=G,d.add(G),T.add(V)}for(U=0;w>U;U++)r.deserializeData(d.get(U),T.get(U));d.each(function(v){O&&!v.getParent()&&v.setParent(O),H.add(v)});for(var y in o.a)H.a(y,r[vh](o.a[y]));return Xg=!1,d},deserializeData:function(F,Z){for(var M in Z.p)F[Wh(M)](this[vh](Z.p[M]));for(M in Z.s)F.s(M,this[vh](Z.s[M]));for(M in Z.a)F.a(M,this[vh](Z.a[M]))},deserializeValue:function(z){if(Lc(z)){var _=z.__i;if(_!=A)return this._82I[_];if(_=z.__a,Uh(_))return new xm(_)}return z}}),tq(Al,{serialize:function(N,J){return new zo(this,J).serialize(N)},toJSON:function(n){return new zo(this,n).toJSON()},deserialize:function(n,s,R){return new zo(this).deserialize(n,s,R)}}),uj.GraphView=function(c){var f=this;f._24I={},f._34I=new xm,f._25I={},f._56I={},f._view=Pr(1,f),f._canvas=Ad(f._view),f.dm(c?c:new Al),f.setEditable(!1),f.setScrollBarVisible(j.graphViewScrollBarVisible)},Op("GraphView",k,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",Kl,rk,lg,Lg,"resettable","editInteractor",cs,"pannable","rectSelectable","autoScrollZone",_e,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:j.graphViewResettable,_pannable:j.graphViewPannable,_rectSelectable:j.graphViewRectSelectable,_autoScrollZone:j.graphViewAutoScrollZone,_rectSelectBackground:j.graphViewRectSelectBackground,_rectSelectBorderColor:j.graphViewRectSelectBorderColor,_editPointSize:j.graphViewEditPointSize,_editPointBorderColor:j.graphViewEditPointBorderColor,_editPointBackground:j.graphViewEditPointBackground,_scrollBarColor:vm,_scrollBarSize:ei,_autoHideScrollBar:kf,_autoMakeVisible:Yc,setEditable:function(P){var A=this,q=uj.XEditInteractor;P?A.setInteractors([new xn(A),q?new q(A):new Vg(A),new td(A),new ho(A),new ii(A,{editable:!q})]):A.setInteractors([new xn(A),new td(A),new ho(A),new ii(A,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(R){var t=R.getUIClass();return t?new t(this,R):A},getDataUI:function(y){var D=this,c=D._25I[y._id];return c===d&&(c=D._33I(y),D._25I[y._id]=c),c},invalidateAll:function(y){var K=this;if(y){for(var B in K._25I){var f=K._25I[B];f&&f.dispose()}K._25I={},K._56I={},K._24I={},K._34I.clear(),K.redraw()}else K.dm().each(function(r){K.invalidateData(r)})},invalidateSelection:function(){var w=this;w.sm().each(function(S){w.invalidateData(S)})},invalidateData:function(Z){var v=this;v._24I[Z._id]=Z,v._21Q(Z),v.iv()},_21Q:function(z){var v=this,t=v._24I;if(yb(z)&&eo[z.s(Ri)]){var C=z.getSourceAgent();C&&C.getAgentEdges().each(function(d){t[d._id]=d}),C=z.getTargetAgent(),C&&C.getAgentEdges().each(function(O){t[O._id]=O}),v.iv()}},redraw:function(Y){var t=this;t._32I||(Y?t._34I.add(Y):(t._32I=1,t._34I.clear()),t.iv())},each:function(M,t){var Y,y,b,q=0,o=this._layers,c=this._dataModel._datas._as,P=c.length;if(o)for(var Q=o.length;Q>q;q++){b=o[q];for(var n=0;P>n;n++)if(Y=c[n],Y._layer===b&&(y=t?M.call(t,Y):M(Y),y===!1))return}else for(;P>q;q++)if(Y=c[q],y=t?M.call(t,Y):M(Y),y===!1)return},reverseEach:function(l,R){var B,I,N,y,L=this._layers,$=this._dataModel._datas._as,d=$.length;if(L)for(B=L.length-1;B>=0;B--){y=L[B];for(var Z=d-1;Z>=0;Z--)if(I=$[Z],I._layer===y&&(N=R?l.call(R,I):l(I),N===!1))return}else for(B=d-1;B>=0;B--)if(I=$[B],N=R?l.call(R,I):l(I),N===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var c=this,Q=c._84I;return Q||(c.each(function(X){c.isVisible(X)&&(Q=Yi(Q,c.getDataUIBounds(X)))}),c._84I=Q?Q:ad),c._84I},getScrollRect:function(){return Yi(this.getContentRect(),this._29I)},fitData:function(J,b,m,D,k){var M=this;if(!M.getWidth()||!M.getHeight())return k||km(M.fitData,M,[J,b,m,D,!0],200),void 0;M.makeVisible(J),M.validate();var h=M.getDataUIBounds(J);h&&(h=Dk(h),mk(h,m==A?20:m),M.fitRect(h,b,D))},fitContent:function(p,k,R,Y){var l=this;if(!l.getWidth()||!l.getHeight())return Y||km(l.fitContent,l,[p,k,R,!0],200),void 0;l.validate();var P=Dk(l.getContentRect());mk(P,k==A?20:k),l.fitRect(P,p,R)},fitRect:function(Q,d,M){var T=this,F=T.getWidth(),l=T.getHeight(),C=Q.x+Q.width/2,n=Q.y+Q.height/2,R=$(F/Q.width,l/Q.height),o=T._zoom,z=-C*o+F/2,x=-n*o+l/2;0===R||isNaN(R)||(M&&(R=$(1,R)),d?T.setTranslate(z,x,{finishFunc:function(){T.setZoom(R,d)}}):(T.setTranslate(z,x),T.setZoom(R)))},toCanvas:function(z){this.validateImpl();var u=this,I=u.getContentRect(),G=Ad(),e=u._zoom,V=I.x*e,B=I.y*e,O=I.width*e,J=I.height*e;Ye(G,O,J,1);var p=Rd(G);return z&&Gg(p,0,0,O,J,z),Io(p,-V,-B),p.scale(e,e),u._42(p),p.restore(),G},toDataURL:function(z,Z){return this.toCanvas(z).toDataURL(Z||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(K,s){var z,O,$=this;$._93db(K,s),$.each(function(d){$._56I[d._id]&&(z=$.getDataUI(d),z&&(O=z._79o(),L.HtmlNode&&d instanceof L.HtmlNode?z._42(K):(!s||Qr(s,O))&&z._42(K)))}),$._92db(K,s)},validateImpl:function(){var y,c,K,$,J,o=this,G=o.tx(),A=o.ty(),O=o._zoom,j=o._canvas,V=this.getWidth(),q=this.getHeight(),v=o._29I,k={x:-G/O,y:-A/O,width:V/O,height:q/O},M={},r=o._34I,T=o._24I,I=o._32I,h=o._23I;(V!==j.clientWidth||q!==j.clientHeight)&&(Ye(j,V,q),I=1),I||dh(k,v)||(I=1),o._29I=k,o.each(function(j){c=j._id;var C=M[c]=o.isVisible(j);C!==o._56I[c]&&(T[c]=j,K=o.getDataUI(T[c]),K&&K._84o(C),o._84o(j,C))},o);for(c in T)K=o.getDataUI(T[c]),K&&(!I&&o._56I[c]&&(J=K._79o(),J&&r.add(J)),K.invalidate()),o._83I=1;if(o._56I=M,!I)for(c in T)M[c]&&(K=o.getDataUI(T[c]),K&&(J=K._79o(),J&&r.add(J)));if(I?$=k:(r.each(function(v){Qr(k,v)&&($=Yi($,v))}),$&&(mk($,C(1,1/O)),$.x=u($.x*O)/O,$.y=u($.y*O)/O,$.width=X($.width*O)/O,$.height=X($.height*O)/O,$=kg(k,$))),o._74O=$,$&&(y=Rd(j),kj(y,G,A,O),y.beginPath(),y.rect($.x,$.y,$.width,$.height),y.clip(),y.clearRect($.x,$.y,$.width,$.height),o._42(y,$),y.restore(),delete o._74O),o._24I={},r.clear(),delete o._32I,h&&V>0&&q>0){var K=o.getDataUI(h);if(K){var J=K._79o(),Z=o._29I,a=Z.x,n=Z.y,f=Z.width,g=Z.height,O=o._zoom;J&&!Qr(J,Z)&&(J.x+J.width<a&&o.tx(-J.x*O),J.x>a+f&&o.tx(-(J.x+J.width-f)*O),J.y+J.height<n&&o.ty(-J.y*O),J.y>n+g&&o.ty(-(J.y+J.height-g)*O))}delete o._23I}o._83I&&(delete o._83I,delete o._84I),o._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(l){var r=this;l!==r.isScrollBarVisible()&&(l?(qc(r._view,r._79O=hr()),qc(r._79O,r._27I=hr()),qc(r._79O,r._28I=hr())):(ip(r._79O),delete r._79O,delete r._27I,delete r._28I),r.fp("scrollBarVisible",!l,l))},showScrollBar:function(){var i=this;i._79O&&(i._85I||(z(function(){i._86I()},Zq),i.iv()),i._85I=new Date)},_86I:function(){var M=this;if(M._85I){var v=new Date,k=v.getTime();k-M._85I.getTime()>=Zq?(delete M._85I,M.iv()):z(function(){M._86I()},Zq)}},_98O:function(){var d=this,j=this._27I,i=this._28I;if(d._79O){if(d._autoHideScrollBar&&!d._85I)return j.style.visibility=Np,i.style.visibility=Np,void 0;var B=d.getScrollBarColor(),Y=d._zoom,F=d.getScrollBarSize(),c=d.getViewRect(),m=d.getScrollRect(),I=c.height*Y,y=m.height*Y,p=c.width*Y-F-2,_=I*((c.y-m.y)*Y/y),S=I*(I/y),Q=j.style;y-.5>I?(So>S&&(_=_+S/2-So/2,0>_&&(_=0),_+So>I&&(_=I-So),S=So),Xf(j,p,_,F,S),Q.visibility=Hc,Q.background=B,Q.borderRadius=F/2+Ae):Q.visibility=Np;var g=c.width*Y,P=m.width*Y,_=c.height*Y-F-2,p=g*((c.x-m.x)*Y/P),T=g*(g/P),Q=i.style;P-.5>g?(So>T&&(p=p+T/2-So/2,0>p&&(p=0),p+So>g&&(p=g-So),T=So),Xf(i,p,_,T,F),Q.visibility=Hc,Q.background=B,Q.borderRadius=F/2+Ae):Q.visibility=Np}},setDataModel:function(M){var c=this,Q=c._dataModel,_=c._3o;Q!==M&&(Q&&(Q.umm(c.handleDataModelChange,c),Q.umd(c.handleDataPropertyChange,c),Q.removeIndexChangeListener(c._75O,c),_||Q.sm().ums(c._16o,c)),c._dataModel=M,M.mm(c.handleDataModelChange,c),M.md(c.handleDataPropertyChange,c),M.addIndexChangeListener(c._75O,c),_?_._21I(M):M.sm().ms(c._16o,c),c.invalidateAll(!0),c.fp(hd,Q,M))},handleDataPropertyChange:function(i){this.invalidateData(i.data)},onPropertyChanged:function(C){var K=this,x=C.property;K.redraw(),Hd[x]?K.showScrollBar():x===cs&&K.onCurrentSubGraphChanged(C)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(x){var n=this,f=x.kind,J=x.data;if(n._83I=1,"add"===f)n.invalidateData(J),yb(J)&&J.getEdgeGroup()&&J.getEdgeGroup().eachSiblingEdge(n.invalidateData,n);else if(f===En){n._21Q(J);var j=J._id,M=n._25I[j];if(M){if(n._56I[j]){var h=M._79o();h&&n.redraw(h)}M.dispose(),delete n._25I[j],delete n._24I[j],delete n._56I[j]}J===n._currentSubGraph&&n.setCurrentSubGraph(A)}else f===Go&&(n.invalidateAll(!0),n.setCurrentSubGraph(A))},_75O:function(D){this.invalidateData(D.data)},_76O:function(h){var y=this;if(y.isVisible(h)){for(var t=h;t._parent&&y.isVisible(t._parent);)t=t._parent;t&&t!==h&&y._dataModel._76O(t),y._dataModel._76O(h)}},isMovable:function(s){var S=this;return yb(s)&&s.getStyle(Ri)!==ig?!1:s.s("2d.movable")?S._movableFunc?S._movableFunc(s):!0:!1},isSelectable:function(I){return I.s("2d.selectable")&&this.sm().isSelectable(I)},isEditable:function(s){var d=this;if(!d._editInteractor||!d.isSelected(s))return!1;if(vs(s)){var P=d.getDataUI(s);if(!P||P._88I)return!1}return yb(s)&&s.getStyle(Ri)!==ig?!1:s.s("2d.editable")?d._editableFunc?d._editableFunc(s):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(f){return vj(f)&&0!==f.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(f):!0},isRectEditable:function(w){return vj(w)&&0!==w.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(w):!0},isRotationEditable:function($){return $.setRotation&&$.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc($):!0:!1},getRotationPoint:function(y){var e=ln(y.getRotation(),0,-y.getHeight()/2-(F?32:16)),o=y.p();return e.x+=o.x,e.y+=o.y,e},getLogicalPoint:function(d){var w=this;return Af(d,w._canvas,w.tx(),w.ty(),w._zoom,w._zoom)},getSelectedDataAt:function(W){var j=this;return this.getDataAt(W,function(g){return j.isSelected(g)})},getDataAt:function(B,T,y){B.target&&(B=this.lp(B));var D;return this.reverseEach(function(_){return(T?T(_):this.isSelectable(_))&&this.rectIntersects(_,cn(B.x,B.y,y))?(D=_,!1):void 0},this),D},getIconInfoAt:function(j,J){var S=this;if(j.target&&(j=S.lp(j)),J||(J=S.getDataAt(j)),J){var c=S.getDataUI(J);if(c&&c._38o){var T,C=c._38o,P=new xm;for(T in C.icons)P.add(T);for(var i=P.size()-1;i>=0;i--){T=P.get(i);for(var $=C.rects[T],E=$.rotation,x=$.length-1;x>=0;x--){var f=$[x],B=f.width,_=f.height,H={x:j.x-f.x-B/2,y:j.y-f.y-_/2};E!=A&&(H=ln(-E,H.x,H.y));var f={x:-B/2,y:-_/2,width:B,height:_};if(_n(f,H))return{key:T,index:x,name:C.icons[T].names[x],rect:$[x],point:j,rotation:E,relativeRect:f,relativePoint:H,data:J}}}}}return A},getDatasInRect:function(K,u,t){t===d&&(t=1);var S=this,H=new xm;return S.reverseEach(function(U){t&&!S.isSelectable(U)||(u?S.rectIntersects(U,K):S.rectContains(U,K))&&H.add(U)}),H},moveSelection:function(l,f){var A,N=this,L=N.dm();L&&(A=L.getHistoryManager()),A&&A.beginInteraction(),He(N.sm().toSelection(N.isMovable,N),l,f),A&&A.endInteraction()},getDataUIBounds:function(Z){var u=this.getDataUI(Z);return u?u._79o():A},getBoundsForGroup:function(a){return a.s(ic)?this.getDataUIBounds(a):A},rectIntersects:function(O,p){this.validate();var P=A;if(this._56I[O._id]){var z=this._25I[O._id];if(z){var e=z._79o();if(Km(p,e))P=!0;else if((p=kg(p,e))&&(z.rectIntersects&&(P=z.rectIntersects(p)),P==A)){if(!O.s("pixelPerfect"))return!0;var Y=p.x,W=p.y,c=p.width,v=p.height,h=1,L=j.hitMaxArea,Q=c*v;Q>L&&(h=L/Q);var x=wn(c*h,v*h);Io(x,-Y*h,-W*h),x.scale(h,h),z._42(x);try{for(var o=0,n=x.getImageData(0,0,c*h,v*h).data;o<n.length;o+=4)if(0!==n[o+3]){P=!0;break}x.restore()}catch(R){cr=A,P=!0}}}}return P?!0:!1},rectContains:function(f,o){if(this._56I[f._id]){var L=this._25I[f._id];if(L)return Km(o,L._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(E){var M=this,H=M._focusData,J=H&&M._25I[H._id],T=0,S=M._dataModel._datas;H&&H._enabled&&H._editable&&J&&J.onKeyDown&&J.onKeyDown(E)===!0||(9===E.keyCode&&(H&&(T=S.indexOf(H),Td(E)?-1===--T&&(T=0):++T===S.size()&&(T=0)),M._focusData=H=S.get(T),M.sm().setSelection(H)),tn(E)?M.selectAll():oh(E)&&M.isResettable()&&M.reset(),M.sm().isEmpty()||(nq(E)&&M.handleDelete(E),Pb(E)&&(M.moveSelection(-1,0),M.fi({kind:"moveLeft"})),nj(E)&&(M.moveSelection(0,-1),M.fi({kind:"moveUp"})),Zb(E)&&(M.moveSelection(1,0),M.fi({kind:"moveRight"})),hh(E)&&(M.moveSelection(0,1),M.fi({kind:"moveDown"}))))},handleScroll:function(D,j){sp(D);var e=this.lp(D);j>0?this.scrollZoomIn(e):0>j&&this.scrollZoomOut(e)},handlePinch:function(Z,F,I){F>I?this.pinchZoomIn(Z):this.pinchZoomOut(Z)},checkDoubleClickOnNote:function(z,O){var G=this,E=G.lp(z),N=G.getDataUI(O),$=N.note2Info;return $&&O.s("note2.toggleable")&&_n($.clickRect,E)?(O.s(hp,!O.s(hp)),G.fi({kind:"toggleNote2",event:z,data:O}),!0):($=N.noteInfo,$&&O.s("note.toggleable")&&_n($.clickRect,E)?(O.s(Pd,!O.s(Pd)),G.fi({kind:"toggleNote",event:z,data:O}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(h,$){var U=this,z=U.getAutoScrollZone(),m=z/U.getZoom(),t=z/4,B=U._29I,H=U.lp(h),w={x:U.tx(),y:U.ty()};return H&&z>0&&B&&(H.x-B.x<m?U.translate(t,0):B.x+B.width-H.x<m&&U.translate(-t,0),H.y-B.y<m?U.translate(0,t):B.y+B.height-H.y<m&&U.translate(0,-t)),w.x=U.tx()-w.x,w.y=U.ty()-w.y,$&&($.x+=w.x,$.y+=w.y),w},getMoveMode:function(h,i){var A=i.s("2d.move.mode");return A?A:_b["88"]?"x":_b["89"]?"y":"xy"}});var dq=function(_,t){var c=this;c.gv=_,c.s=function(i){return t.getStyle(i)},c._data=t,c._87I=new xm};Lk(dq,k,{_6I:A,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")
},_2o:function(){var E=this,z=E.gv.isSelected(E._data);return!z||E.isShadowed()?0:this.s("select.width")},getBodyColor:function(h){var M=this._data,p=this.gv.getBodyColor(M);return p?p:h?M.getStyle(h):A},_2Q:function($){return this.s($)},_1Q:function(c,V,a,m){var g=this.s,M=g(V+".dash.color");c.strokeStyle=M,c.lineWidth=a,c.stroke(),g(V+".dash.3d")&&El(c,M,g(V+".dash.3d.color"),a,this.gv._zoom,g(V+".dash.3d.accuracy")),jr(c,m)},invalidate:function(){this._6I=A},_79o:function(){var _=this;if(!_._6I){_.labelInfo=_.label2Info=_.noteInfo=_.note2Info=_._38o=A,_._87I.clear(),_._3O();var $=_._data,P=_.gv;_._55O=P.isEditable($)?{_42O:P.isRectEditable($),_43O:P.isPointEditable($),_56O:P.isRotationEditable($)}:A,_._6I=_._81o()}return _._6I},_3O:function(){},getPosition:function(){return ad},_68o:function(L,d){L&&this._87I.add(go(L,d))},_81o:function(){var R=this,B=R.s;R._24O(fq,"getLabel"),R._24O(Gm,"getLabel2"),R._26O(ej,"getNote"),R._26O(Nb,"getNote2"),R._15O(),R._55O&&R._48O();var k;if(R._87I.each(function(b){k=Yi(k,b)}),k&&R.isShadowed()){var s=Dk(k);s.x+=B("shadow.offset.x"),s.y+=B("shadow.offset.y"),mk(s,B("shadow.blur")),k=Yi(k,s)}return R._87I.clear(),k},_42:function(n){var Y=this,N=Y._data,R=Y.gv,C=Y.s,$=C("opacity"),h=this.isShadowed();if(h){var m=n.shadowOffsetX,x=n.shadowOffsetY,X=n.shadowBlur,Q=n.shadowColor;n.shadowOffsetX=C("shadow.offset.x"),n.shadowOffsetY=C("shadow.offset.y"),n.shadowBlur=C("shadow.blur"),n.shadowColor=C("shadow.color")}if($!=A){var e=n.globalAlpha;n.globalAlpha=$}Y._80o(n),R.isLabelVisible(N)&&(hc(n,Y.labelInfo),hc(n,Y.label2Info)),R.isNoteVisible(N)&&(op(n,Y.noteInfo),op(n,Y.note2Info)),Y._99O(n),$!=A&&(n.globalAlpha=e),h&&(n.shadowOffsetX=m,n.shadowOffsetY=x,n.shadowBlur=X,n.shadowColor=Q),Y._55O&&R.isEditVisible(N)&&Y._47O(n)},_80o:function(){},_47O:function(){},_24O:function(O,e){var j=this,X=j._data,i=j.gv,n=j.s,B=i[e](X);if(B!=A){var q=n(O+".scale"),E=n(O+".max"),W=n(O+".position"),l=j[O+"Info"]={label:B,scale:q,color:i[e+"Color"](X),font:n(O+".font"),opacity:n(O+".opacity"),align:n(O+".align"),rotation:j.getRotation(n(O+".rotation"),!1,W),background:i[e+"Background"](X)},Q=Jf(l,B);E>0&&E<Q.width&&(l.labelWidth=Q.width,Q.width=E),1!==q&&(Q.width*=q,Q.height*=q);var G=j.getPosition(W,n(O+".offset.x"),n(O+".offset.y"),Q,n(O+".position.fixed"));if(Q.x=G.x-Q.width/2,Q.y=G.y-Q.height/2,j._68o(l.rect=Q,l.rotation),1!==q){var V=Q.width/q,s=Q.height/q;l.rect={x:G.x-V/2,y:G.y-s/2,width:V,height:s}}}},_26O:function(F,Z){var z=this,x=z.gv,H=z._data,u=z.s,Q=x[Z](H);if(Q!=A){var l,G,V=u(F+".scale"),O=z[F+"Info"]={note:Q,scale:V,data:H,view:x,expanded:u(F+".expanded"),font:u(F+".font"),color:u(F+".color"),opacity:u(F+".opacity"),align:u(F+".align"),icon:u(F+".icon"),backgroundImage:u(F+".backgroundImage"),borderWidth:u(F+".border.width"),borderColor:u(F+".border.color"),background:x[Z+"Background"](H)},E=z.getPosition(u(F+".position"),u(F+".offset.x"),u(F+".offset.y")),_=E.x,p=E.y;if(O.expanded){var N,i=u(F+".max"),M=u(F+".backgroundImage");M?(M=Vd(M),N={width:zm(M,H),height:Tr(M,H)}):N=Jf(O,Q),N.width+=6,N.height+=2,i>0&&i<N.width&&(O.labelWidth=N.width,N.width=i),l=N.width,G=N.height+8,O.clickRect={x:_-l*V/2,y:p-G*V,width:l*V,height:G*V*N.height/G}}else{var c=u(F+".icon");c?(c=Vd(c),l=zm(c,H),G=Tr(c,H)):(l=12,G=18),O.clickRect={x:_-l*V/2,y:p-G*V,width:l*V,height:G*V}}O.rect={x:_-l/2,y:p-G*V/2-G/2,width:l,height:G};var t=X(O.borderWidth/2)*V;z._68o({x:_-l*V/2-t,y:p-G*V-t,width:l*V+2*t,height:G*V+2*t})}},_48O:function(){},_99O:function(w){var D=this,P=D._38o;if(P){var F=D.gv,_=D._data,L=P.icons;for(var s in L){var H=L[s],Z=P.rects[s];if(Z){var j=Ro(H.opacity,_,F),$=Ro(H.names,_,F),a=$?$.length:0,R=Z.rotation;if(j!=A){var V=w.globalAlpha;w.globalAlpha*=j}for(var C=0;a>C;C++){var u=$[C],k=Vd(u),O=Z[C];if(R){var h=O.x+O.width/2,l=O.y+O.height/2;w.save(),Io(w,h,l),$e(w,R),Io(w,-h,-l)}Bj(w,k,Ro(H.stretch,_,F),O.x,O.y,O.width,O.height,D._data,D.gv),R&&w.restore()}j!=A&&(w.globalAlpha=V)}}}}});var id=function(P,e){xi(id,this,[P,e])};Lk(id,dq,{_40O:function(R,H){var k=this,d=k.s,x=R.rect;(R.borderColor=k.gv.getBorderColor(k._data))&&(R.borderType=d("border.type"),R.borderWidth=d("border.width"),R.borderPadding=d("border.padding"),H=C(H,R.borderPadding+R.borderWidth/2)),(R.selectWidth=k._2o())&&(R.selectType=d("select.type"),R._97o=d("select.color"),R.selectPadding=d("select.padding"),H=C(H,R.selectPadding+R.selectWidth/2)),H>0&&(x=Dk(x),mk(x,H)),k._68o(x)},_39O:function(_,J){var Z=J.rect;if(J.borderWidth>0){var G=J.borderPadding;_.strokeStyle=J.borderColor,_.lineWidth=J.borderWidth,Hp(_,J.borderType,{x:Z.x-G,y:Z.y-G,width:Z.width+2*G,height:Z.height+2*G}),_.stroke()}J.selectWidth>0&&(G=J.selectPadding,_.strokeStyle=J._97o,_.lineWidth=J.selectWidth,Hp(_,J.selectType,{x:Z.x-G,y:Z.y-G,width:Z.width+2*G,height:Z.height+2*G}),_.stroke())},_3O:function(){var g=this,$=g.s,i=g._data,u=i.getStyle(Qm),c=g.getBodyColor(),s=g._83o=u?{shape:u,_53o:g.getBodyColor("shape.background"),_27Q:Vd($("shape.repeat.image"),c),_54o:$("shape.border.width"),_55o:$("shape.border.color"),_56o:$("shape.border.3d"),_57o:$("shape.border.3d.color"),_58o:$("shape.border.3d.accuracy"),shapeGradient:$("shape.gradient"),_59o:$("shape.gradient.color"),_60o:$("shape.border.pattern"),_61o:$("shape.border.cap"),_62o:$("shape.border.join")}:{img:Vd(i.getImage(),c),bodyColor:c,stretch:$("image.stretch")};K&&!o||(s.rect=i.getRect(),s.position=i.p(),s.rotation=i.getRotation(),u===rp&&(s._63o=$("shape.depth")),g._40O(s,u?$g(A,s._54o/2,s._62o):0))},getPosition:function(f,S,e,C){var $=wb(f,this._83o.rect,C);return $.x+=S,$.y+=e,$},_80o:function(A){var C=this,S=C.s,l=C.gv,U=C._data,s=C._83o,_=s.rect,R=_,Z=s.position,E=s.rotation,I=s.shape;if(_.width>0&&_.height>0){if(E&&(A.save(),Io(A,Z.x,Z.y),$e(A,E),Io(A,-Z.x,-Z.y),R=U.getSize(),R.x=Z.x-R.width/2,R.y=Z.y-R.height/2),C.freeDraw)C.freeDraw(A,R,s);else if(I){var B,L,G,y,Y=s._60o,p=Gn(A,Y),T=s._53o,d=s._27Q,H=s._54o,J=s._55o,o=A.lineJoin,V=A.lineCap;if("roundRect"===I?B=S("shape.corner.radius"):"polygon"===I?B=S("shape.polygon.side"):"arc"===I&&(B=S("shape.arc.from"),L=S("shape.arc.to"),G=S("shape.arc.close"),y=S("shape.arc.oval")),A.lineJoin=s._62o,A.lineCap=s._61o,T||d?(d?$n(A,d):Di(A,T,s.shapeGradient,s._59o,R),Hp(A,I,R,B,L,G,y),A.fill(),A!==p&&Hp(p,I,R,B,L,G,y)):Hp(p,I,R,B,L,G,y),H>0&&(A.lineWidth=H,A.strokeStyle=J,A.stroke(),s._56o&&El(A,J,s._57o,H,l._zoom,s._58o)),jr(A,Y),S("shape.dash")){var v=S("shape.dash.width")||H;if(v>0){Y=S("shape.dash.pattern");var p=Gn(A,Y,C._2Q("shape.dash.offset"));p!==A&&Hp(p,I,R,B,L,G,y),C._1Q(A,"shape",v,Y)}}cd(A,T,s._63o,R),A.lineJoin=o,A.lineCap=V}else Bj(A,s.img,s.stretch,R.x,R.y,R.width,R.height,U,l,s.bodyColor);E&&A.restore()}C._39O(A,s)},_48O:function(){var B,H=this,U=H._data,K=H.gv,N=H._55O,t=K.getEditPointSize()/2+2;if(N._42O&&(B=U.getRect(),mk(B,t)),N._56O){var o=N._98o=K.getRotationPoint(U);B=Yi(B,{x:o.x-t,y:o.y-t,width:2*t,height:2*t})}H._68o(B)},_47O:function(f){var I=this,V=I.gv,b=I._55O,R=I._data.getRect(),$=V.getEditPointSize(),l=b._98o;b._42O&&(f.fillStyle=V.getEditPointBackground(),f.strokeStyle=V.getEditPointBorderColor(),f.lineWidth=1,[{x:R.x,y:R.y},{x:R.x+R.width/2,y:R.y},{x:R.x+R.width,y:R.y},{x:R.x,y:R.y+R.height/2},{x:R.x+R.width,y:R.y+R.height/2},{x:R.x,y:R.y+R.height},{x:R.x+R.width/2,y:R.y+R.height},{x:R.x+R.width,y:R.y+R.height}].forEach(function(k){Gg(f,k.x-$/2,k.y-$/2,$,$),f.stroke()})),b._56O&&(f.fillStyle=V.getEditPointBorderColor(),f.strokeStyle=V.getEditPointBackground(),f.lineWidth=1,f.beginPath(),f.arc(l.x,l.y,$/2,0,N,!0),f.fill(),f.stroke())}});var _d=function(y,M){xi(_d,this,[y,M])},Vh=function(J,C,v,P){var D=Qd(J,C);return v=P?$(v,D):Pe(v,D),D?v/=D:v=0,{x:J.x+(C.x-J.x)*v,y:J.y+(C.y-J.y)*v}};Lk(_d,dq,{_3O:function(){var N,y=this,h=y._data,z=y.gv,Y=y.s,c=Y(Ri),m=h.isLooped(),f=Y("edge.width"),G=Y("edge.center"),F=Y("edge.offset"),X=z.getBorderColor(h),V=X?Y("border.width"):0,x=y._2o(),D=h._40I,v=h._41I,p=y._78o=D&&v?{looped:m,type:c,width:f,center:G,color:y.getBodyColor("edge.color"),borderColor:X,borderWidth:V,_97o:x?Y("select.color"):A,selectWidth:x,pattern:Y("edge.pattern"),cap:Y("edge.cap"),join:Y("edge.join"),is3d:Y("edge.3d"),_67o:Y("edge.3d.color"),_66o:Y("edge.3d.accuracy")}:A;if(p){var Q=j.getEdgeType(c);if(Q){var r=Q(h,Vk(y,z,h,m,c),z,y._19Q);r.points&&r.points.size()>1&&(p._4O=r,N=ap(p._4O.points))}else{var s=sf(z,D,Y("edge.source.position"),Y("edge.source.offset.x"),Y("edge.source.offset.y")),a=sf(z,v,Y("edge.target.position"),Y("edge.target.offset.x"),Y("edge.target.offset.y"));if(c===ig){var u=p.points=Y(vq)||me,U=u.size();if(p.segments=Y("edge.segments"),!G)if(F){var B=Vh(s,U?u.get(0):a,F,U),E=Vh(a,U?u.get(U-1):s,F,U);s=B,a=E}else{var H=oo(z,D),R=oo(z,v),I=Xd(s,U?u.get(0):a,H);I&&(s={x:I[0],y:I[1]}),I=Xd(U?u.get(U-1):s,a,R),I&&(a={x:I[0],y:I[1]})}N=Yi(ap(p.points),ap(s,a))}else{var S=Vk(y,z,h,m,c);if(y._19Q||(S=-S),m)s=Dk(s),s.x-=D.getWidth()/2,p.radius=S,N={x:s.x-S,y:s.y-S,width:2*S,height:2*S};else{var C=Qd(s,a),q=Pe(F,C),B={x:q,y:S},E={x:C-q,y:S},J=_(a.y-s.y,a.x-s.x),T=p.mat=new sj(J);if(p.orienAngle=J,p.angle=a.x<s.x?J+n:J,p.rect={x:B.x,y:B.y,width:E.x-B.x,height:0},p.origin=s,B=T.tf(B),B.x+=s.x,B.y+=s.y,E=T.tf(E),E.x+=s.x,E.y+=s.y,G){var K={x:C,y:0};K=T.tf(K),K.x+=s.x,K.y+=s.y,N=ap([s,B,E,K]),p.c1=s,p.c2=K}else N=ap(B,E);s=B,a=E}}p._69o=s,p._70o=a}$g(N,f/2+V+x,p.join),y._68o(N)}},getRotation:function(K,R,c){K=K||0;var h=this._78o;if(h){var x,j=h.angle,_=h.points,s=h._4O;if(j!=A)return R?h.orienAngle+K:j+K;if(s){var F=s.points;return x=F.size(),Zk[c]?x&&0===x%2?_m(F.get(x/2-1),F.get(x/2),R,K):K:Hq[c]?_m(F.get(0),F.get(1),R,K):_m(F.get(x-2),F.get(x-1),R,K)}if(_)return x=_.size(),Zk[c]?x&&0===x%2?_m(_.get(x/2-1),_.get(x/2),R,K):K:Hq[c]?_m(h._69o,x?_.get(0):h._70o,R,K):_m(x?_.get(x-1):h._69o,h._70o,R,K)}return K},getPosition:function(G,p,N,P,a){var X=this._78o;if(X){var f,O=X.type,i=X.points,Z=X._4O,V=X._69o,l=X._70o;if(!O)return X.looped?{x:V.x-X.radius+p,y:V.y+N}:(a&&V&&l&&(V.x>l.x||V.x===l.x&&V.y>l.y)&&(G=rm[G],N=-N),f=wb(G,X.rect,P),f.x+=p,f.y+=N,f=X.mat.tf(f),f.x+=X.origin.x,f.y+=X.origin.y,f);if(i){var f,b=i.size();if(Zk[G]){if(b){var R=b%2;if(0===R)return io(i.get(b/2-1),i.get(b/2),G,p,N,P,a);f=i.get((b-R)/2)}else f={x:(V.x+l.x)/2,y:(V.y+l.y)/2};return f=wb(G,{x:f.x,y:f.y,width:0,height:0},P),f.x+=p,f.y+=N,f}return Hq[G]?io(V,b?i.get(0):l,G,p,N,P,a):io(b?i.get(b-1):V,l,G,p,N,P,a)}if(Z){var u=Z.points,b=u.size();if(Zk[G]){var R=b%2;return 0===R?io(u.get(b/2-1),u.get(b/2),G,p,N,P,a):(f=u.get((b-R)/2),f=wb(G,{x:f.x,y:f.y,width:0,height:0},P),f.x+=p,f.y+=N,f)}return Hq[G]?io(u.get(0),u.get(1),G,p,N,P,a):io(u.get(b-2),u.get(b-1),G,p,N,P,a)}}return ad},_42:function(F){this._78o&&_d.superClass._42.call(this,F)},drawPath:function(d,h){d.beginPath();var i=h.type,D=h.points,K=h.segments,v=h._4O;if(!i||D){var y=h._69o,X=y.x,A=y.y,S=h._70o,M=S.x,V=S.y;if(i)if(K){var s=new xm({x:X,y:A});s.addAll(D),s.add({x:M,y:V}),Rc(d,s,K)}else d.moveTo(X,A),D.each(function(w){d.lineTo(w.x,w.y)}),d.lineTo(M,V);else h.looped?d.arc(X,A,h.radius,0,N,!0):h.center?(d.moveTo(h.c1.x,h.c1.y),d.lineTo(X,A),d.lineTo(M,V),d.lineTo(h.c2.x,h.c2.y)):(d.moveTo(X,A),d.lineTo(M,V))}else v&&Rc(d,v.points,v.segments)},_80o:function(s){var w=this,c=w.s,m=w._78o,M=m.width,u=m.selectWidth,a=m.borderWidth,X=m.color,A=s.lineJoin,K=s.lineCap,Z=m.pattern;if(s.lineJoin=m.join,s.lineCap=m.cap,w.drawPath(Gn(s,Z),m),u&&(s.strokeStyle=m._97o,s.lineWidth=M+2*(a+u),s.stroke()),a&&(s.strokeStyle=m.borderColor,s.lineWidth=M+2*a,s.stroke()),s.strokeStyle=X,s.lineWidth=M,s.stroke(),m.is3d&&El(s,X,m._67o,M,w.gv._zoom,m._66o),jr(s,Z),c("edge.dash")){Z=c("edge.dash.pattern");var V=Gn(s,Z,w._2Q("edge.dash.offset"));V!==s&&w.drawPath(V,m),w._1Q(s,"edge",c("edge.dash.width")||M,Z)}s.lineJoin=A,s.lineCap=K},_48O:function(){var h=this,m=h._78o;if(h._55O._43O&&m&&m.points){var c=ap(m.points);c&&(mk(c,h.gv.getEditPointSize()/2+2),h._68o(c))}},_47O:function(L){var A=this,R=A.gv,s=A._78o;if(A._55O._43O&&s&&s.points){var y=R.getEditPointSize()/2;L.fillStyle=R.getEditPointBackground(),L.strokeStyle=R.getEditPointBorderColor(),L.lineWidth=1,s.points.each(function(U){L.beginPath(),L.arc(U.x,U.y,y,0,N,!0),L.fill(),L.stroke()})}},_71o:function(y,M){var P=this,O=P._data;if(P._19Q=!0,!O.getEdgeGroup())return y?O.s("edge.gap"):0;var g,n=0,i=0,S=0;if(O.getEdgeGroup().getSiblings().each(function(l){l.each(function(F){if(P.gv.isVisible(F)&&F.s(Ri)==M){var Q=F.s("edge.gap");g?(i+=S/2+Q/2,S=Q):(g=F,S=Q),F===O&&(n=i)}})}),y)return i-n+S;var I=n-i/2;return g&&O._40I!==g._40I&&(P._19Q=!1),I}});var Dl=function(x,$){xi(Dl,this,[x,$])};Lk(Dl,id,{_3O:function(){var G,j,x=this,v=x.s,n=x._data,e=x.gv;if(x._88I=A,n.isExpanded()&&n.eachChild(function(X){var M=e.getBoundsForGroup(X);M&&(j||(j=[]),j.push(M),G=Yi(G,M))}),G){var U=e.getLabel(n),X=v("group.type");G=cp(X,j,G),Yg(G,n,"group.padding",1);var m=x._88I={type:X,rect:G,_64o:G};if(!X&&U!=A){var R,d=x.labelInfo={label:U,color:v("group.title.color"),font:v("group.title.font")},u=Jf(d,U),D=u.width,Z=u.height,b=v("group.title.align");D>G.width&&(G.width=D),d.rect={y:G.y-Z,width:u.width,height:Z},R=b===yi?G.x:b===Tg?G.x+G.width-D:G.x+G.width/2-D/2,d.rect.x=R,m.titleRect={x:G.x,y:G.y-Z,width:G.width,height:Z+1},m.rect={x:G.x,y:G.y-Z,width:G.width,height:G.height+Z}}x._40O(m,v("group.border.width")/2)}else Dl.superClass._3O.call(x)},getPosition:function(_,H,Q,r){var G=this._88I;if(G){var h=wb(_,G.rect,r);return h.x+=H,h.y+=Q,h}return Dl.superClass.getPosition.apply(this,arguments)},_24O:function(j,w){var G=this._88I;(!G||G.type||"label2"===j)&&Dl.superClass._24O.call(this,j,w)},_80o:function(y){var W=this,s=W._88I;if(s){var d=W._data,E=W.s,p=W.gv,X=s.type,l=s.rect,v=s._64o,u=s.titleRect,J=W.getBodyColor(),r=Vd(E("group.image"),J),T=E("group.image.stretch"),I=W.getBodyColor("group.background"),c=Vd(E("group.repeat.image"),J),G=E("group.gradient"),Y=E("group.gradient.color"),k=E("group.depth");if(X){var S=E("group.border.pattern"),m=E("group.border.width"),h=y.lineJoin,L=y.lineCap;if(y.lineJoin=E("group.border.join"),y.lineCap=E("group.border.cap"),r){if(y.save(),Hp(y,X,l),y.clip(),Bj(y,r,T,l.x,l.y,l.width,l.height,d,p,J),y.restore(),m>0){var R=Gn(y,S);Hp(R,X,l),y.lineWidth=m,y.strokeStyle=E("group.border.color"),y.stroke(),jr(y,S)}}else{var R=Gn(y,S);I||c?(c?$n(y,c):Di(y,I,G,Y,l),Hp(y,X,l),y.fill(),y!==R&&Hp(R,X,l)):Hp(R,X,l),m>0&&(y.lineWidth=m,y.strokeStyle=E("group.border.color"),y.stroke()),jr(y,S),X===rp&&cd(y,I,k,l)}y.lineJoin=h,y.lineCap=L}else if(r?Bj(y,r,T,v.x,v.y,v.width,v.height,d,p,W.getBodyColor()):(I||c)&&(c?$n(y,c):Di(y,I,G,Y,v),Hp(y,rp,v),y.fill(),cd(y,I,k,v)),u){var B=E("group.title.background");Gg(y,u.x,u.y,u.width,u.height,B),cd(y,B,k,u)}W._39O(y,s)}else Dl.superClass._80o.call(W,y)}});var nl=function(E,$){xi(nl,this,[E,$])};Lk(nl,id,{_3O:function(){var u=this,R=u._data,_=u.s,F=u.gv,w=R.getPoints(),t=F.getBorderColor(R),Z=t?_("border.width"):0,h=u._2o(),p=_("shape.border.width"),W=R.getRect(),j=F.getBodyColor(R),s=u._99o=w.isEmpty()?A:{rect:W,rotation:R.getRotation(),position:R.p(),points:w,segments:R.getSegments(),bodyColor:j,borderColor:t,borderWidth:Z,_94o:_("shape.border.3d"),_95o:_("shape.border.3d.color"),_96o:_("shape.border.3d.accuracy"),_97o:h?_("select.color"):A,selectWidth:h,_53o:_("shape.background"),_27Q:Vd(_("shape.repeat.image"),j),_54o:p,_55o:_("shape.border.color"),shapeGradient:_("shape.gradient"),_59o:_("shape.gradient.color"),_60o:_("shape.border.pattern"),_61o:_("shape.border.cap"),_62o:_("shape.border.join")};if(s){var b=p/2+Z+h;b&&(W=Dk(W),$g(W,b,s._62o)),u._68o(W)}},getPosition:function(Y,q,X,N){var d=this._99o;if(d){var O=wb(Y,d.rect,N);return O.x+=q,O.y+=X,O}return ad},_42:function(f){this._99o&&nl.superClass._42.call(this,f)},_80o:function(M){var h,O=this,P=O.s,S=O._99o,N=S.position,W=S.rotation,Y=S.bodyColor,F=S.borderWidth,Q=S.selectWidth,E=S._53o,b=S._27Q,l=S._54o,f=S.points,s=S.segments,o=O._data.isClosePath();W&&(M.save(),Io(M,N.x,N.y),$e(M,W),Io(M,-N.x,-N.y));var $=S._60o,q=Gn(M,$),z=M.lineJoin,J=M.lineCap;if(M.lineJoin=S._62o,M.lineCap=S._61o,E||b?(b?$n(M,b):(h=Y?Y:E,Di(M,h,S.shapeGradient,S._59o,S.rect)),Rc(M,f,s,o),M.fill(),q!==M&&Rc(q,f,s,o)):Rc(q,f,s,o),Q&&(M.strokeStyle=S._97o,M.lineWidth=l+2*(F+Q),M.stroke()),F&&(M.strokeStyle=S.borderColor,M.lineWidth=l+2*F,M.stroke()),l&&(h=S._55o,!E&&Y&&(h=Y),M.strokeStyle=h,M.lineWidth=l,M.stroke(),S._94o&&El(M,h,S._95o,l,O.gv._zoom,S._96o)),jr(M,$),P("shape.dash")){var c=P("shape.dash.width")||l;if(c>0){$=P("shape.dash.pattern");var q=Gn(M,$,O._2Q("shape.dash.offset"));q!==M&&Rc(q,f,s,o),O._1Q(M,"shape",c,$)}}M.lineJoin=z,M.lineCap=J,W&&M.restore()},_48O:function(){var s=this;if(nl.superClass._48O.call(s),s._55O._43O){var V=s._data.getRect();mk(V,s.gv.getEditPointSize()/2+2),s._68o(V)}},_47O:function(E){var H=this;if(nl.superClass._47O.call(H,E),H._55O._43O){var k=H.gv,p=k.getEditPointSize()/2;E.fillStyle=k.getEditPointBackground(),E.strokeStyle=k.getEditPointBorderColor(),E.lineWidth=1,H._data.getPoints().each(function(D){E.beginPath(),E.arc(D.x,D.y,p,0,N,!0),E.fill(),E.stroke()})}}});var Bc=function(X,z){xi(Bc,this,[X,z])};Lk(Bc,nl,{getRotation:function(Y,h,j){Y=Y||0;var W=this._data.getPoints(),S=W.size();return S>1?Zk[j]?S&&0===S%2?_m(W.get(S/2-1),W.get(S/2),h,Y):Y:Hq[j]?_m(W.get(0),W.get(1),h,Y):_m(W.get(S-2),W.get(S-1),h,Y):Y},getPosition:function(l,$,g,d,B){var W=this._data.getPoints(),Z=W.size();if(Z>1){if(Zk[l]){var b=Z%2;if(0===b)return io(W.get(Z/2-1),W.get(Z/2),l,$,g,d,B);var k=W.get((Z-b)/2),C={x:k.x,y:k.y,width:0,height:0};return k=wb(l,C,d),k.x+=$,k.y+=g,k}return Hq[l]?io(W.get(0),W.get(1),l,$,g,d,B):io(W.get(Z-2),W.get(Z-1),l,$,g,d,B)}return ad}});var ag=function(N,E){xi(ag,this,[N,E])};Lk(ag,id,{_3O:function(){var p=this;ag.superClass._3O.call(p);var Y=p.s,b=p._83o;p._82o=b.img||b.shape?A:{background:p.getBodyColor("grid.background"),depth:Y("grid.depth"),rect:b.rect,_88o:Y("grid.cell.depth"),cellBorderColor:Y("grid.cell.border.color"),_89o:Y("grid.row.count"),_90o:Y("grid.column.count"),block:Y("grid.block"),_91o:Y("grid.block.color"),_92o:Y("grid.block.padding"),_93o:Y("grid.block.width")}},_80o:function(m){var _=this,g=_._82o;if(!g)return ag.superClass._80o.call(_,m),void 0;var B,D,I=_._data,j=g.background,E=g.rect,k=g.block,J=g._91o,Z=g._92o,p=g._93o,d=g._88o,u=g.cellBorderColor,R=g._89o,t=g._90o;if(j)if(Gg(m,E.x,E.y,E.width,E.height,j),cd(m,j,g.depth,E),d)for(B=0;R>B;B++)for(D=0;t>D;D++)E=I.getCellRect(B,D),E&&cd(m,j,d,E);else if(u){for(m.beginPath(),B=0;R>B;B++)for(D=0;t>D;D++)E=I.getCellRect(B,D),E&&m.rect(E.x,E.y,E.width,E.height);m.strokeStyle=u,m.lineWidth=1,m.stroke()}if("h"===k)for(B=0;R>B;B++)E=Yi(I.getCellRect(B,0),I.getCellRect(B,t-1)),mk(E,Z),Cq(m,J,E.x,E.y,E.width,E.height,p);else if("v"===k)for(D=0;t>D;D++)E=Yi(I.getCellRect(0,D),I.getCellRect(R-1,D)),mk(E,Z),Cq(m,J,E.x,E.y,E.width,E.height,p);_._39O(m,_._83o)}});var ih=uj.Interactor=function(f){this.gv=this._graphView=f};Op("Interactor",k,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(c){this.gv.fi(c)},setCursor:function(Z){F||(this.getView().style.cursor=Z)},startDragging:function(p){var i=this;i._lastClientPoint=Ce(p),i._lastLogicalPoint=i.gv.lp(p),_j(i,p)},clearDragging:function(){var n=this;n._lastClientPoint=n._lastLogicalPoint=n._logicalPoint=A},autoScroll:function(x){return this.gv.autoScroll(x,this._lastClientPoint)}});var ho=uj.DefaultInteractor=function(w){xi(ho,this,[w])};Op("DefaultInteractor",ih,{handle_mousedown:function(Q){sp(Q);var B=this,r=B.gv,W=r.getDataAt(Q);r.setFocus(Q)&&!r._editing&&(Mk(Q)?r.handleDoubleClick(Q,W):r.handleClick(Q,W),r.isPannable()&&!W&&Vp(Q)&&!gb(Q)&&(B._tx=r.tx(),B._ty=r.ty(),B.startDragging(Q)))},handleWindowMouseUp:function(Z){var l=this,L=l.gv;L._panning&&(delete L._panning,L.onPanEnded(),l.fi({kind:"endPan",event:Z})),delete l._tx,delete l._ty,l.clearDragging()},handle_mousemove:function(m){var s=this,O=s.gv;s._hoverTimer&&(Q(s._hoverTimer),delete s._hoverTimer),s._hoverTimer=z(function(){s.fi({kind:"hover",event:m}),Q(s._hoverTimer),delete s._hoverTimer},O.getHoverDelay()||800)},handle_touchmove:function(s){this.handle_mousemove(s)},handleWindowMouseMove:function(N){var F=this,n=F.gv,y=F._lastClientPoint;F.fi({kind:n._panning?"betweenPan":"beginPan",event:N}),n._panning=1,n.setTranslate(F._tx+N.clientX-y.x,F._ty+N.clientY-y.y)},handle_mousewheel:function(w){this.gv.handleScroll(w,w.wheelDelta)},handle_DOMMouseScroll:function(c){2===c.axis&&this.gv.handleScroll(c,-c.detail)},handle_keydown:function(H){this.gv.handleKeyDown(H)}});var xn=uj.SelectInteractor=function(J){xi(xn,this,[J])};Op("SelectInteractor",ih,{_42:function(){var c=this,u=c.gv,Q=u.getZoom(),j=c.mark,P=c.div;P||(P=c.div=hr(),qc(c.getView(),P));var a={};a.x=j.x*Q+u.tx(),a.y=j.y*Q+u.ty(),a.width=j.width*Q,a.height=j.height*Q,Xf(P,a),this.intersects()?(P.style.border="",P.style.background=u.getRectSelectBackground()):(P.style.background="",P.style.border="1px solid "+u.getRectSelectBorderColor())},handle_mousedown:function(t){var z=this,H=z.gv;if(z._57I=A,!H._editing){var M=H.getDataAt(t),w=H.sm();M?gb(t)?w.co(M)?w.rs(M):w.as(M):w.co(M)||w.ss(M):gb(t)||!H.isPannable()?Vp(t)&&(gb(t)||w.cs(),H.isRectSelectable()&&(z.startDragging(t),H._77O=1)):z._57I=Ce(t)}},handle_mouseup:function(k){var g=this,b=g._57I;b&&(Qd(b,Ce(k))<=1&&g.gv.sm().cs(),g._57I=A)},handleWindowMouseUp:function(g){this.clear(g)},handleWindowMouseMove:function(A){var p=this,x=p.gv;p._logicalPoint=x.lp(A),p.mark?(p.fi({kind:"betweenRectSelect",event:A}),p.autoScroll(A),p.redraw()):p.fi({kind:"beginRectSelect",event:A}),p.mark=ap(p._lastLogicalPoint,p._logicalPoint),p.redraw()},intersects:function(){var Q=this,t=Q._lastLogicalPoint,G=Q._logicalPoint;return t.x>G.x||t.y>G.y},clear:function(b){var F=this,E=F.gv,g=F.mark;if(F._57I=A,F._lastLogicalPoint){if(g){if(0!==g.width&&0!==g.height){var Z=E.getDatasInRect(g,F.intersects());if(!Z.isEmpty()){var W=E.sm(),s=W.toSelection();Z.each(function(x){W.co(x)?s.remove(x):s.add(x)}),W.ss(s)}}ip(F.div),delete F.div,delete F.mark,F.redraw(),F.fi({kind:"endRectSelect",event:b}),E.onRectSelectEnded()}F.clearDragging(),delete E._77O}},redraw:function(){var K=this;K._draw||(K._draw=1,z(function(){K.mark&&K._42(),delete K._draw},16))}});var td=uj.MoveInteractor=function(B){xi(td,this,[B])};Op("MoveInteractor",ih,{handle_mousedown:function(z){var w=this,e=w.gv;if(Vp(z)&&!e._editing){var l=e.getSelectedDataAt(z);l?(w._data=l,e.handleMouseDown&&e.handleMouseDown(z,l),w.startDragging(z),e.isMovable(l)&&(e._moving=1)):e._focusData=A}},handleWindowMouseUp:function(W){var b=this,t=b.gv;t.handleMouseUp&&t.handleMouseUp(W,b._data),b.clear(W)},handleWindowMouseMove:function(b){var V=this,$=V.gv,c=V._data,Q=$.getDataModel(),e=Q.getHistoryManager();if((!$._93O||!$._93O(b,c))&&$._moving){var p=V._logicalPoint?"betweenMove":"beginMove",J={kind:p,event:b},x=V._logicalPoint=$.lp(b);e&&"beginMove"===p&&e.beginInteraction();var X=x.x-V._lastLogicalPoint.x,N=x.y-V._lastLogicalPoint.y,o=$.getMoveMode(b,c);o&&("x"===o?N=0:"y"===o?X=0:"xy"!==o&&(X=N=0)),$.moveSelection(X,N),V._lastLogicalPoint=x,V.autoScroll(b),V.fi(J)}},clear:function(E){var n=this,Z=n.gv,X=Z.getDataModel(),r=X.getHistoryManager();n._lastLogicalPoint&&(n._lastLogicalPoint=n._data=Z._moving=A,n._logicalPoint&&(n.fi({kind:"endMove",event:E}),Z.onMoveEnded(),r&&r.endInteraction()),n.clearDragging())}});var Vg=uj.EditInteractor=function(T){xi(Vg,this,[T])};Op("EditInteractor",ih,{ms_edit:1,setUp:function(){var l=this;Vg.superClass.setUp.call(l),F||l.gv.setEditInteractor(l)},tearDown:function(){Vg.superClass.tearDown.call(this),F||this.gv.setEditInteractor(A)},clear:function(){var Z=this,O=Z.gv;O._editing&&(O._editing=Z._77I=Z._node=Z._edge=Z._shape=Z._rect=Z._89I=Z._index=A,Z.clearDragging(),Z.setCursor(i))},handle_mousedown:function(b){var j=this,Z=j.gv.dm(),q=Z.getHistoryManager(),m=j._index,T=j._node,L=j._shape,f=j._edge,t=j._77I,u=j._89I;Vp(b)&&j.gv._editing&&(T&&u?(j._rect=T.getRect(),j.startDragging(b),q&&q.beginInteraction(),j.fi({kind:"beginEditRect",event:b,data:T,direction:u})):L&&m>=0?(j.startDragging(b),q&&q.beginInteraction(),j.fi({kind:"beginEditPoint",event:b,data:L,index:m})):f&&m>=0?(j.startDragging(b),q&&q.beginInteraction(),j.fi({kind:"beginEditPoint",event:b,data:f,index:m})):t&&(j.startDragging(b),q&&q.beginInteraction(),j.fi({kind:"beginEditRotation",event:b,data:t})))},handleWindowMouseUp:function(G){this._46O(G),this.clear()},handleWindowMouseMove:function(v){this._78I(v)},handle_mousemove:function(w){if(!Ji){var X=this,Y=X.gv;X._79I(w,Y.getSelectedDataAt(w))?Y._editing=1:X.clear()}}});var ii=uj.TouchInteractor=function(M,Z){Z=Z||{},Z.selectable===d&&(Z.selectable=!0),Z.movable===d&&(Z.movable=!0),Z.pannable===d&&(Z.pannable=!0),Z.pinchable===d&&(Z.pinchable=!0),Z.editable===d&&(Z.editable=!0),this.params=Z,xi(ii,this,[M])};Op("TouchInteractor",ih,{ms_edit:1,setUp:function(){var u=this;ii.superClass.setUp.call(u),F&&u.params.editable&&u.gv.setEditInteractor(u)},tearDown:function(){var Y=this;ii.superClass.tearDown.call(Y),F&&Y.params.editable&&Y.gv.setEditInteractor(A)},clear:function(N){var C=this,n=C.gv,s=n.dm().getHistoryManager();n._moving&&(C.fi({kind:"endMove",event:N}),delete n._moving,n.onMoveEnded(),s&&s.endInteraction()),n._panning&&(C.fi({kind:"endPan",event:N}),delete n._panning,n.onPanEnded()),n._pinching&&(C.fi({kind:"endPinch",event:N}),delete n._pinching,n.onPinchEnded()),n._editing&&(C._46O(N),C._77I=C._node=C._edge=C._shape=C._rect=C._89I=C._index=n._editing=A),C._moving=C._panning=C._pinching=C._editing=C._57I=C._data=C._beginHistory=A,C.clearDragging()},handle_touchstart:function(e){var I=this;if(!I.gv._editing){sp(e),I._57I=A;var P=I.params,$=I.gv,S=$.sm(),g=$.getDataAt(e),h=_h(e);if(1===h)Mk(e)?$.handleDoubleClick(e,g):($.handleClick(e,g),g&&($.handleMouseDown&&$.handleMouseDown(e,g),I._data=g)),P.selectable||(g=A),g?(S.co(g)||S.ss(g),P.editable&&$.isEditable(g)&&I._79I(e,g,!0)?(I._editing=1,I.startDragging(e)):P.movable&&$.isMovable(g)&&(I._moving=1,I.startDragging(e))):(I._57I=Ce(e),P.pannable&&$.isPannable()&&(I._panning=1,I.startDragging(e),I._translate={x:$.tx(),y:$.ty()}));else if(P.pinchable&&2===h){I._pinching=1,I.startDragging(e);var F=$.getView(),N=$.getZoom(),q=F.getBoundingClientRect(),c=e.touches[0],w=e.touches[1],x={x:(c.clientX+w.clientX)/2-q.left,y:(c.clientY+w.clientY)/2-q.top};x.x-=$.tx(),x.y-=$.ty(),x.x/=N,x.y/=N,I._p=x,I._d=xj(e)}}},handle_touchend:function(v){var h=this,Z=h.gv,Y=h._57I,z=h._data;Y&&(Qd(Y,Ce(v))<=1&&Z.sm().cs(),h._57I=A),z&&Z.handleMouseUp&&Z.handleMouseUp(v,z)},handleWindowTouchEnd:function(k){this.clear(k)},handleWindowTouchMove:function(E){var n=this,h=n.gv,i=h.dm().getHistoryManager(),X=_h(E);if(1===X){if(n._editing&&(i&&!n._beginHistory&&(n._beginHistory=1,i.beginInteraction()),h._editing=1,n._78I(E)),n._moving)i&&!n._beginHistory&&(n._beginHistory=1,i.beginInteraction()),n.handleMove(E);else if(n._panning){var O=Ce(E);h.setTranslate(n._translate.x+O.x-n._lastClientPoint.x,n._translate.y+O.y-n._lastClientPoint.y),n.fi({kind:h._panning?"betweenPan":"beginPan",event:E}),h._panning=1}}else if(2===X&&n._pinching){var U=xj(E);h.handlePinch(n._p,U,n._d),n._d=U,n.fi({kind:h._pinching?"betweenPinch":"beginPinch",event:E}),h._pinching=1}},handleMove:function(W){var e=this,O=e.gv,F=O.lp(W);O._93O&&O._93O(W,e._data)||(O.moveSelection(F.x-e._lastLogicalPoint.x,F.y-e._lastLogicalPoint.y),e._lastLogicalPoint=F,e.autoScroll(W),e.fi({kind:O._moving?"betweenMove":"beginMove",event:W}),O._moving=1)}});var Ei="directional",ms="point",dj="spot",ks="light.color";tq(j,{graph3dViewAttributes:A,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:n/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Po,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:n/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(B,T){ki[B]=T},getShape3dModel:function(y){return ki[y]},createMatrix:function(z,H){Uh(z)||(z=[z]);for(var c=z.length-1;c>=0;c--){var n=z[c];H=Ld(n.mat,n.s3,n.r3,n.rotationMode,n.t3,H)}return H},transformVec:function(F,Z){return le(F,Z)},createBoxModel:function(){return{vs:Zn,ns:yj,uv:Sh,is:Ko}},createRoundRectModel:function(J,N){return kl.roundRect(J,N)},createStarModel:function(S,I){return kl.star(S,I)},createRectModel:function(H,x){return kl.rect(H,x)},createTriangleModel:function(X,U){return kl.triangle(X,U)},createRightTriangleModel:function(k,p){return kl.rightTriangle(k,p)},createParallelogramModel:function(s,L){return kl.parallelogram(s,L)},createTrapezoidModel:function(o,J){return kl.trapezoid(o,J)},createSmoothSphereModel:function(h,C,m,i,G,p,t){return vr(new Br(h,C,m,i,G,p,t))},createSphereModel:function(Q,o,P,M,L,W){return Q?Yr(Q,o,P,M,L,W):j.createSmoothSphereModel()},createSmoothConeModel:function(n,W,O,H,q){return xh(n,W,O,H,q)},createConeModel:function(f,b,u,m,v,r){return f?jc(f,b,u,m,v,r):xh(r)},createSmoothCylinderModel:function(N,o,t,C,V,K,y,E){return vr(new gj(N,o,t,C,V,K,y,E))},createCylinderModel:function(V,J,j,p,I,q,Y){return V?Wo(V,J,j,p,I,q,Y):Wm(q,Y)},createSmoothTorusModel:function(d,n,g,i,Y,$){return vr(new ed(d,n,g,i,Y,$))},createTorusModel:function(Q,U,A,$,p,t,r){return Q?Bm(Q,U,A,$,p,t,r):Er(t,r)},createExtrusionModel:function(B,n,X,u,U,R,r,l){return Ph(B,n,X,u,U,R,r,l)},createSmoothRingModel:function(s,S,h,m,R,H){for(var l=[],g=0;g<s.length-1;g+=2)l.push({x:s[g],y:s[g+1]});for(s=Jl(l,S,h)[0],l=[],g=0;g<s.length;g++){var E=s[g];l.push(new xo(E.x,0,E.y))}return vr(new Yf(l,H,m,R))},createRingModel:function(O,R,x,l,M,$,q,E,P,Q){for(var S=[],u=0;u<O.length-1;u+=2)S.push({x:O[u],y:O[u+1]});$=$||j.shapeSide,q=q||0,E=E||$;var s,G,W,N,B,K,h,p,d,g,u,F,I,w,r,f,X,k,c=[],n=[],Y=P?[]:A,Z=P?[]:A,C=Q?[]:A,b=Q?[]:A,t=l?[]:A,a=l?[]:A,i=M?[]:A,J=M?[]:A,O=Jl(S,R,x),y=Ob(O),T=0,H=2*Math.PI/$;return O.forEach(function(j){if(W=j.length,W>1){if(N=j[0],l)for(K=N.x,p=N.y,u=q;E>u;u++)F=u+1,I=u*H,w=F*H,r=U(I),f=m(I),X=U(w),k=m(w),t.push(r*K,p,-f*K,X*K,p,-k*K,0,p,0),a.push(.5-.5*r,.5-.5*f,.5-.5*X,.5-.5*k,.5,.5);for(g=0;W>g;g++){for(B=j[g],K=N.x,h=B.x,p=N.y,d=B.y,s=T/y,T+=Qd(N,B),G=T/y,u=q;E>u;u++)F=u+1,I=u*H,w=F*H,r=U(I),f=m(I),X=U(w),k=m(w),c.push(r*h,d,-f*h,X*h,d,-k*h,r*K,p,-f*K,X*h,d,-k*h,X*K,p,-k*K,r*K,p,-f*K),n.push(u/$,G,F/$,G,u/$,s,F/$,G,F/$,s,u/$,s),P&&u===q&&(Y.push(0,p,0,0,d,0,r*h,d,-f*h,r*h,d,-f*h,r*K,p,-f*K,0,p,0),Z.push(0,.5-p,0,.5-d,2*h,.5-d,2*h,.5-d,2*K,.5-p,0,.5-p)),Q&&F===E&&(C.push(0,p,0,X*h,d,-k*h,0,d,0,X*h,d,-k*h,0,p,0,X*K,p,-k*K),b.push(1,.5-p,1-2*h,.5-d,1,.5-d,1-2*h,.5-d,1,.5-p,1-2*K,.5-p));N=B}if(M)for(K=N.x,p=N.y,u=q;E>u;u++)F=u+1,I=u*H,w=F*H,r=U(I),f=m(I),X=U(w),k=m(w),i.push(X*K,p,-k*K,r*K,p,-f*K,0,p,0),J.push(.5-.5*X,.5+.5*k,.5-.5*r,.5+.5*f,.5,.5)}}),{vs:c,uv:n,bottom_vs:i,bottom_uv:J,top_vs:t,top_uv:a,from_vs:Y,from_uv:Z,to_vs:C,to_uv:b}}},!0),tq(V,{"3d.move.mode":d,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":d,"edge.gradient.color":d,"edge.source.t3":d,"edge.target.t3":d,"light.type":ms,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":n/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Iq,"wf.short":!1,"wf.mat":d,batch:d,"transparent.mask":!1,brightness:d,"select.brightness":.7,"repeat.uv.length":d,"label.face":Li,"label.t3":d,"label.r3":d,"label.texture.scale":2,"label.rotationMode":Ag,"label.light":!1,"label.blend":d,"label.reverse.flip":!1,"label.reverse.color":Ul,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Li,"label2.t3":d,"label2.r3":d,"label2.texture.scale":2,"label2.rotationMode":Ag,"label2.light":!1,"label2.blend":d,"label2.reverse.flip":!1,"label2.reverse.color":Ul,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Li,"note.t3":d,"note.r3":d,"note.texture.scale":2,"note.rotationMode":Ag,"note.light":!1,"note.blend":d,"note.reverse.flip":!1,"note.reverse.color":Ul,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Li,"note2.t3":d,"note2.r3":d,"note2.texture.scale":2,"note2.rotationMode":Ag,"note2.light":!1,"note2.blend":d,"note2.reverse.flip":!1,"note2.reverse.color":Ul,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:d,"shape3d.color":fp,"shape3d.top.color":d,"shape3d.bottom.color":d,"shape3d.from.color":d,"shape3d.to.color":d,"shape3d.image":d,"shape3d.top.image":d,"shape3d.bottom.image":d,"shape3d.from.image":d,"shape3d.to.image":d,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":d,"shape3d.side.to":d,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":d,"shape3d.opacity":d,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Ul,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":d,"shape3d.uv.scale":d,"shape3d.top.uv.offset":d,"shape3d.top.uv.scale":d,"shape3d.bottom.uv.offset":d,"shape3d.bottom.uv.scale":d,"shape3d.from.uv.offset":d,"shape3d.from.uv.scale":d,"shape3d.to.uv.offset":d,"shape3d.to.uv.scale":d,"shape3d.top.cap":d,"shape3d.bottom.cap":d,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":fp,"all.image":d,"all.blend":d,"all.opacity":d,"all.reverse.flip":!1,"all.reverse.color":Ul,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":d,"all.uv.offset":d,"all.uv.scale":d,"all.discard.selectable":!0,mat:d,"left.mat":d,"right.mat":d,"top.mat":d,"bottom.mat":d,"front.mat":d,"back.mat":d},!0);
var ue,nr=!1,Mr=[0,0,0,1/255],Kc={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:yi,2:Tg,3:Fe,4:Fd,5:Li,6:Cn}},ls=function(N,j,A,k){if(j.getFaceVisible(N,A)){wg(j,cf(N,j.getFaceMat(N,A)||j.getMat(N)));var a=j._26I;j.getFaceReverseCull(N,A)?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),mn(a,j._prg.uFixPickReverseColor,Kc[A]),Sl(a),ce(a,k,6),_p(a),bn(j)}},Kq=function(z){return z instanceof Kd},Hl=function(r){return[r.x,r.e||0,r.y]},Lq=function(c,V,l){for(var V=br(V),n=V[0],U=V[1],q=V[2];l--;)c.push(n,U,q)},Xn=function(_,U,h){for(var U=br(U),t=U[0],G=U[1],u=U[2],A=U[3];h--;)_.push(t,G,u,A)},Nc=function(N,b,v){if(b)for(var m,o,O,q=b[0],Y=b[1],E=b[2],K=b[4],h=b[5],d=b[6],W=b[8],T=b[9],e=b[10],i=b[12],X=b[13],A=b[14],u=v.length,y=0,y=0;u>y;y+=3)m=v[y],o=v[y+1],O=v[y+2],N.push(q*m+K*o+W*O+i,Y*m+h*o+T*O+X,E*m+d*o+e*O+A);else gi(N,v)},qo=function(p,r){var t=r.s("light.intensity"),i=br(r.s(ks)),a=i[0],w=i[1],z=i[2];1!==t&&(a*=t,w*=t,z*=t),p.push(a,w,z,r.s("light.disabled")?1:0)},dd=function(t,Y,h){mn(Y,h.uHeadlightRange,t._headlightRange);var C=t._headlightIntensity,R=br(t._headlightColor);1!==C&&(R=[R[0]*C,R[1]*C,R[2]*C]),mn(Y,h.uHeadlightColor,[R[0],R[1],R[2],t._headlightDisabled?1:0]);var c=t._59O,X=t._spots,S=t._dirs;if(c.length){var k=[],L=[],s=[];c.forEach(function(v){qo(k,v),gi(L,v.p3()),s.push(v.s("light.range"))}),Y.uniform4fv(h.uPointColor,k),Y.uniform1fv(h.uPointRange,s),Y.uniform3fv(h.uPointPosition,L)}if(X.length){var F=[],e=[],E=[],P=[],w=[],D=[];X.forEach(function(m){qo(F,m),gi(e,m.p3()),gi(E,m.s("light.center")),P.push(m.s("light.range")),w.push(U(m.s("light.angle")/2)),D.push(m.s("light.exponent"))}),Y.uniform4fv(h.uSpotColor,F),Y.uniform1fv(h.uSpotRange,P),Y.uniform1fv(h.uSpotAngle,w),Y.uniform1fv(h.uSpotExponent,D),Y.uniform3fv(h.uSpotPosition,e),Y.uniform3fv(h.uSpotCenter,E)}if(S.length){var G=[],Z=[];S.forEach(function(S){qo(G,S),gi(Z,S.p3())}),Y.uniform4fv(h.uDirColor,G),Y.uniform3fv(h.uDirPosition,Z)}},fb=function(B){return B>0&&0===(B-1&B)},up=function(Y){return Y=C(0,$(n,Y)),Y=C(fs,$(n-fs,Y))},ys=function(){return.05+a()/2},Tk=function(D,R,z,M){var s,o=D.getEye();return D.isOrtho()?(s=jf(D.getCenter(),o),s[0]+=M[0],s[1]+=M[1],s[2]+=M[2]):s=o,bm(R,z,M,s)},bm=function(M,G,H,X){var E=ub(M,G),v=jf(X,H,!0),u=ub(v,G);if(O(u)<fs)return A;var Q=(E-ub(H,G))/u;return[H[0]+v[0]*Q,H[1]+v[1]*Q,H[2]+v[2]*Q]},kn=function(R,F){return{x:2*R.x-F.x,y:2*R.y-F.y}},Rn=function(o,x,W,u){var X,v;if(!o)return X=_(x.y-W.y,W.x-x.x),{x:x.x+u*m(X),y:x.y+u*U(X)};if(!W)return X=_(o.y-x.y,x.x-o.x),{x:x.x+u*m(X),y:x.y+u*U(X)};var q=jf([o.x,o.y,0],[x.x,x.y,0],!0),J=jf([W.x,W.y,0],[x.x,x.y,0],!0),l=-(q[0]+J[0])/2,f=-(q[1]+J[1])/2,j=s(l*l+f*f);return fs>j?(X=_(o.y-x.y,x.x-o.x),{x:x.x+u*m(X),y:x.y+u*U(X)}):(X=R(ub(q,J))/2,v=q[1]*J[0]-q[0]*J[1]>0?-1:1,l/=j,f/=j,j=u/m(X),{x:x.x+v*j*l,y:x.y+v*j*f})},pm=function(l){var F=l[1],T=l[2],j=l[3],L=l[6],J=l[7],d=l[11];l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=F,l[6]=l[9],l[7]=l[13],l[8]=T,l[9]=L,l[11]=l[14],l[12]=j,l[13]=J,l[14]=d},qb=function(p){var Z=p[0],X=p[1],a=p[2],V=p[3],o=p[4],b=p[5],Q=p[6],z=p[7],N=p[8],O=p[9],$=p[10],R=p[11],F=p[12],J=p[13],Y=p[14],l=p[15],x=Z*b-X*o,d=Z*Q-a*o,T=Z*z-V*o,G=X*Q-a*b,B=X*z-V*b,L=a*z-V*Q,f=N*J-O*F,j=N*Y-$*F,i=N*l-R*F,g=O*Y-$*J,q=O*l-R*J,E=$*l-R*Y,M=x*E-d*q+T*g+G*i-B*j+L*f;return M?(M=1/M,p[0]=(b*E-Q*q+z*g)*M,p[1]=(a*q-X*E-V*g)*M,p[2]=(J*L-Y*B+l*G)*M,p[3]=($*B-O*L-R*G)*M,p[4]=(Q*i-o*E-z*j)*M,p[5]=(Z*E-a*i+V*j)*M,p[6]=(Y*T-F*L-l*d)*M,p[7]=(N*L-$*T+R*d)*M,p[8]=(o*q-b*i+z*f)*M,p[9]=(X*i-Z*q-V*f)*M,p[10]=(F*B-J*T+l*x)*M,p[11]=(O*T-N*B-R*x)*M,p[12]=(b*j-o*g-Q*f)*M,p[13]=(Z*g-X*j+a*f)*M,p[14]=(J*d-F*G-Y*x)*M,p[15]=(N*G-O*d+$*x)*M,void 0):A},ug=function(d,K){if(K){var B=K[0],Q=K[1],y=K[2];d[12]=d[0]*B+d[4]*Q+d[8]*y+d[12],d[13]=d[1]*B+d[5]*Q+d[9]*y+d[13],d[14]=d[2]*B+d[6]*Q+d[10]*y+d[14],d[15]=d[3]*B+d[7]*Q+d[11]*y+d[15]}},Mj=function(F,G){if(G){var y=G[0],U=G[1],L=G[2];F[0]=F[0]*y,F[1]=F[1]*y,F[2]=F[2]*y,F[3]=F[3]*y,F[4]=F[4]*U,F[5]=F[5]*U,F[6]=F[6]*U,F[7]=F[7]*U,F[8]=F[8]*L,F[9]=F[9]*L,F[10]=F[10]*L,F[11]=F[11]*L}},yp=function(r,n,U){var J=n[0],q=n[1],T=n[2],j=n[3],z=n[4],c=n[5],C=n[6],y=n[7],Z=n[8],N=n[9],Q=n[10],P=n[11],d=n[12],E=n[13],a=n[14],B=n[15],F=U[0],w=U[1],O=U[2],m=U[3];return r[0]=F*J+w*z+O*Z+m*d,r[1]=F*q+w*c+O*N+m*E,r[2]=F*T+w*C+O*Q+m*a,r[3]=F*j+w*y+O*P+m*B,F=U[4],w=U[5],O=U[6],m=U[7],r[4]=F*J+w*z+O*Z+m*d,r[5]=F*q+w*c+O*N+m*E,r[6]=F*T+w*C+O*Q+m*a,r[7]=F*j+w*y+O*P+m*B,F=U[8],w=U[9],O=U[10],m=U[11],r[8]=F*J+w*z+O*Z+m*d,r[9]=F*q+w*c+O*N+m*E,r[10]=F*T+w*C+O*Q+m*a,r[11]=F*j+w*y+O*P+m*B,F=U[12],w=U[13],O=U[14],m=U[15],r[12]=F*J+w*z+O*Z+m*d,r[13]=F*q+w*c+O*N+m*E,r[14]=F*T+w*C+O*Q+m*a,r[15]=F*j+w*y+O*P+m*B,r},fg=function(P,H,l,m){var a,U,t,R,k,V,j,e,q,g,r=H[0],u=H[1],G=H[2],Z=m[0],N=m[1],S=m[2],T=l[0],$=l[1],p=l[2];return O(r-T)<fs&&O(u-$)<fs&&O(G-p)<fs?mf(P):(j=r-T,e=u-$,q=G-p,g=1/s(j*j+e*e+q*q),j*=g,e*=g,q*=g,a=N*q-S*e,U=S*j-Z*q,t=Z*e-N*j,g=s(a*a+U*U+t*t),g?(g=1/g,a*=g,U*=g,t*=g):(a=0,U=0,t=0),R=e*t-q*U,k=q*a-j*t,V=j*U-e*a,g=s(R*R+k*k+V*V),g?(g=1/g,R*=g,k*=g,V*=g):(R=0,k=0,V=0),P[0]=a,P[1]=R,P[2]=j,P[3]=0,P[4]=U,P[5]=k,P[6]=e,P[7]=0,P[8]=t,P[9]=V,P[10]=q,P[11]=0,P[12]=-(a*r+U*u+t*G),P[13]=-(R*r+k*u+V*G),P[14]=-(j*r+e*u+q*G),P[15]=1,P)},si=function(o,d,f,I,L){var R=1/c(d/2),H=1/(I-L);return o[0]=R/f,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=R,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(L+I)*H,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*L*I*H,o[15]=0,o},wo=function(z,r,K,I,Q,J,X){var E=1/(r-K),Z=1/(I-Q),s=1/(J-X);return z[0]=-2*E,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*Z,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*s,z[11]=0,z[12]=(r+K)*E,z[13]=(Q+I)*Z,z[14]=(X+J)*s,z[15]=1,z},lm=function(G,B){var L=B[0],d=B[1],T=B[2],S=B[3],U=L*L+d*d+T*T+S*S,c=U?1/U:0;return G[0]=-L*c,G[1]=-d*c,G[2]=-T*c,G[3]=S*c,G},wd=function(Z,f){var t=f[0]+f[5]+f[10],z=0;return t>0?(z=2*Math.sqrt(t+1),Z[3]=.25*z,Z[0]=(f[6]-f[9])/z,Z[1]=(f[8]-f[2])/z,Z[2]=(f[1]-f[4])/z):f[0]>f[5]&f[0]>f[10]?(z=2*Math.sqrt(1+f[0]-f[5]-f[10]),Z[3]=(f[6]-f[9])/z,Z[0]=.25*z,Z[1]=(f[1]+f[4])/z,Z[2]=(f[8]+f[2])/z):f[5]>f[10]?(z=2*Math.sqrt(1+f[5]-f[0]-f[10]),Z[3]=(f[8]-f[2])/z,Z[0]=(f[1]+f[4])/z,Z[1]=.25*z,Z[2]=(f[6]+f[9])/z):(z=2*Math.sqrt(1+f[10]-f[0]-f[5]),Z[3]=(f[1]-f[4])/z,Z[0]=(f[8]+f[2])/z,Z[1]=(f[6]+f[9])/z,Z[2]=.25*z),Z},as=function(G,t,T){var w=t[0],i=t[1],k=t[2],s=t[3],h=w+w,x=i+i,E=k+k,g=w*h,L=w*x,r=w*E,O=i*x,U=i*E,B=k*E,e=s*h,n=s*x,R=s*E;return G[0]=1-(O+B),G[1]=L+R,G[2]=r-n,G[3]=0,G[4]=L-R,G[5]=1-(g+B),G[6]=U+e,G[7]=0,G[8]=r+n,G[9]=U-e,G[10]=1-(g+O),G[11]=0,G[12]=T[0],G[13]=T[1],G[14]=T[2],G[15]=1,G},Qg=function(M,Q){return fg(Q?Q:tj(),M._eye,M._center,M._up)},qm=function(o){var A=o.getAspect(),e=o._near,u=o._far,h=tj();if(o._ortho){var z=o._orthoWidth/2,V=z/A;wo(h,-z,z,-V,V,e,u)}else si(h,o._fovy,A,e,u);return h},ol=function(O,R){if(!O)return A;var g=0,p=1,Z=2,G=[],n=0,C=O.length,r=C/3;if(R){for(;C>n;n++)G[n]=0;for(n=0;n<R.length;n+=3){var L=[],M=[],H=[];L[g]=O[3*R[n+1]+g]-O[3*R[n]+g],L[p]=O[3*R[n+1]+p]-O[3*R[n]+p],L[Z]=O[3*R[n+1]+Z]-O[3*R[n]+Z],M[g]=O[3*R[n+2]+g]-O[3*R[n+1]+g],M[p]=O[3*R[n+2]+p]-O[3*R[n+1]+p],M[Z]=O[3*R[n+2]+Z]-O[3*R[n+1]+Z],H[g]=L[p]*M[Z]-L[Z]*M[p],H[p]=L[Z]*M[g]-L[g]*M[Z],H[Z]=L[g]*M[p]-L[p]*M[g];for(var Q=0;3>Q;Q++)G[3*R[n+Q]+g]+=H[g],G[3*R[n+Q]+p]+=H[p],G[3*R[n+Q]+Z]+=H[Z]}}else for(n=0;r>n;n+=3){var L=[],M=[],H=[];L[g]=O[3*(n+1)+g]-O[3*n+g],L[p]=O[3*(n+1)+p]-O[3*n+p],L[Z]=O[3*(n+1)+Z]-O[3*n+Z],M[g]=O[3*(n+2)+g]-O[3*(n+1)+g],M[p]=O[3*(n+2)+p]-O[3*(n+1)+p],M[Z]=O[3*(n+2)+Z]-O[3*(n+1)+Z],H[g]=L[p]*M[Z]-L[Z]*M[p],H[p]=L[Z]*M[g]-L[g]*M[Z],H[Z]=L[g]*M[p]-L[p]*M[g];for(var Q=0;3>Q;Q++)G[3*(n+Q)+g]=H[g],G[3*(n+Q)+p]=H[p],G[3*(n+Q)+Z]=H[Z]}for(n=0;C>n;n+=3){var w=[];w[g]=G[n+g],w[p]=G[n+p],w[Z]=G[n+Z];var U=s(w[g]*w[g]+w[p]*w[p]+w[Z]*w[Z]);0===U&&(U=fs),w[g]=w[g]/U,w[p]=w[p]/U,w[Z]=w[Z]/U,G[n+g]=w[g],G[n+p]=w[p],G[n+Z]=w[Z]}return new ar(G)},on=function(d,s,B){if(B||(B=d.createTexture()),s){var K=d.TEXTURE_2D,W=d.LINEAR,_=d.REPEAT,J=d.CLAMP_TO_EDGE,G=d.TEXTURE_MIN_FILTER;rf(d,B),d.texImage2D(K,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,s),Pi(d,d.TEXTURE_MAG_FILTER,W),fb(s.width)&&fb(s.height)?(Pi(d,d.TEXTURE_WRAP_S,_),Pi(d,d.TEXTURE_WRAP_T,_),Pi(d,G,d.LINEAR_MIPMAP_LINEAR),d.generateMipmap(K)):(Pi(d,d.TEXTURE_WRAP_S,J),Pi(d,d.TEXTURE_WRAP_T,J),Pi(d,G,W)),rf(d,A)}return B},_q=function(S,U){var K=new Uint8Array(3);return U=U||S.createTexture(),rf(S,U),Pi(S,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texImage2D(S.TEXTURE_2D,0,S.RGB,1,1,0,S.RGB,S.UNSIGNED_BYTE,K),U},ef=function(N){N._26I&&N._prg&&(N._26I.deleteProgram(N._prg),N._prg=A)},pi=function(V,O,i,_){var T=V.createShader(i);return V.shaderSource(T,_),V.compileShader(T),V.attachShader(O,T),T},dc=function(n){return n.createBuffer()},rf=function(x,o){x.bindTexture(x.TEXTURE_2D,o)},em=function(G,F){G.bindFramebuffer(G.FRAMEBUFFER,F)},Pi=function(z,L,$){z.texParameteri(z.TEXTURE_2D,L,$)},gl=function(i,D){if(D){var D=br(D);i.clearColor(D[0],D[1],D[2],D[3])}},sm=function(H,J){mn(H,J.uFix,!0),rd(H,J.aNormal)},Ml=function(F,r){mn(F,r.uFix,!1),_f(F,r.aNormal)},qk=function($,o,k,S,X,s,n,Y){$._picking||(k?(mn($,o.uBlend,!0),mn($,o.uBlendColor,k)):mn($,o.uBlend,!1),mn($,o.uLight,S==A?!0:S),Sj(X)&&1!==X&&mn($,o.uPartOpacity,X),mn($,o.uReverseFlip,s==A?!1:s),mn($,o.uFixPickReverseColor,n||Ul)),Y?$.enable($.CULL_FACE):$.disable($.CULL_FACE)},Gh=function(J,R){J._picking||mn(J,R.uPartOpacity,1)},Sl=function(s,K,l,b,n,h,W,o){if(!l)return rf(s,s._emptyTexture),void 0;mn(s,K.uTexture,!0),mn(s,K.uDiscardSelectable,Nm(b)?b:!0),_f(s,K.aUv),dp(s,n,h,K.aUv,2),s.activeTexture(s.TEXTURE0),rf(s,l),s.uniform1i(K.uSampler,0);var Z=[0,0,1,1];W&&(Z[0]=W[0],Z[1]=W[1]),o&&(Z[2]=o[0],Z[3]=o[1]),mn(s,K.uOffsetScale,Z)},_p=function(j,O,z){rf(j,A),z&&(rd(j,O.aUv),mn(j,O.uTexture,!1))},Dh=function(S,Y,U,m,$,G){U&&!I&&S.lineWidth(U),m&&!S._picking&&mn(S,Y.uFixPickReverseColor,m),$&&dp(S,$,G,Y.aPosition)},We=function(H,d,o,e){ue&&(e=H[ue]),H.drawArrays(e==A?H.TRIANGLES:e,d,o)},ce=function(M,U,i,P){ue&&(P=M[ue]),M.drawElements(P==A?M.TRIANGLES:P,i,M.UNSIGNED_SHORT,U==A?0:2*U)},dp=function(V,e,D,M,w){var y=V.ARRAY_BUFFER;V.bindBuffer(y,e),D&&V.bufferData(y,D,V.STATIC_DRAW),M!=A&&V.vertexAttribPointer(M,w?w:3,V.FLOAT,!1,0,0)},Ac=function(H,a,u){var G=H.ELEMENT_ARRAY_BUFFER;H.bindBuffer(G,a),u&&H.bufferData(G,u,H.STATIC_DRAW)},mn=function(b,O,g){if(g!=A&&O!=A){g=br(g);var x=g.length;3===x?b.uniform3fv(O,g):4===x?b.uniform4fv(O,g):16===x?b.uniformMatrix4fv(O,!1,g):Nm(g)?b.uniform1i(O,g?1:0):2===x?b.uniform2fv(O,g):b.uniform1f(O,g)}},_f=function(V,z){z!=A&&z>=0&&V.enableVertexAttribArray(z)},rd=function(Z,g){g!=A&&g>=0&&Z.disableVertexAttribArray(g)},bn=function(U,D){var N=U.getGL(),T=U._prg;U._7O=U._8O.pop(),D&&(mn(N,T.uMVMatrix,U._7O),U._6O=D,mn(N,T.uNMatrix,D))},zs=function(E,W){return W||(W=tj()),rh(W,E),qb(W),pm(W),W},wg=function(B,r){var w=B.getGL(),g=B._prg,L=B._7O;r&&(B._8O.push(Ur(L)),yp(L,L,r)),mn(w,g.uMVMatrix,L),mn(w,g.uNMatrix,zs(L,B._6O))},Ne=function(g,T,J,n,b,r){if(J){if(n){var C=J.value++,E=[(255&C>>24)/255,(255&C>>16)/255,(255&C>>8)/255,(255&C)/255];J[C]={data:b,part:r}}else E=Mr;return mn(g,T.uFixPickReverseColor,E),E}},zb=function(){var K={center:function(x,f,o,H,C){var _=f[1]/2,q={x:-f[0]/2,y:_,width:f[0],height:f[1]},h=wb(x,q,o);return[h.x+H,2*_-h.y-C,ys()]},front:function(t,G,v,D,W){var X=G[1]/2,r={x:-G[0]/2,y:X,width:G[0],height:G[1]},g=wb(t,r,v);return[g.x+D,2*X-g.y-W,G[2]/2+ys()]},back:function(n,q,r,I,$){var h=q[0]/2,m=q[1]/2,E={x:h,y:m,width:q[0],height:q[1]},N=wb(n,E,r);return[2*h-N.x-I,2*m-N.y-$,-q[2]/2-ys()]},left:function(C,d,S,B,e){var $=d[1]/2,Z={x:-d[2]/2,y:$,width:d[2],height:d[1]},o=wb(C,Z,S);return[-d[0]/2-ys(),2*$-o.y-e,o.x+B]},right:function(o,r,l,$,J){var m=r[2]/2,e=r[1]/2,w={x:m,y:e,width:r[2],height:r[1]},Q=wb(o,w,l);return[r[0]/2+ys(),2*e-Q.y-J,2*m-Q.x-$]},top:function(c,t,g,$,X){var Q={x:-t[0]/2,y:-t[2]/2,width:t[0],height:t[2]},j=wb(c,Q,g);return[j.x+$,t[1]/2+ys(),j.y+X]},bottom:function(B,C,P,J,L){var t=C[2]/2,a={x:-C[0]/2,y:t,width:C[0],height:C[2]},H=wb(B,a,P);return[H.x+J,-C[1]/2-ys(),2*t-H.y-L]}};return function(X,N,T,Y,w,n){return K[Y](X,N,T,w||0,n||0)}}(),Aq=function(l,i,e,H,o,O,R,J,Y,m){if(o&&(i[0]+=o[0],i[1]+=o[1],i[2]+=o[2]),ug(l,e),J){var b=tj();if(Th(b,Y,m),le(i,b),ug(l,i),l.auto=J,l.pos=le([0,0,0],l),O){var Z=l.mat2=tj();Th(Z,O,R)}}else Th(l,Y,m),ug(l,i),H===yi?Kp(l,-p):H===Tg?Kp(l,p):H===Fe?$p(l,-p):H===Fd?$p(l,p):H===Cn&&Kp(l,n),Th(l,O,R);return l},sh=function(R,b){var F=b.auto,d=b.mat2,S=R.gv;if(F){var r,$=tj(),J=[0,0,0,0];r="string"==typeof F?[F.indexOf("x")<0?S._eye[0]:S._center[0],F.indexOf("y")<0?S._eye[1]:S._center[1],F.indexOf("z")<0?S._eye[2]:S._center[2]]:S._eye,wd(J,fg(tj(),r,S._center,S._up)),as($,lm(J,J),b.pos),d&&yp($,$,d),wg(S,$)}else wg(S,b)},mr=function(M,k,W,z,o){var O=M.s,Q=M.gv,b=Q.getGL(),U=Q._prg,L=Q._buffer,F=Q._1O;on(b,cr,F),sh(M,W),qk(b,U,O(k+".blend"),O(k+".light"),O(k+".opacity"),O(k+".reverse.flip"),O(k+".reverse.color"),O(k+".reverse.cull")),Sl(b,U,F,o,L.uv,Qp),dp(b,L.vs,z,U.aPosition),dp(b,L.ns,Mm,U.aNormal),Ac(b,L.is,gf),ce(b,0,gf.length),_p(b,U,F),Gh(b,U),bn(Q)},zn=function(B,Q,_){var X=B.gv,s=B.data,G=B[Q]={blend:X.getBodyColor(s)||X.getFaceBlend(s,Q),light:X.getFaceLight(s,Q),color:X.getFaceColor(s,Q),opacity:X.getFaceOpacity(s,Q),transparent:X.getFaceTransparent(s,Q),reverseFlip:X.getFaceReverseFlip(s,Q),reverseColor:X.getFaceReverseColor(s,Q),reverseCull:X.getFaceReverseCull(s,Q),texture:X.getFaceImage(s,Q),discardSelectable:X.getFaceDiscardSelectable(s,Q)};if("csg"!==Q){G.uv=X.getFaceUv(s,Q)||_&&_[Q+"Uv"],G.uvScale=X.getFaceUvScale(s,Q)||_&&_[Q+"UvScale"],G.uvOffset=X.getFaceUvOffset(s,Q)||_&&_[Q+"UvOffset"];var $=X.getFaceMat(s,Q);$&&(G.mat=cf(s,$))}return G},Xp=function(h,O,j,l,b){if(l){if(!b(l.transparent))return;var R=h.data,J=h.gv,D=J._buffer,g=J.getTexture(l.texture,R);Sl(O,j,g,l.discardSelectable,D.uv,l.tuv,l.uvOffset,l.uvScale),qk(O,j,l.blend,l.light,l.opacity,l.reverseFlip,l.reverseColor,l.reverseCull),mn(O,j.uDiffuse,l.color),dp(O,D.vs,l.vs,j.aPosition),dp(O,D.ns,l.ns,j.aNormal),We(O,0,l.vs.length/3),Gh(O,j),_p(O,j,g)}},jg=function(D,A,x,U,_,Z){var r,N,m,w,v,O,c,P,n,l,u,p=[U-A,_-x],b=D?D.length:0;for(m=0;b>m;m++){for(w=2,r=D[m],v=r[0],O=r[1];w+1<r.length;){if(c=r[w],P=r[w+1],N=Lp(A,x,U,_,v,O,c,P,!0)){n=[c-v,P-O],l=Qd(n),n[0]/=l,n[1]/=l,l=ub(p,n),l=l>0?Z:-Z,u=[n[0]*l,n[1]*l];break}v=c,O=P,w+=2}if(u)break}if(u)for(U=A+u[0],_=x+u[1],m=0;b>m;m++)for(w=2,r=D[m],v=r[0],O=r[1];w+1<r.length;){if(c=r[w],P=r[w+1],N=Lp(A,x,U,_,v,O,c,P,!0))return[0,0];v=c,O=P,w+=2}return u?u:[U-A,_-x]},Lf=L.graph3d={},im=function(E,K,n){Lk(H+".graph3d."+E,K,n)},ji="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",Si="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";tq(j,{setBatchInfo:function(F,j){ng[F]=j},getBatchInfo:function(i){return ng[i]}},!0);var Ki=[1,1,1],Xi=[1,0,0,0,0,1,0,1,1,1,1,0],yc=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],tl=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Ze=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Ci=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],Ch=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],xp=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],hi=function(j,l){Fp(j,l),Dn(j,l,"_wireframeModelMap","_wireframeIndexMap"),Dn(j,l,"_polylineModelMap","_polylineIndexMap")},Fp=function(x,_){if(_){var m,k,n=_._id,s=x._33O,r=x._34O,f=r[n];if(f){k=f.batch,m=s[k];var Q=f.begin,D=f.size,R=3*Q,S=3*D,V=4*Q,$=4*D,F=m.vs,q=m.uv,b=m.cs,J=m.bs,X=m.rs,g=m.ds,P=f.index;if(m.invalidate=!0,delete r[n],g.splice(P,1),wh(g))delete s[k];else{for(;P<g.length;P++)f=r[g[P]._id],f.index--,f.begin-=D;F.splice(R,S),m.ns.splice(R,S),m.ps.splice(V,$),q&&q.splice(2*Q,2*D),b&&b.splice(V,$),J&&J.splice(R,S),X&&X.splice(Q,D)}}}else x._34O={},x._33O={}},Dn=function(D,B,x,q){if(B){var v,Q,I=B._id,_=D[x],s=D[q],b=s[I];if(b){Q=b.batch,v=_[Q];var w=b.begin,r=b.size,H=3*w,f=3*r,t=4*w,z=4*r,L=v.ds,W=b.index;if(v.invalidate=!0,delete s[I],L.splice(W,1),wh(L))delete _[Q];else{for(;W<L.length;W++)b=s[L[W]._id],b.index--,b.begin-=r;v.vs.splice(H,f),v.cs.splice(t,z),v.ps.splice(t,z),v.ls&&v.ls.splice(w,r)}}}else D[x]={},D[q]={}},pf=function(G,k,g,h){if(!h)return A;var f=k[h];if(!f){var o=ng[h]||Qe,Q=o.image?[]:A;f=k[h]={vs:[],ns:[],uv:Q,cs:Q?A:o.color?A:[],bs:o.blend?[]:A,ps:[],rs:o.brightness?[]:A,ds:[]}}return f.invalidate=!0,G[g._id]={index:f.ds.length,begin:f.vs.length/3,batch:h},f.ds.push(g),f},Ib=function(D,u){return u!=A&&1!==u?[D[0]*u,D[1]*u,D[2]*u,D[3]]:D},kp=function(G,u,n){var K=G.getBrightness(u),s=br(n.color||"white"),y=s[3]<1,g=Math.ceil(n.width)||1,$=(y?"T":"O")+g,c=G._wireframeIndexMap,t=G._wireframeModelMap,V=t[$];V||(V=t[$]={vs:[],cs:[],ps:[],ds:[],T:y,W:g}),V.invalidate=!0;var S=V.vs,Y=V.cs,j=V.ds,X=c[u._id]={index:j.length,begin:S.length/3,batch:$};j.push(u),Nc(S,cf(u,n.mat),n.short?Tc:Ke);var r=X.size=S.length/3-X.begin;Xn(Y,Ib(s,K),r)},Tq=function(B,w,v,m,H,I,g,Y,j){var x=B.getBrightness(w);x==A&&(x=1);var M=Ib(br(m),x),K=M[3]<1;I=Math.ceil(I)||1;var E=(K?"T":"O")+I;if(g){var U=g[0],z=(g[1]||U)+U;E+="-"+U+"-"+z,j&&(E+="-"+Jg(j)+"-"+x,j=Ib(br(j),x))}var Z=B._polylineIndexMap,P=B._polylineModelMap,f=P[E];f||(f=P[E]={vs:[],cs:[],ps:[],ds:[],ls:g?[]:A,T:K,W:I},g&&(f.D=U,f.G=z,f.A=j)),f.invalidate=!0;var k,d=f.vs,X=f.cs,T=f.ds,V=f.ls,S=Z[w._id]={index:T.length,begin:d.length/3,batch:E};T.push(w),gi(d,v);var N,D=S.size=d.length/3-S.begin,y=v.length,p=0,C=[];if(g||H)for(k=0;y>k;k+=6)N=Qd([v[k],v[k+1],v[k+2]],[v[k+3],v[k+4],v[k+5]]),C.push(N),p+=N;if(p&&H){var G,L=Ib(br(H),x),W=[L[0]-M[0],L[1]-M[1],L[2]-M[2],L[3]-M[3]],R=0;for(k=0;y>k;k+=6)G=R/p,Xn(X,[M[0]+W[0]*G,M[1]+W[1]*G,M[2]+W[2]*G,M[3]+W[3]*G],1),R+=C[k/6],G=R/p,Xn(X,[M[0]+W[0]*G,M[1]+W[1]*G,M[2]+W[2]*G,M[3]+W[3]*G],1)}else Xn(X,M,D);if(g)for(R=Y||0,k=0;y>k;k+=6)V.push(R),R+=C[k/6],V.push(R)},xb=function(K,d,Z){if(d)for(var q=4*d.begin,E=Z[d.batch].ps,W=0;W<d.size;W++)E[q++]=K[0],E[q++]=K[1],E[q++]=K[2],E[q++]=K[3]},ak=function(Q,v){var g=v+["32"],f=Q[v],a=Q[g];f?a&&a.length===f.length?a.set(f):Q[g]=new ar(f):delete Q[g]},Ek=function(K,d,Z,r,F,L,W,f,x){if(Uh(Z))Z.forEach(function(p){Ek(K,d,p,r,F,L,W,f,x)});else if(qd(Z))Ek(K,d,Ud(r,Z),r,F,L,W,f,x);else if(Lc(Z)){var v,k=Ro(Z.mat,d,K),_=Ro(Z.s3,d,K),y=Ro(Z.t3,d,K),t=Ro(Z.r3,d,K);if((_||t||y||k)&&(v=Ld(k,_,t,Ro(Z.rotationMode,d,K),y),L.push(v)),Z.shape3d)Ek(K,d,Z.shape3d,r,F,L,W,f,Z);else{x=x||Qe;var J=L[0],O=L.length,H=r("shape3d.color",Z.color,x.color);if(F||(F=r("shape3d.blend",Z.blend,x.blend)),O>1){J=Ur(J);for(var z=1;O>z;z++)yp(J,J,L[z])}Z.vs&&r(pn,Z.visible,x.visible)&&ie(J,W,f,Z.vs,Z.uv,Z.is,F,H),Z.top_vs&&r(Zm,Z.topVisible,x.topVisible)&&ie(J,W,f,Z.top_vs,Z.top_uv,Z.top_is,F,r("shape3d.top.color",Z.topColor,x.topColor)||H),Z.bottom_vs&&r(Pj,Z.bottomVisible,x.bottomVisible)&&ie(J,W,f,Z.bottom_vs,Z.bottom_uv,Z.bottom_is,F,r("shape3d.bottom.color",Z.bottomColor,x.bottomColor)||H),Z.from_vs&&r(pb,Z.fromVisible,x.fromVisible)&&ie(J,W,f,Z.from_vs,Z.from_uv,Z.from_is,F,r("shape3d.from.color",Z.fromColor,x.fromColor)||H),Z.to_vs&&r(Vo,Z.toVisible,x.toVisible)&&ie(J,W,f,Z.to_vs,Z.to_uv,Z.to_is,F,r("shape3d.to.color",Z.toColor,x.toColor)||H)}v&&L.pop()}},ie=function(t,c,R,I,s,n,o,G){var V,A=c.cs,O=c.uv,X=c.bs;if(n){V=n.length;for(var x=0;V>x;x++){var e=n[x];Nc(R,t,[I[3*e],I[3*e+1],I[3*e+2]]),O&&gi(O,[s[2*e],s[2*e+1]])}}else V=I.length/3,Nc(R,t,I),O&&gi(O,s);A&&Xn(A,G,V),X&&(o?Lq(X,o,V):gi(X,Ki,V))},Am=function(i,Q,f,X){var q=[];X?Ek(i.gv,i.data,X,i.s,i.getBodyColor(),[Q],f,q):(hs(i,yi,Q,f,q),hs(i,Tg,Q,f,q),hs(i,Li,Q,f,q),hs(i,Cn,Q,f,q),hs(i,Fe,Q,f,q),hs(i,Fd,Q,f,q),hs(i,"csg",Q,f,q)),q.length&&(gi(f.vs,q),gi(f.ns,ol(q)))},hs=function(S,j,W,T,C){var g=S[j];if(g){var G=g.tuv;if(G){var x,E,Y,I,m=g.uvScale,R=g.uvOffset;if(m)for(x=G.length,E=m[0],Y=m[1],I=0;x>I;I+=2)G[I]*=E,G[I+1]*=Y;if(R)for(x=G.length,E=R[0],Y=R[1],I=0;x>I;I+=2)G[I]+=E,G[I+1]+=Y}ie(W,T,C,g.vs,G,A,g.blend,g.color)}},Wk=function(l,P,X,h,n,i,w,f){var E,A=X.cs,L=X.uv,b=X.bs;if(l.getFaceVisible(P,i)){var D=l.getFaceMat(P,i);if(D&&(n=cf(P,D)),Nc(w,n,f),A&&Xn(A,l.getFaceColor(P,i),6),L){var J=l.getFaceUv(P,i)||h[i+"Uv"],q=l.getFaceUvScale(P,i)||h[i+"UvScale"],T=l.getFaceUvOffset(P,i)||h[i+"UvOffset"];J=J?[J[6],J[7],J[0],J[1],J[2],J[3],J[2],J[3],J[4],J[5],J[6],J[7]]:Xi;var v=J[0],K=J[1],C=J[2],B=J[3],N=J[4],W=J[5],R=J[6],M=J[7],s=J[8],O=J[9],j=J[10],y=J[11];if(q){var d=q[0],Y=q[1];v*=d,K*=Y,C*=d,B*=Y,N*=d,W*=Y,R*=d,M*=Y,s*=d,O*=Y,j*=d,y*=Y}if(T){var H=T[0],e=T[1];v+=H,K+=e,C+=H,B+=e,N+=H,W+=e,R+=H,M+=e,s+=H,O+=e,j+=H,y+=e}L.push(v,K,C,B,N,W,R,M,s,O,j,y)}b&&(E=l.getBodyColor(P)||l.getFaceBlend(P,i),E?Lq(b,E,6):gi(b,Ki,6))}},Bf=function(O,W,P,l){var B=O.getGL(),z=O._prg,j=O._buffer;if(!zr(W)){wg(O),sm(B,z);for(var L in W){var u=W[L];if(!(l&&!u.T||!l&&u.T)){u.invalidate?(u.invalidate=!1,ak(u,"vs"),ak(u,"cs"),ak(u,"ls"),ak(u,"ps")):P&&ak(u,"ps");var s=u.vs32,k=P?u.ps32:u.cs32;Dh(B,z,u.W,A,j.vs,s);var J=u.D,y=!O._dashDisabled&&J;y&&(mn(B,z.uDash,!0),mn(B,z.uDashDistance,J),mn(B,z.uDashGapDistance,u.G),_f(B,z.aLineDistance),dp(B,j.lineDistance,u.ls32,z.aLineDistance,1),mn(B,z.uDiffuse,u.A||mp));var V=!O._batchColorDisabled;V&&(mn(B,z.uBatchColor,!0),_f(B,z.aBatchColor),dp(B,j.batchColor,k,z.aBatchColor,4)),Sl(B),We(B,0,s.length/3,B.LINES),_p(B),V&&(mn(B,z.uBatchColor,!1),rd(B,z.aBatchColor)),y&&(mn(B,z.uDash,!1),rd(B,z.aLineDistance))}}Ml(B,z)}},xe=function(E,O,G){var c,a,r,y,B,C,W,Y,n,z,I,i=E.getGL(),F=E._prg,s=E._buffer,Q=E._33O;if(!zr(Q)){wg(E);for(c in Q)if(a=ng[c]||Qe,!(G&&!a.transparent||!G&&a.transparent)&&(r=Q[c],O||!a.transparentMask)){var N=G&&a.autoSort!==!1&&(E._33Q||r.invalidate);if(r.invalidate?(r.invalidate=!1,ak(r,"vs"),ak(r,"ns"),ak(r,"cs"),ak(r,"rs"),ak(r,"ps"),ak(r,"bs"),ak(r,"uv")):O&&ak(r,"ps"),B=r.vs32,C=O?r.ps32:r.cs32,n=r.uv32,W=r.bs32,Y=r.rs32,I=B.length/3,N&&(r.is=mc(B,E.getEye())),I){y=a.light,z=E.getTexture(a.image),qk(i,F,A,a.light,a.opacity,a.reverseFlip,a.reverseColor,a.reverseCull),C?E._batchColorDisabled||(mn(i,F.uBatchColor,!0),_f(i,F.aBatchColor),dp(i,s.batchColor,C,F.aBatchColor,4)):mn(i,F.uDiffuse,a.color);var m=W&&!E._batchBlendDisabled;m&&(mn(i,F.uBatchBlend,!0),_f(i,F.aBatchBlend),dp(i,s.batchBlend,W,F.aBatchBlend));var J=Y&&!E._batchBrightnessDisabled;J&&(mn(i,F.uBatchBrightness,!0),_f(i,F.aBatchBrightness),dp(i,s.batchBrightness,Y,F.aBatchBrightness,1)),n?Sl(i,F,z,a.discardSelectable,s.uv,n,a.uvOffset,a.uvScale):Sl(i),dp(i,s.vs,B,F.aPosition),dp(i,s.ns,r.ns32,F.aNormal),r.is?(Ac(i,s.is,r.is),ce(i,0,I)):We(i,0,I),n?_p(i,F,z):_p(i),C&&!E._batchColorDisabled&&(mn(i,F.uBatchColor,!1),rd(i,F.aBatchColor)),m&&(mn(i,F.uBatchBlend,!1),rd(i,F.aBatchBlend)),J&&(mn(i,F.uBatchBrightness,!1),rd(i,F.aBatchBrightness)),Gh(i,F)}}}},mc=function(P,Q){for(var O=P.length/3,H=new Array(O),j=O/3,c=new Array(j),w=0;j>w;w++)c[w]=w;c.sort(function(Y,d){var k=9*Y,L=[(P[k]+P[k+3]+2*P[k+6])/4,(P[k+1]+P[k+4]+2*P[k+7])/4,(P[k+2]+P[k+5]+2*P[k+8])/4];k=9*d;var j=[(P[k]+P[k+3]+2*P[k+6])/4,(P[k+1]+P[k+4]+2*P[k+7])/4,(P[k+2]+P[k+5]+2*P[k+8])/4],s=Qd(Q,L)-Qd(Q,j);return s>0?-1:0>s?1:0});for(var w=0;j>w;w++){var u=3*w,T=3*c[w];H[u]=T,H[u+1]=T+1,H[u+2]=T+2}return new lf(H)},Qp=new ar([0,0,0,1,1,1,1,0]),Mm=new ar([0,0,1,0,0,1,0,0,1,0,0,1]),gf=new lf([0,1,2,2,3,0]),Zn=new ar([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Ko=new lf([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Sh=new ar([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),nf=new ar([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),yj=ol(Zn,Ko),Ke=(new ar([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new lf([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),Tc=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Yr=function(G,J,S,Y,_,y){y=y||16,G=G||16,J=J||0,S=S||G;var w,Z,X,D,Q,l,g,L,K=.5,R=[],v=[],$=N/G,r=n/y;for(w=0;y>w;w++)for(Q=w+1,D=w*r,L=Q*r,Z=J;S>Z;Z++)l=Z+1,X=Z*$,g=l*$,R.push(K*m(D)*U(X),K*U(D),-K*m(D)*m(X),K*m(L)*U(g),K*U(L),-K*m(L)*m(g),K*m(D)*U(g),K*U(D),-K*m(D)*m(g),K*m(D)*U(X),K*U(D),-K*m(D)*m(X),K*m(L)*U(X),K*U(L),-K*m(L)*m(X),K*m(L)*U(g),K*U(L),-K*m(L)*m(g)),v.push(Z/G,w/y,l/G,Q/y,l/G,w/y,Z/G,w/y,Z/G,Q/y,l/G,Q/y);
if(Y)for(X=J*$,w=0;y>w;w++)Q=w+1,D=w*r,L=Q*r,R.push(0,0,0,K*m(L)*U(X),K*U(L),-K*m(L)*m(X),K*m(D)*U(X),K*U(D),-K*m(D)*m(X)),v.push(0,.5,J/G,Q/y,J/G,w/y);if(_)for(X=S*$,w=0;y>w;w++)Q=w+1,D=w*r,L=Q*r,R.push(0,0,0,K*m(D)*U(X),K*U(D),-K*m(D)*m(X),K*m(L)*U(X),K*U(L),-K*m(L)*m(X)),v.push(1,.5,S/G,w/y,S/G,Q/y);return{vs:R,uv:v}},Er=function(y,Y,z){y=y||.17,Y=Y||12,z=z||18,0>y?y=0:y>.25&&(y=.25);var j,h,k,p,I,q,D,i=.5,J=[],c=[],Z=[],w=N/z,l=N/Y,o=i-y;for(h=0;Y>=h;h++)for(p=-n+h*l,q=U(p),I=m(p),j=0;z>=j;j++)k=j*w,D=o+y*q,J.push(U(k)*D,I*y,-m(k)*D),c.push(j/z,1-h/Y);for(h=0;Y>h;h++){var P=h*(z+1),R=(h+1)*(z+1);for(j=0;z>j;j++)Z.push(P+j,R+j+1,R+j,P+j,P+j+1,R+j+1)}return{vs:J,uv:c,is:Z}},Bm=function(r,E,y,A,X,e,b){b=b||12,r=r||18,E=E||0,y=y||r,e=e||.17,0>e?e=0:e>.25&&(e=.25);var Y,h,D,t,j,i,v,V,f,C,l=.5,H=[],J=[],P=N/r,T=N/b,L=l-e;for(D=0;b>D;D++)for(t=D+1,v=-n+D*T,V=-n+t*T,Y=E;y>Y;Y++)h=Y+1,j=Y*P,i=h*P,f=L+e*U(v),C=L+e*U(V),H.push(U(j)*f,m(v)*e,-m(j)*f,U(i)*f,m(v)*e,-m(i)*f,U(i)*C,m(V)*e,-m(i)*C,U(j)*f,m(v)*e,-m(j)*f,U(i)*C,m(V)*e,-m(i)*C,U(j)*C,m(V)*e,-m(j)*C),J.push(Y/r,1-D/b,h/r,1-D/b,h/r,1-t/b,Y/r,1-D/b,h/r,1-t/b,Y/r,1-t/b);if(A){var Q=[],O=[];for(D=0;b>D;D++)t=D+1,v=-n+D*T,V=-n+t*T,j=E*P,f=L+e*U(v),C=L+e*U(V),Q.push(U(j)*f,m(v)*e,-m(j)*f,U(j)*C,m(V)*e,-m(j)*C,U(j)*L,0,-m(j)*L),O.push(.5+.5*U(v),.5-.5*m(v),.5+.5*U(V),.5-.5*m(V),.5,.5)}if(X){var G=[],$=[];for(D=0;b>D;D++)t=D+1,v=-n+D*T,V=-n+t*T,j=y*P,f=L+e*U(v),C=L+e*U(V),G.push(U(j)*f,m(v)*e,-m(j)*f,U(j)*L,0,-m(j)*L,U(j)*C,m(V)*e,-m(j)*C),$.push(.5-.5*U(v),.5-.5*m(v),.5,.5,.5-.5*U(V),.5-.5*m(V))}return{vs:H,uv:J,from_vs:Q,from_uv:O,to_vs:G,to_uv:$}},Wm=function(x,t){for(var y,h,l,M=.5,g=16,P=[],X=[],i=[],F=N/g,k=0;g>=k;k++)y=k*F,h=U(y)*M,l=m(y)*M,P.push(h,-M,l,h,M,l),X.push(1-k/g,1,1-k/g,0);for(k=0;g>k;k++)i.push(2*k,2*k+1,2*k+3,2*k,2*k+3,2*k+2);if(t){var n=[],$=[],d=[];for(n.push(0,-M,0),$.push(.5,.5),k=0;g>=k;k++)y=k*F,h=U(y),l=m(y),n.push(h*M,-M,-l*M),$.push(.5+.5*h,.5+.5*l);for(k=0;g>k;k++)d.push(0,k+2,k+1)}if(x){var R=[],z=[],w=[];for(R.push(0,M,0),z.push(.5,.5),k=0;g>=k;k++)y=k*F,h=U(y),l=m(y),R.push(h*M,M,-l*M),z.push(.5+.5*h,.5-.5*l);for(k=0;g>k;k++)w.push(0,k+1,k+2)}return{vs:P,uv:X,is:i,bottom_vs:n,bottom_uv:$,bottom_is:d,top_vs:R,top_uv:z,top_is:w}},Wo=function(l,p,d,T,t,f,M){l=l||12,p=p||0,d=d||l;for(var j,n,D,A,I,x,E,k,H=.5,Q=[],K=[],c=N/l,h=p;d>h;h++)j=h+1,n=h*c,D=j*c,A=U(n)*H,I=m(n)*H,x=U(D)*H,E=m(D)*H,Q.push(A,-H,-I,x,-H,-E,A,H,-I,x,-H,-E,x,H,-E,A,H,-I),K.push(h/l,1,j/l,1,h/l,0,j/l,1,j/l,0,h/l,0);if(M){var e=[],Z=[];for(h=p;d>h;h++)n=c*h,D=c*(h+1),A=U(n),I=m(n),x=U(D),E=m(D),e.push(A*H,-H,-I*H,0,-H,0,x*H,-H,-E*H),Z.push(.5+.5*A,.5+.5*I,.5,.5,.5+.5*x,.5+.5*E)}if(f){var O=[],C=[];for(h=p;d>h;h++)n=c*h,D=c*(h+1),A=U(n),I=m(n),x=U(D),E=m(D),O.push(A*H,H,-I*H,x*H,H,-E*H,0,H,0),C.push(.5+.5*A,.5-.5*I,.5+.5*x,.5-.5*E,.5,.5)}return T&&(n=c*p,A=U(n)*H,I=m(n)*H,k=p/l,Q.push(0,H,0,0,-H,0,A,-H,-I,A,-H,-I,A,H,-I,0,H,0),K.push(0,0,0,1,k,1,k,1,k,0,0,0)),t&&(n=c*d,A=U(n)*H,I=m(n)*H,k=d/l,Q.push(0,-H,0,0,H,0,A,H,-I,A,H,-I,A,-H,-I,0,-H,0),K.push(1,1,1,0,k,0,k,0,k,1,1,1)),{vs:Q,uv:K,bottom_vs:e,bottom_uv:Z,top_vs:O,top_uv:C}},xh=function(K,F,L,k,C){F=F||18,L=L||0,k=k==A?N:k,C=C==A?.5:C;for(var M,v,y,S,Y,b,u=[0,.5,.75,.875,.9375],H=[],P=[],p=[],s=k/F,j=0;j<u.length;j++){var z=0===j%2?0:.5;for(M=0;F>=M;M++)v=(M+z)*s+L,y=1-u[j],H.push(U(v)*C*y,-C+2*u[j]*C,-m(v)*C*y),P.push((M+z)/F,y)}for(j=0;j<u.length-1;j++){var h=j*(F+1),o=(j+1)*(F+1);for(M=0;F>M;M++)p.push(h+M,o+M+1,o+M,h+M,h+M+1,o+M+1)}for(b=H.length/3-(F+1),M=0;F>M;M++)H.push(0,C,0),P.push((M+.5)/F,0);for(M=0;F>M;M++)p.push(b+M,b+M+1,b+(F+1)+M);if(K){var E=[],D=[],e=[];for(E.push(0,-C,0),D.push(.5,.5),M=0;F>=M;M++)v=M*s+L,S=U(v),Y=m(v),E.push(S*C,-C,-Y*C),D.push(.5+.5*S,.5+.5*Y);for(M=0;F>M;M++)e.push(0,M+2,M+1)}return{vs:H,uv:P,is:p,bottom_vs:E,bottom_uv:D,bottom_is:e}},jc=function(l,u,Y,_,P,S){l=l||16,u=u||0,Y=Y||l;for(var q=.5,x=[],w=[],T=N/l,Z=u;Y>Z;Z++){var t=Z+1,A=T*Z,h=T*t;x.push(U(A)*q,-q,-m(A)*q,U(h)*q,-q,-m(h)*q,0,q,0),w.push(Z/l,1,t/l,1,(Z+t)/2/l,0)}if(S){var y=[],c=[];for(Z=u;Y>Z;Z++){A=T*Z,h=T*(Z+1);var L=U(A),M=m(A),i=U(h),d=m(h);y.push(L*q,-q,-M*q,0,-q,0,i*q,-q,-d*q),c.push(.5+.5*L,.5+.5*M,.5,.5,.5+.5*i,.5+.5*d)}}return _&&(A=T*u,x.push(0,q,0,0,-q,0,U(A)*q,-q,-m(A)*q),w.push(0,0,0,1,u/l,1)),P&&(A=T*Y,x.push(0,-q,0,0,q,0,U(A)*q,-q,-m(A)*q),w.push(1,1,1,0,Y/l,1)),{vs:x,uv:w,bottom_vs:y,bottom_uv:c}},Ph=function(b,H,_,R,B,X,J,I){for(var v=[],N=0;N<b.length-1;N+=2)v.push({x:b[N],y:b[N+1]});return xc(v,H,_,R,B,X,J,I,!1)},kl={roundRect:function(m,s){return Ph([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],m,s,3)},star:function(e,l){return Ph([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],e,l)},rect:function(R,V){return Ph([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],R,V)},triangle:function(J,G){return Ph([0,-.5,.5,.5,-.5,.5],[1,2,2,5],J,G)},rightTriangle:function(N,n){return Ph([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],N,n)},parallelogram:function(V,E){return Ph([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],V,E)},trapezoid:function(L,z){return Ph([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],L,z)}},Df={sphere:1,cylinder:1,cone:1,torus:1},kc={torus:1,sphere:1},ij=tq(Dk(kl),{cylinder:1}),np=tq(Dk(kl),{cylinder:1,cone:1}),fi=function(o,r,P){var x,j=Ro(o.mat,P,r),m=Ro(o.s3,P,r),L=Ro(o.t3,P,r),V=Ro(o.r3,P,r);return(m||V||L||j)&&(x=Ur(r._6O),wg(r,Ld(j,m,V,Ro(o.rotationMode,P,r),L))),x},Uq=function(I,K,z,P,u,c,m){if(Uh(z))z.forEach(function(b){Uq(I,K,b,P,u,c,m)});else if(qd(z))Uq(I,K,Ud(P,z),P,u,c,m);else if(Lc(z))if(z.shape3d){var M=fi(z,I,K);Uq(I,K,z.shape3d,P,u,c,z),M&&bn(I,M)}else Fq(I,K,z,P,u,c,m)},Fq=function(W,B,r,t,j,p,D){if(D=D||Qe,!p||p(t("shape3d.transparent",r.transparent,D.transparent))){var K=fi(r,W,B);Zd(r);var o=W._26I,h=W._prg,P=W._buffer,F=t("shape3d.color",r.color,D.color);j||(j=t("shape3d.blend",r.blend,D.blend)),qk(o,h,j,t("shape3d.light",r.light,D.light),t("shape3d.opacity",r.opacity,D.opacity),t("shape3d.reverse.flip",r.reverseFlip,D.reverseFlip),t("shape3d.reverse.color",r.reverseColor,D.reverseColor),t("shape3d.reverse.cull",r.reverseCull,D.reverseCull)),r.vs&&t(pn,r.visible,D.visible)&&uo(o,h,P,F,W.getTexture(t("shape3d.image",r.image,D.image),B),t("shape3d.discard.selectable",r.discardSelectable,D.discardSelectable),r.vs,r.uv,r.ns,r.is,t("shape3d.uv.offset",r.uvOffset,D.uvOffset),t("shape3d.uv.scale",r.uvScale,D.uvScale)),r.top_vs&&t(Zm,r.topVisible,D.topVisible)&&uo(o,h,P,t("shape3d.top.color",r.topColor,D.topColor)||F,W.getTexture(t("shape3d.top.image",r.topImage,D.topImage),B),t("shape3d.top.discard.selectable",r.topDiscardSelectable,D.topDiscardSelectable),r.top_vs,r.top_uv,r.top_ns,r.top_is,t("shape3d.top.uv.offset",r.topUvOffset,D.topUvOffset),t("shape3d.top.uv.scale",r.topUvScale,D.topUvScale)),r.bottom_vs&&t(Pj,r.bottomVisible,D.bottomVisible)&&uo(o,h,P,t("shape3d.bottom.color",r.bottomColor,D.bottomColor)||F,W.getTexture(t("shape3d.bottom.image",r.bottomImage,D.bottomImage),B),t("shape3d.bottom.discard.selectable",r.bottomDiscardSelectable,D.bottomDiscardSelectable),r.bottom_vs,r.bottom_uv,r.bottom_ns,r.bottom_is,t("shape3d.bottom.uv.offset",r.bottomUvOffset,D.bottomUvOffset),t("shape3d.bottom.uv.scale",r.bottomUvScale,D.bottomUvScale)),r.from_vs&&t(pb,r.fromVisible,D.fromVisible)&&uo(o,h,P,t("shape3d.from.color",r.fromColor,D.fromColor)||F,W.getTexture(t("shape3d.from.image",r.fromImage,D.fromImage),B),t("shape3d.from.discard.selectable",r.fromDiscardSelectable,D.fromDiscardSelectable),r.from_vs,r.from_uv,r.from_ns,r.from_is,t("shape3d.from.uv.offset",r.fromUvOffset,D.fromUvOffset),t("shape3d.from.uv.scale",r.fromUvScale,D.fromUvScale)),r.to_vs&&t(Vo,r.toVisible,D.toVisible)&&uo(o,h,P,t("shape3d.to.color",r.toColor,D.toColor)||F,W.getTexture(t("shape3d.to.image",r.toImage,D.toImage),B),t("shape3d.to.discard.selectable",r.toDiscardSelectable,D.toDiscardSelectable),r.to_vs,r.to_uv,r.to_ns,r.to_is,t("shape3d.to.uv.offset",r.toUvOffset,D.toUvOffset),t("shape3d.to.uv.scale",r.toUvScale,D.toUvScale)),Gh(o,h),K&&bn(W,K)}},uo=function(j,p,b,o,K,W,m,E,N,i,q,h){m&&(mn(j,p.uDiffuse,o),E?Sl(j,p,K,W,b.uv,E,q,h):Sl(j),dp(j,b.vs,m,p.aPosition),dp(j,b.ns,N,p.aNormal),i?(Ac(j,b.is,i),ce(j,0,i.length)):We(j,0,m.length/3),E?_p(j,p,K):_p(j))},Ud=function(X,z){if(z||(z=X(Sq)),!z)return A;if(Lc(z))return z;var l=ki[z];if(l)return l;var b=z;if(Df[z]){var a=X("shape3d.side"),T=X("shape3d.side.from"),G=X("shape3d.side.to"),f=X(pb),w=X(Vo);3>a?(a=0,T=0,G=0,f=!1,w=!1):((T==A||0>T)&&(T=0),(G==A||G>a)&&(G=a),0===T&&G===a&&(f=!1,w=!1)),b+="-"+a+"-"+T+"-"+G+"-"+f+"-"+w}if(ij[z]){var B=X(Zm);b+="-"+B}if(np[z]){var $=X(Pj);b+="-"+$}if("torus"===z){var d=X("shape3d.torus.radius");0>d?d=0:d>.25&&(d=.25),b+="-"+d}if(kc[z]){var Q=X(en);b+="-"+Q}return l=Kg[b],l||("box"===z?l=j.createBoxModel():kl[z]?l=kl[z](B,$):"sphere"===z?l=j.createSphereModel(a,T,G,f,w,Q):z===gr?l=j.createCylinderModel(a,T,G,f,w,B,$):"cone"===z?l=j.createConeModel(a,T,G,f,w,$):"torus"===z&&(l=j.createTorusModel(a,T,G,f,w,d,Q)),Kg[b]=l),l},Zd=function(){var V=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],N=["is","top_is","bottom_is","from_is","to_is"];return S=vd(ji.substr(ji.indexOf("^#")+2)),Zg(j[Pm(Te+V[15]+"n"+V[16])]())&&Fm()?function(x){x&&!x._complete_&&(x._complete_=!0,x.vs&&wh(x.ns)&&(x.ns=ol(x.vs,x.is)),x.top_vs&&wh(x.top_ns)&&(x.top_ns=ol(x.top_vs,x.top_is)),x.bottom_vs&&wh(x.bottom_ns)&&(x.bottom_ns=ol(x.bottom_vs,x.bottom_is)),x.from_vs&&wh(x.from_ns)&&(x.from_ns=ol(x.from_vs,x.from_is)),x.to_vs&&wh(x.to_ns)&&(x.to_ns=ol(x.to_vs,x.to_is)),V.forEach(function(o){var f=x[o];Uh(f)&&(x[o]=new ar(f))}),N.forEach(function(s){var N=x[s];Uh(N)&&(x[s]=new lf(N))}))}:void 0}(),Hf=function(t,k){var Z=t[k];Uh(Z)&&(t[k]=new ar(Z))};tq(tk,{_25Q:function(z){z._16O=function(M,V,L,p,x,B,Z,z,R){var S=this.info;if(S){var g,H,y,Y,O,v,d=tj();if(Zk[V]?(g=S.p3,H=S.c1,y=S.c2):Hq[V]?(H=S.s1||S.c1,y=S.s2||S.c2):(H=S.t1||S.c1,y=S.t2||S.c2),g)v=zb(V,Zl,L,p,z,R);else{var C=jf(y,H),e=Qd(H,y);Y=[0,-_(C[2],C[0]),h(C[1]/e)],O="zyx",g=[(H[0]+y[0])/2,(H[1]+y[1])/2,(H[2]+y[2])/2],v=zb(V,[e,0,0],L,p,z,R)}return Aq(d,v,g,p,x,B,Z,M,Y,O)}return Ar},z._80o=function(z,q,y){var j=this,D=j.shapeModel;if(D){var I=j.gv;wg(I),Uq(I,j.data,D,j.s,j.getBodyColor(),y)}},z.createLineModel=function(C,R,e,J,p){for(var m=this,F=m.s,Z=fj(C,R,F(en)),s=[],O=0;O<Z.length;O++){var h=Z[O],_=h.length;if(_>1){var q=h[0];s.push(q.x,q.y,q.z);for(var V=1;_-1>V;V++)q=h[V],s.push(q.x,q.y,q.z),s.push(q.x,q.y,q.z);q=h[_-1],s.push(q.x,q.y,q.z)}}var N,b,K,w=F(J+".color"),g=F(p),v=0;return g&&(b=F(p+".color"),N=F(p+".pattern"),v=F(p+".offset"),K=w),Tq(m.gv,m.data,s,b||w,K?A:F(J+".gradient.color"),e,N||F(J+".pattern"),v,K),Z},z.createTubeModel=function(e,I,b,D){for(var L=this,V=L.s,E=V("shape3d.side")||Be,U=V("shape3d.start.angle"),_=V(Zm)?V("shape3d.top.cap"):A,O=V(Pj)?V("shape3d.bottom.cap"):A,v="flat"===_,X="flat"===O,p=v&&(D?D.uv:V("shape3d.top.image")),x=X&&(D?D.uv:V("shape3d.bottom.image")),B=D?D.uv:V("shape3d.image"),h={vs:[],uv:B?[]:A,top_vs:v?[]:A,top_uv:p?[]:A,bottom_vs:X?[]:A,bottom_uv:x?[]:A},f=fj(e,I,V(en),b),J=0,t=f.length;t>J;J++)mq(h,f[J],V(db),b,E,U,_,O);if(D){var j=[];Ek(L.gv,L.data,h,V,L.getBodyColor(),[],D,j),j.length&&(gi(D.vs,j),gi(D.ns,ol(j)))}else L.shapeModel=h;return f},z.getCache=function(){var p=this.info;if(p){var q=p.list;if(q){var w=p.cache;return w||(w=p.cache=ns(q)),w}}return A}}});var Mi=function(L,O){for(var z,G=0,e=L.length,p=0,D=e-1;D>=p;)if(G=u(p+(D-p)/2),z=L[G].length-O,0>z)p=G+1;else{if(!(z>0)){D=G;break}D=G-1}G=D;var R=L[G],d=R.point;return G===e-1||R.length===O||(d=(new xo).subVectors(L[G+1].point,d).normalize().multiplyScalar(O-R.length).add(d)),{point:d,tangent:R.tangent}},ns=function(L){for(var j,V,D=[],f=0,I=0;I<L.length;I++){for(var y=L[I],Y=0;Y<y.length;Y++){j=y[Y],V&&(f+=V.distanceTo(j));var k=new xo,E=y[Y+1];E?k.subVectors(E,j):V?k.subVectors(j,V):k.x=1,k.normalize(),D.push({point:j,length:f,tangent:k}),V=j}V=null}return D},fj=function(F,x,J,g){J=J||$h;for(var T=[],H=0,U=F.size();U>H;H++){var V=F.get(H);T.push(new xo(V.x,V.e||0,V.y))}rc(x)&&(x=x._as);for(var j,q,Q,d,v,S=[],R=0,L=0,m=x?x.length:U;m>L;L++)if(v=x?x[L]:0===L?1:2,1===v)S.push(Q=[]),Q.push(T[R++]);else if(2===v||5===v)if(d=2===v?T[R++]:Q[0],g){var P=x?x[L+1]:m>L+1?2:A;if(2===P||5===P){var y=Q[Q.length-1],w=2===P?T[R]:Q[0],W=(new xo).subVectors(y,d),K=(new xo).subVectors(w,d),r=W.length(),u=K.length();if(g>r/2&&g>u/2)Q.push(d);else for(W.multiplyScalar($(g,r/2)/r).add(d),K.multiplyScalar($(g,u/2)/u).add(d),j=new Ik(W,d,K).getPoints(J),q=0;J>=q;q++)Q.push(j[q])}else Q.push(d)}else Q.push(d);else if(3===v)for(j=new Ik(Q[Q.length-1],T[R++],T[R++]).getPoints(J),q=1;J>=q;q++)Q.push(j[q]);else if(4===v)for(j=new cc(Q[Q.length-1],T[R++],T[R++],T[R++]).getPoints(J),q=1;J>=q;q++)Q.push(j[q]);return S},bd=function(j){for(var U,E,b=new xo,e=[],F=[],N=[],L=0,s=j.length;s>L;L++)U=j[L],E=j[L+1],E?b.subVectors(E,U):b.subVectors(U,j[L-1]),e.push(b.normalize().clone());var v,_,K,a,n=new xo,J=new xo,Y=new In,t=1e-4,z=Number.MAX_VALUE,r=e[0],k=F[0]=new xo,x=N[0]=new xo;for(_=O(r.x),K=O(r.y),a=O(r.z),z>=_&&(z=_,n.set(1,0,0)),z>=K&&(z=K,n.set(0,1,0)),z>=a&&n.set(0,0,1),J.crossVectors(r,n).normalize(),k.crossVectors(r,J),x.crossVectors(r,k),L=1;s>L;L++)F[L]=F[L-1].clone(),N[L]=N[L-1].clone(),J.crossVectors(e[L-1],e[L]),J.length()>t&&(J.normalize(),v=R(mm(e[L-1].dot(e[L]),-1,1)),F[L].applyMatrix4(Y.makeRotationAxis(J,v))),N[L].crossVectors(e[L],F[L]);return{B:N,T:e,N:F}},mq=function(){var u=function(t){for(var k=1;k<arguments.length;k++){var o=arguments[k];t.push(o.x,o.y,o.z)}},p=function(P){for(var n=1;n<arguments.length;n++){var C=arguments[n].uv;P.push(C[0],C[1])}},O=function(X,M,I,Y,N){var b=-Y*U(N),Q=Y*m(N);return new xo(X.x+b*I.x+Q*M.x,X.y+b*I.y+Q*M.y,X.z+b*I.z+Q*M.z)},T=function(s,z,h,t,j,l,P){for(var k=[],b=N/j,C=0;j>=C;C++){var m=O(s,z,h,t,C*b+l);k.push(m),P!=A&&(m.uv=[P,C/j])}return k},$=function(g,I,r,$,e,y,B,l){var k=I?g.top_vs:g.bottom_vs;if(k)for(var A=I?g.top_uv:g.bottom_uv,t=N/B,T=0;B>T;T++){var L,h;I?(L=T*t+l,h=(T+1)*t+l):(h=T*t+l,L=(T+1)*t+l),u(k,O(r,$,e,y,L),O(r,$,e,y,h),r),A&&A.push(.5-.5*U(L),.5-.5*m(L),.5-.5*U(h),.5-.5*m(h),.5,.5)}};return function(U,Z,r,H,Y,w,N,W){var q=Z.length;if(q>1){var G,S,E,n,z,h,x,o=bd(Z),V=o.T,D=o.N,K=o.B;"flat"===N&&$(U,!0,Z[0],K[0],D[0],H,Y,w),"flat"===W&&$(U,!1,Z[q-1],K[q-1],D[q-1],H,Y,w);var b,k,L=[],i=X(Y/2),Q="round"===N,J="round"===W,B=Z[0],O=V[0],c=K[0],t=D[0],l=Z[q-1],R=V[q-1],P=K[q-1],M=D[q-1];if(Q){for(E=1;i>=E;E++)D.splice(0,0,t),K.splice(0,0,c),V.splice(0,0,O),k=-E/i*H,Z.splice(0,0,O.clone().multiplyScalar(k).add(B)),L[i-E]=s(H*H-k*k);q+=i}if(J){for(E=1;i>=E;E++)D.push(M),K.push(P),V.push(R),k=E/i*H,Z.push(R.clone().multiplyScalar(k).add(l)),L[Z.length-1]=s(H*H-k*k);q+=i}if(U.uv){var v=0,F=0,f=[];for(r&&(v=r),z=Z[0],f[0]=0,E=1;q>E;E++)n=Z[E],f[E]=z.distanceTo(n),z=n,r||(v+=f[E]);for(b=[],E=0;q>E;E++)F+=f[E],b[E]=v?F/v:0}for(E=0;q>E;E++){if(n=Z[E],h=K[E],x=D[E],G=T(n,h,x,L[E]===d?H:L[E],Y,w,b?b[E]:A),S)for(var j=0;Y>j;j++){var a=S[j],C=S[j+1]||S[0],g=G[j],y=G[j+1]||G[0];u(U.vs,C,a,g,g,y,C),U.uv&&p(U.uv,C,a,g,g,y,C)}S=G}}}}();tq(j,{getLineLength:function(p){return p[p.length-1].length},getLineOffset:function(V,o){return Mi(V,o)},getLineCacheInfo:function(N,n,G,U){return ns(fj(N,n,G,U))}});var Kd=L.Light=function(){xi(Kd,this),this.s(ks,V[ks]),this.s(Sq,"sphere"),this.s3(20,20,20)};Oj("Light",Je,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(z,D,K){Kd.superClass.onStyleChanged.apply(this,arguments),z===ks&&this.s("shape3d.color",K)}});var Zp=Lf.Graph3dView=function(o,E){var t=this;t._attributes=E||j.graph3dViewAttributes,t._25I={},t._view=Pr(1,t);var s=t._canvas=Ad(t._view);s.addEventListener("webglcontextlost",function(j){j.preventDefault(),ef(t),t._26I=A,t._1o.texture=A,t._35O=!0},!1),s.addEventListener("webglcontextrestored",function(){t._35O=!1,t.iv()},!1),t._34O={},t._33O={},t._wireframeIndexMap={},t._wireframeModelMap={},t._polylineIndexMap={},t._polylineIndexMap={},t._8O=[],t._7O=tj(),t._6O=tj(),t._1o=new Fi(t),t._30O=new Nk(t),t._31O=new nm(t),t._32O=new Yb(t),t._33Q=!0,t._eye=Dk(j.graph3dViewEye),t._center=Dk(j.graph3dViewCenter),t._up=Dk(j.graph3dViewUp),t._lightChanged=!1,t._59O=[],t._spots=[],t._dirs=[],t.dm(o?o:new Al),t.setInteractors([new al(t)])},Up={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};im("Graph3dView",k,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",cs,lg,"firstPersonMode",_e,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",Qb,zq,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:d,_boundaries:d,_moveStep:j.graph3dViewMoveStep,_rotateStep:j.graph3dViewRotateStep,_pannable:j.graph3dViewPannable,_rotatable:j.graph3dViewRotatable,_walkable:j.graph3dViewWalkable,_resettable:j.graph3dViewResettable,_zoomable:j.graph3dViewZoomable,_firstPersonMode:j.graph3dViewFirstPersonMode,_mouseRoamable:j.graph3dViewMouseRoamable,_gridVisible:j.graph3dViewGridVisible,_gridSize:j.graph3dViewGridSize,_gridGap:j.graph3dViewGridGap,_gridColor:j.graph3dViewGridColor,_originAxisVisible:j.graph3dViewOriginAxisVisible,_centerAxisVisible:j.graph3dViewCenterAxisVisible,_axisXColor:j.graph3dViewAxisXColor,_axisYColor:j.graph3dViewAxisYColor,_axisZColor:j.graph3dViewAxisZColor,_ortho:j.graph3dViewOrtho,_orthoWidth:j.graph3dViewOrthoWidth,_fovy:j.graph3dViewFovy,_near:j.graph3dViewNear,_far:j.graph3dViewFar,_headlightColor:j.graph3dViewHeadlightColor,_headlightIntensity:j.graph3dViewHeadlightIntensity,_headlightRange:j.graph3dViewHeadlightRange,_headlightDisabled:j.graph3dViewHeadlightDisabled,_rectSelectable:j.graph3dViewRectSelectable,_rectSelectBackground:j.graph3dViewRectSelectBackground,_editSizeColor:j.graph3dViewEditSizeColor,_autoMakeVisible:Yc,_fogDisabled:j.graph3dViewFogDisabled,_fogColor:j.graph3dViewFogColor,_fogNear:j.graph3dViewFogNear,_fogFar:j.graph3dViewFogFar,_dashDisabled:j.graph3dViewDashDisabled,_batchColorDisabled:j.graph3dViewBatchColorDisabled,_batchBlendDisabled:j.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:j.graph3dViewBatchBrightnessDisabled,setEye:function(u,z,m){1===arguments.length&&(z=u[1],m=u[2],u=u[0]);var X=this._eye;X[0]=u,X[1]=z,X[2]=m,this.fp(Qb,A,X)},setCenter:function(b,U,G){1===arguments.length&&(U=b[1],G=b[2],b=b[0]);var M=this._center;M[0]=b,M[1]=U,M[2]=G,this.fp(zq,A,M)},setUp:function(b,i,r){1===arguments.length&&(i=b[1],r=b[2],b=b[0]);var N=this._up;N[0]=b,N[1]=i,N[2]=r,this.fp("up",A,N)},isTransparentMask:function(P){return P.s("transparent.mask")},getAspect:function(){var p=this,o=p._aspect;return o?o:p.getWidth()/p.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(o){var n=this,e=n._dataModel,E=n._3o;e!==o&&(e&&(e.umm(n.handleDataModelChange,n),e.umd(n.handleDataPropertyChange,n),E||e.sm().ums(n._16o,n)),n._dataModel=o,o.mm(n.handleDataModelChange,n),o.md(n.handleDataPropertyChange,n),E?E._21I(o):o.sm().ms(n._16o,n),n.invalidateAll(!0),n.invalidateLight(),n.fp(hd,e,o))},handleDataPropertyChange:function(B){var N=B.data;this.invalidateData(N),Kq(N)&&"s:light.type"===B.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(P){var T=this,G=P.property;T.iv(),T._18Q=A,"eye"===G?T._33Q=!0:"devicePixelRatio"===G?T._42(A,T._devicePixelRatio||ae):Up[G]&&ef(T)},_5O:function(m){var i=m._22Q();return i?new i(this,m):A},getData3dUI:function(R){var C=this._25I[R._id];return C===d&&(C=this._5O(R),this._25I[R._id]=C),C},invalidateAll:function(m){var C=this;if(m){for(var N in C._25I){var V=C._25I[N];V&&V.dispose()}C._25I={},C.iv(),hi(C)}else C.dm().each(function(G){C.invalidateData(G)})},invalidateSelection:function(){var m=this;m.sm().each(function(x){m.invalidateData(x)})},invalidateData:function(h){var E=this,J=E.getData3dUI(h);J&&(J.iv(),E.iv()),hi(E,h)},invalidateBatch:function(E){var V=this,Y=V._33O,Z=Y[E],$=[],x={};if(Z){Z.ds.forEach(function(Q){var k=V.getData3dUI(Q);k&&k.iv(),delete V._34O[Q._id],$.push(Q._id)}),delete Y[E];for(var T,n,p,S,_,f,A,m,o,D=0;2>D;D++){var l=V[["_wireframeModelMap","_polylineModelMap"][D]],y=V[["_wireframeIndexMap","_polylineIndexMap"][D]];for(x={},m=0;m<$.length;m++){var g=y[$[m]];if(g){delete y[$[m]],o=g.batch,T=l[o];var Q=g.begin,v=g.size,R=3*Q,e=3*v,j=4*Q,a=4*v;for(n=T.ds,p=T.vs,S=T.cs,_=T.ps,f=T.ls,A=g.index,T.invalidate=!0,n[A]=d,A=R;R+e>A;A++)p[A]=d;for(A=j;j+a>A;A++)S[A]=d;for(A=j;j+a>A;A++)_[A]=d;if(f)for(A=R;R+e>A;A++)f[A]=d;x[o]=!0}}for(o in x){T=l[o],n=T.ds,p=T.vs,S=T.cs,_=T.ps,f=T.ls;var h=[];for(A=0;A<n.length;A++)n[A]!==d&&h.push(n[A]);if(0===h.length)delete l[o];else{for(T.ds=h,h=[],A=0;A<p.length;A++)p[A]!==d&&h.push(p[A]);for(T.vs=h,h=[],A=0;A<S.length;A++)S[A]!==d&&h.push(S[A]);for(T.cs=h,h=[],A=0;A<_.length;A++)_[A]!==d&&h.push(_[A]);if(T.ps=h,f){for(h=[],A=0;A<f.length;A++)f[A]!==d&&h.push(f[A]);T.ls=h}}}}V.iv()}},handleDataModelChange:function(o){var f=this,p=o.kind,O=o.data;if("add"===p)f.invalidateData(O),yb(O)&&O.getEdgeGroup()&&O.getEdgeGroup().eachSiblingEdge(f.invalidateData,f),Kq(O)&&f.invalidateLight();else if(p===En){var U=O._id,l=f._25I[U];l&&(l.dispose(),delete f._25I[U],f.iv()),O===f._currentSubGraph&&f.setCurrentSubGraph(A),hi(f,O),Kq(O)&&f.invalidateLight()}else p===Go&&(f.invalidateAll(!0),f.setCurrentSubGraph(A),hi(f),f.invalidateLight())},toCanvas:function(W){var V=this,f=V.getGL();if(V.validate(),W){var l=f.getParameter(f.COLOR_CLEAR_VALUE);gl(f,W)}V._42(A,1);var j=V.getWidth(),N=V.getHeight(),n=new Uint8Array(4*j*N),H=Ad(),O=H.getContext("2d");f.readPixels(0,0,j,N,f.RGBA,f.UNSIGNED_BYTE,n),Ye(H,j,N,1);for(var c=O.getImageData(0,0,j,N),G=c.data,E=0;E<G.length;E+=4){var r=E/4,C=u(r/j),x=r-C*j;r=4*((N-1-C)*j+x),G[r]=n[E],G[r+1]=n[E+1],G[r+2]=n[E+2],G[r+3]=n[E+3]}return O.putImageData(c,0,0),W&&gl(f,l),V._42(A,V._devicePixelRatio||ae),H},toDataURL:function(i,j){var H=this,L=H.getGL();if(H.validate(),i){var J=L.getParameter(L.COLOR_CLEAR_VALUE);gl(L,i)}H._42(A,1);var Z=H._canvas.toDataURL(j||"image/png",1);return i&&gl(L,J),H._42(A,H._devicePixelRatio||ae),Z},getGL:function(){var L=this,F=L._26I,Y=L._prg;if(!F)try{L._2O={},F=L._26I=L._canvas.getContext("webgl",L._attributes)||L._canvas.getContext("experimental-webgl",L._attributes),F._emptyTexture=_q(F),L._buffer={vs:dc(F),ns:dc(F),is:dc(F),uv:dc(F),batchColor:dc(F),batchBlend:dc(F),batchBrightness:dc(F),lineDistance:dc(F)},L._1O=on(F);var z=L._cube={vs:dc(F),ns:dc(F),is:dc(F),uv:dc(F)};dp(F,z.vs,Zn),dp(F,z.ns,yj),dp(F,z.uv,Sh),Ac(F,z.is,Ko)}catch(Z){}if(F&&!Y){if(Y=L._prg=F.createProgram(),!Y)return A;var t=L._dirs.length,p=L._spots.length,C=L._59O.length,l=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];t&&l.push("uDirColor","uDirPosition"),p&&l.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),C&&l.push("uPointColor","uPointRange","uPointPosition"),gl(F,[0,0,0,0]),F.clearDepth(1),F.enable(F.DEPTH_TEST),F.depthFunc(F.LEQUAL),F.enable(F.BLEND),F.blendFunc(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA),nr||(ji=vd(ji.substring(0,ji.indexOf("^#"))),Si=vd(Si),nr=!0);var $=["#define MAX_DIR "+t,"#define MAX_SPOT "+p,"#define MAX_POINT "+C,L._fogDisabled?"":"#define FOG",L._dashDisabled?"":"#define DASH",L._batchColorDisabled?"":"#define BATCHCOLOR",L._batchBlendDisabled?"":"#define BATCHBLEND",L._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),j=pi(F,Y,F.VERTEX_SHADER,ji.replace("PREFIX",$)),w=pi(F,Y,F.FRAGMENT_SHADER,Si.replace("PREFIX",$));I?l.push("aPosition"):(Y.aPosition=0,F.bindAttribLocation(Y,0,"aPosition")),F.linkProgram(Y),l.forEach(function(r){Y[r]=/^u/.test(r)?F.getUniformLocation(Y,r):F.getAttribLocation(Y,r)}),F.useProgram(Y),F.deleteShader(j),F.deleteShader(w)}return F},getBrightness:function(F){var Y=F.s("brightness"),N=this.isSelected(F)?F.s("select.brightness"):A;return Y==A?N:N==A?Y:Y*N},getWireframe:function(G){var h=G.s("wf.visible"),l=G.s("wf.width");return h===!0||l>0&&"selected"===h&&this.isSelected(G)?{color:G.s("wf.color"),width:l,"short":G.s("wf.short"),mat:G.s("wf.mat")}:void 0},getBodyColor:function(x){return x.s("body.color")},getMat:function(Z){return Z.getMat?Z.getMat():Z.s("mat")},getFaceMat:function(G,w){return G.getFaceMat?G.getFaceMat(w):G.s(w+".mat")},getFaceBlend:function(X,B){return X.s(B+".blend")||X.s("all.blend")},getFaceColor:function(V,l){return V.s(l+".color")||V.s("all.color")},getFaceImage:function(E,o){return E.s(o+".image")||E.s("all.image")},getFaceDiscardSelectable:function($,c){var x=$.s(c+".discard.selectable");return x==A?$.s("all.discard.selectable"):x},getFaceUv:function(T,S){return T.s(S+".uv")||T.s("all.uv")},getFaceUvOffset:function(N,t){return N.s(t+".uv.offset")||N.s("all.uv.offset")},getFaceUvScale:function(h,B){return h.s(B+".uv.scale")||h.s("all.uv.scale")},getFaceLight:function(F,w){var Z=F.s(w+".light");return Z==A?F.s("all.light"):Z},getFaceVisible:function(m,Q){var X=m.s(Q+".visible");return X==A?m.s("all.visible"):X},getFaceOpacity:function(Z,M){var e=Z.s(M+".opacity");return e==A?Z.s("all.opacity"):e},getFaceTransparent:function(V,j){var D=V.s(j+".transparent");return D==A?V.s("all.transparent"):D},getFaceReverseColor:function(r,g){return r.s(g+".reverse.color")||r.s("all.reverse.color")},getFaceReverseFlip:function(u,F){var K=u.s(F+".reverse.flip");return K==A?u.s("all.reverse.flip"):K},getFaceReverseCull:function(L,Z){var c=L.s(Z+".reverse.cull");return c==A?L.s("all.reverse.cull"):c},getTextureMap:function(){return this._2O},deleteTexture:function(X){var J=this,Z=J._2O[X];Z&&(delete J._2O[X],J.getGL().deleteTexture(Z))},getTexture:function(J,c){if(!J)return A;var y=this,G=y.getGL(),Q=y._2O[J];if(!Q){var b=Vd(J);if(b)if(b.tagName){if(b.dynamic)return on(G,b,y._1O);Q=y._2O[J]=on(G,b)}else{var f=zm(b,c),W=Tr(b,c);if(f>=1&&W>=1){var $=wn(f,W);return pp($,b,0,0,f,W,c,y),$.restore(),on(G,cr,y._1O)}}}return Q},redraw:function(){this.iv()},validateImpl:function(){var P=this;if(P._lightChanged){P._lightChanged=!1;var f=[],k=[],F=[];P.dm().each(function(V){if(Kq(V)){var I=V.s("light.type");I===ms?f.push(V):I===dj?k.push(V):I===Ei&&F.push(V)}}),(f.length!==P._59O.length||k.length!==P._spots.length||F.length!==P._dirs.length)&&ef(P),P._59O=f,P._spots=k,P._dirs=F}P._42(),P._1o.iv()},_42:function(U,p){var W=this;if(!W._35O&&(!Db||jd(Db))){var Q,T;U&&(U instanceof Je?T=U:Q=U);var E=W._canvas,C=W.getWidth(),K=W.getHeight(),e=W.getGL(),J=W._prg;if(e){if(p?U||Ye(E,C,K,p):(p=W._devicePixelRatio||ae,U||C===E.clientWidth&&K===E.clientHeight||Ye(E,C,K,p)),e.viewport(0,0,C*p,K*p),W._81O=A,e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),mn(e,J.uBrightness,1),mn(e,J.uOpacity,1),mn(e,J.uPartOpacity,1),e._picking=!!U,mn(e,J.uPick,!!U),mn(e,J.uTexture,!1),mn(e,J.uFix,!1),mn(e,J.uTransparent,!1),mn(e,J.uBatchColor,!1),mn(e,J.uBatchBlend,!1),mn(e,J.uBatchBrightness,!1),U||(dd(W,e,J),W._fogDisabled||(mn(e,J.uFogColor,W._fogColor),mn(e,J.uFogNear,W._fogNear),mn(e,J.uFogFar,W._fogFar))),_f(e,J.aPosition),_f(e,J.aNormal),rd(e,J.aUv),rd(e,J.aBatchColor),rd(e,J.aBatchBlend),rd(e,J.aBatchBrightness),rd(e,J.aLineDistance),mn(e,J.uPMatrix,qm(W)),mn(e,J.uViewMatrix,Qg(W,W._7O)),T){var Z=e.getParameter(e.COLOR_CLEAR_VALUE);e.clearColor(0,0,0,0),e.disable(e.BLEND),rd(e,J.aNormal),dp(e,W._cube.vs,A,J.aPosition),Ac(e,W._cube.is),ls(T,W,yi,0),ls(T,W,Li,6),ls(T,W,Tg,12),ls(T,W,Cn,18),ls(T,W,Fe,24),ls(T,W,Fd,30),_f(e,J.aNormal),gl(e,Z)}else if(Q){Q.value=2;var Z=e.getParameter(e.COLOR_CLEAR_VALUE);e.clearColor(0,0,0,0),e.disable(e.BLEND),W._95I(e,J,Q),xe(W,Q),Bf(W,W._polylineModelMap,Q),Bf(W,W._wireframeModelMap,Q),mn(e,J.uTransparent,!0),W._95I(e,J,Q,!0),xe(W,Q,!0),Bf(W,W._polylineModelMap,Q,!0),Bf(W,W._wireframeModelMap,Q,!0),mn(e,J.uTransparent,!1),e.disable(e.DEPTH_TEST),W._30O._42(e,J,Q),e.enable(e.DEPTH_TEST),gl(e,Z)}else e.disable(e.BLEND),W._31O._42(e,J),W._95I(e,J),xe(W),Bf(W,W._polylineModelMap),Bf(W,W._wireframeModelMap),e.enable(e.BLEND),e.depthMask(!1),mn(e,J.uTransparent,!0),W._95I(e,J,A,!0),xe(W,A,!0),Bf(W,W._polylineModelMap,A,!0),Bf(W,W._wireframeModelMap,A,!0),mn(e,J.uTransparent,!1),e.depthMask(!0),e.disable(e.BLEND),e.disable(e.DEPTH_TEST),W._32O._42(e,J),W._30O._42(e,J),e.enable(e.DEPTH_TEST);dp(e,A),Ac(e,A),W._33Q=!1}}},_95I:function(G,d,M,m){var H=this,z=function(A){return m?A:!A};H.dm().each(function(L){if(H.isVisible(L)&&(!K||o)){if(!M&&H.isTransparentMask(L))return;var q=H.getData3dUI(L);q&&q._42(G,d,M,z)}})},getLogicalPoint:function(E){return Af(E,this._canvas)},getHitFaceInfo:function(D){D.target&&(D=this.lp(D));var X=this.getDataInfoAt(D);if(X){var k=this._1o.face(X.data,cn(D.x,D.y));if(k)return{data:X.data,face:k}}return A},getDataAt:function(a){var E=this.getDataInfoAt(a);return E?E.data:A},getDataInfoAt:function(F,r){return F.target&&(F=this.lp(F)),this._1o.get(cn(F.x,F.y,r),!0)},getDatasInRect:function(O){return this._1o.get(O)},setEditable:function(N){var B=this,i=B._editable;B._editable=N,this.fp(rq,i,N)},isEditable:function(l){var U=this;return U._editable?vj(l)?l.s("3d.editable")?U._editableFunc?U._editableFunc(l):!0:!1:!1:!1},isSelectable:function(H){return H.s("3d.selectable")&&this.sm().isSelectable(H)},isMovable:function(G){var s=this;return yb(G)&&G.getStyle(Ri)!==ig?!1:G.s("3d.movable")?s._movableFunc?s._movableFunc(G):!0:!1},isSizeEditable:function(_){return vj(_)?this._sizeEditableFunc?this._sizeEditableFunc(_):!0:!1},isRotationEditable:function(C){return vj(C)&&C.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(C):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(J){this.setZoom(bg,J)},zoomOut:function(p){this.setZoom(1/bg,p)},setZoom:function(w,J){if(1!==w){var k=this;if(k._ortho)return k.setOrthoZoom(w,J),void 0;k._14o&&k._14o.stop(!0);var F=1/w,T=k._eye,N=k._center,$=N[0]+(T[0]-N[0])*F-T[0],q=N[1]+(T[1]-N[1])*F-T[1],t=N[2]+(T[2]-N[2])*F-T[2];if(!(Qd(T,N)<k._moveStep&&1>F)){if(J=Cf(J)){var x=Dk(T);return J.action=function(J){k.fi({kind:k._zooming?"betweenZoom":"beginZoom"}),k._zooming=1,T[0]=x[0]+$*J,T[1]=x[1]+q*J,T[2]=x[2]+t*J,k.fp(Qb,A,T)},J._37o=function(){delete k._14o,delete k._zooming,k.fi({kind:"endZoom"}),k.onZoomEnded()},k._14o=xr(J)}T[0]+=$,T[1]+=q,T[2]+=t,k.fp(Qb,A,T)}}},setOrthoZoom:function(r,o){if(1!==r){var D=this;D._14o&&D._14o.stop(!0);var Y=D._orthoWidth,d=Y/r-Y;if(!(Y<D._moveStep&&r>1))return(o=Cf(o))?(o.action=function(L){D.fi({kind:D._zooming?"betweenZoom":"beginZoom"}),D._zooming=1,D.setOrthoWidth(Y+d*L)},o._37o=function(){delete D._14o,delete D._zooming,D.fi({kind:"endZoom"}),D.onZoomEnded()},D._14o=xr(o)):(D.setOrthoWidth(Y/r),void 0)}},getPositionInfo:function(B){var b=this,M=b._eye,I=b._center,l=b.getAspect(),g=B?ub(jf(I,M,!0),jf(B,M)):Qd(M,I);if(b._ortho){var f=b._orthoWidth;
return{length:g,height:f/l,width:f}}var L=2*c(b._fovy/2)*g;return{length:g,height:L,width:L*l}},getCenterInfo:function(){var r=this;return r._81O||(r._81O=r.getPositionInfo()),Dk(r._81O)},rotate:function(S,N,f,e){var R=this;if(S||N){e==A&&(e=R._firstPersonMode),R._88O&&R._88O.stop(!0);var V=R._center,Z=R._eye,d=R.getCenterInfo().length,I=e?V:Z,J=e?Z:V,k=jf(I,J),F=_(k[0],k[2]),u=_(s(k[0]*k[0]+k[2]*k[2]),k[1]),L=e?zq:Qb;return e&&(N=-N),(f=Cf(f))?(f.action=function(j){R.fi({kind:R._rotating?"betweenRotate":"beginRotate"}),R._rotating=1;var t=F+S*j,X=u+N*j;X=up(X),k[0]=d*m(X)*m(t),k[1]=d*U(X),k[2]=d*m(X)*U(t),I[0]=J[0]+k[0],I[1]=J[1]+k[1],I[2]=J[2]+k[2],R.fp(L,A,I)},f._37o=function(){delete R._88O,delete R._rotating,R.fi({kind:"endRotate"}),R.onRotateEnded()},R._88O=xr(f)):(F+=S,u+=N,u=up(u),k[0]=d*m(u)*m(F),k[1]=d*U(u),k[2]=d*m(u)*U(F),I[0]=J[0]+k[0],I[1]=J[1]+k[1],I[2]=J[2]+k[2],R.fp(L,A,I),void 0)}},pan:function(i,l,H,w){if(i||l){var d=this;w==A&&(w=d._firstPersonMode),d._89O&&d._89O.stop(!0);var S=Qg(d),b=[S[0]*i,S[4]*i,S[8]*i],I=[S[1]*l,S[5]*l,S[9]*l],D=b[0]+I[0],C=b[1]+I[1],O=b[2]+I[2],h=d._center,P=d._eye;if(w){var t=jg(d.getBoundaries(),P[0],P[2],P[0]+D,P[2]+O,s(D*D+O*O));D=t[0],O=t[1]}if(H=Cf(H)){var o=Dk(P),E=Dk(h);return H.action=function(Z){d.fi({kind:d._panning?"betweenPan":"beginPan"}),d._panning=1,h[0]=E[0]+D*Z,h[1]=E[1]+C*Z,h[2]=E[2]+O*Z,P[0]=o[0]+D*Z,P[1]=o[1]+C*Z,P[2]=o[2]+O*Z,d.fp(Qb,A,P),d.fp(zq,A,h)},H._37o=function(){delete d._89O,delete d._panning,d.fi({kind:"endPan"}),d.onPanEnded()},d._89O=xr(H)}h[0]+=D,h[1]+=C,h[2]+=O,P[0]+=D,P[1]+=C,P[2]+=O,d.fp(Qb,A,P),d.fp(zq,A,h)}},walk:function(h,p,D){if(h){var I=this;D==A&&(D=I._firstPersonMode),I._90O&&I._90O.stop(!0);var X=I._center,z=I._eye,f=jf(X,z,!0);if(D){var j=jg(I.getBoundaries(),z[0],z[2],z[0]+f[0]*h,z[2]+f[2]*h,O(h));if(h=Qd(j),!h)return;f=[j[0]/h,0,j[1]/h]}if(p=Cf(p)){var q=Dk(z),H=Dk(X);return p.action=function(y){I.fi({kind:I._walking?"betweenWalk":"beginWalk"}),I._walking=1;var g=h*y;z[0]=q[0]+f[0]*g,z[1]=q[1]+f[1]*g,z[2]=q[2]+f[2]*g,X[0]=H[0]+f[0]*g,X[1]=H[1]+f[1]*g,X[2]=H[2]+f[2]*g,I.fp(Qb,A,z),I.fp(zq,A,X)},p._37o=function(){delete I._90O,delete I._walking,I.fi({kind:"endWalk"}),I.onWalkEnded()},I._90O=xr(p)}z[0]+=f[0]*h,z[1]+=f[1]*h,z[2]+=f[2]*h,X[0]+=f[0]*h,X[1]+=f[1]*h,X[2]+=f[2]*h,I.fp(Qb,A,z),I.fp(zq,A,X)}},handleScroll:function(U,T){U.preventDefault();var F=this,W=F._moveStep;F.isFirstPersonMode()?F.isPannable()&&F.pan(0,T>0?W:-W):F.isZoomable()&&F.setZoom(0>T?1/he:he)},handlePinch:function(q,r){this.isZoomable()&&this.setZoom(r>q?1/Gb:Gb)},reset:function(){this.setCenter(j.graph3dViewCenter),this.setEye(j.graph3dViewEye),this.setUp(j.graph3dViewUp)},moveSelection:function(d,e,p){var T,h=this,F=h.dm();F&&(T=F.getHistoryManager()),T&&T.beginInteraction(),He(this.sm().toSelection(this.isMovable,this),d,e,p),T&&T.endInteraction()},getMoveMode:function(O,A){var $=A.s("3d.move.mode");if($)return $;var G="88",C="89",_="90";return Td(O)||_b[G]&&_b[C]&&_b[_]?"xyz":_b[G]&&_b[C]?"xy":_b[G]&&_b[_]?"xz":_b[C]&&_b[_]?"yz":_b[G]?"x":_b[C]?"y":_b[_]?"z":"xz"},handleTick:function(){var b=this,$=!1,H=b._moveStep,l=H,r=!1,x=!0,Q=b._rotateStep*(x?-1:1);if(b.isWalkable()||(l=0),b.isPannable()||(H=0),b.isRotatable()||(Q=0),b._32Q){var p=(Vq()-b._32Q)/50;l*=p,H*=p,Q*=p}b._31Q&&(tr(b._31Q),delete b._31Q,delete b._32Q),Nn()&&($=!0,b.pan(-H,0,r,x)),Gj()&&($=!0,b.pan(H,0,r,x)),To()&&($=!0,Td()?b.pan(0,H,r,x):b.walk(l,r,x)),Gf()&&($=!0,Td()?b.pan(0,-H,r,x):b.walk(-l,r,x)),Pb()&&($=!0,b.rotate(-Q,0,r,x)),Zb()&&($=!0,b.rotate(Q,0,r,x)),nj()&&($=!0,b.rotate(0,-Q/2,r,x)),hh()&&($=!0,b.rotate(0,Q/2,r,x)),$&&(b._32Q=Vq(),b._31Q=km(b.handleTick,b))},handleKeyDown:function(F){var n=this;!gb(F)&&Un[F.keyCode]?n.handleTick():tn(F)?n.selectAll():nq(F)?n.handleDelete(F):oh(F)&&this.isResettable()&&n.reset()},checkDoubleClickOnNote:function(p,r,W){var U=this;if(W===ej){if(r.s("note.toggleable"))return r.s(Pd,!r.s(Pd)),U.fi({kind:"toggleNote",event:p,data:r,part:W}),!0}else if(W===Nb&&r.s("note2.toggleable"))return r.s(hp,!r.s(hp)),U.fi({kind:"toggleNote2",event:p,data:r,part:W}),!0;return!1},checkDoubleClickOnRotation:function(o,W,y){return y===Jj?(W.setRotationX(0),!0):y===xg?(W.setRotationY(0),!0):y===Cs?(W.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(t){var M=this,D=M.getWidth()/2,q=M.getHeight()/2,_=M._18Q;return _||(_=qm(M),M._18Q=yp(_,_,Qg(M))),t=hm([t[0],t[1],t[2],1],_),{x:D+D*t[0]/t[3],y:q-q*t[1]/t[3]}},getHitPosition:function(D,i,_){var S=this,e=S.getWidth(),Y=S.getHeight(),k=D.target?S.lp(D):D,p=k.x-e/2,P=k.y-Y/2,s=S.getCenterInfo(),F=Qg(S);i=i?i:[0,0,0],_=_?_:[0,1,0],p=p/e*s.width,P=-1*P/Y*s.height;var E=[F[0]*p,F[4]*p,F[8]*p],m=[F[1]*P,F[5]*P,F[9]*P],x=[E[0]+m[0],E[1]+m[1],E[2]+m[2]],f=S.getCenter(),C=Tk(S,i,_,[x[0]+f[0],x[1]+f[1],x[2]+f[2]]);return C?C:[0,0,0]},getLineLength:function(O){this.validate();var B=this.getData3dUI(O);if(B&&B.getCache){var x=B.getCache();if(x)return x[x.length-1].length}return 0},getLineOffset:function(Q,j){this.validate();var S=this.getData3dUI(Q);if(S&&S.getCache){var e=S.getCache();if(e)return Mi(e,j)}return A},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var xk=Lf.Interactor=function(z){this.gv=z};im("Interactor",k,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var al=Lf.DefaultInteractor=function(e){xi(al,this,[e])};im("DefaultInteractor",xk,{handle_contextmenu:function(w){sp(w)},handle_mousewheel:function(f){this.gv.handleScroll(f,f.wheelDelta/40)},handle_DOMMouseScroll:function(C){2===C.axis&&this.gv.handleScroll(C,-C.detail)},handle_keydown:function(C){this.gv.handleKeyDown(C)},handle_mousedown:function($){this.handle_touchstart($)},handle_touchstart:function(t){sp(t);var Y=this,w=Y.gv,B=Vp(t),d=w.getDataInfoAt(t),c=d?d.data:A,O=d?d.part:A,v=w.sm(),S=tp(t),D=_h(t);w.setFocus(t)&&(Y._62O=A,Y._57I=A,c?gb(t)?v.co(c)?v.rs(c):v.as(c):v.co(c)||v.ss(c):B&&(gb(t)?w.isRectSelectable()&&(Y._62O=sr):Y._57I=Ce(t)),Y._31Q&&(tr(Y._31Q),delete Y._31Q,delete Y._32Q),Y._62O||(w.isFirstPersonMode()&&(Td(t)||D>2?Y._62O="pan":w.isMouseRoamable()||F?(Y._62O="roaming",Y.foward=S&&Vp(t),Y._32Q=Vq(),Y._31Q=km(Y.tick,Y)):B||(Y._62O="roaming")),Y._62O||(B&&S&&Yh[O]?(Y._62O=O,Y.p3=c.p3()):B&&S&&vj(c)&&w.isSelected(c)&&w.isMovable(c)?(Y._62O="move",Y.p3=c.p3(),Y.movedata=c):F&&(D>2?Y._62O="pan":2===D&&(Y.dist=xj(t),Y._62O="pinch")))),Y.point=w.lp(t),_j(Y,t),Mk(t)?w.handleDoubleClick(t,c,O):w.handleClick(t,c,O))},tick:function(){var K=this,B=K.gv,u=B._moveStep;K.point&&B.isWalkable()&&(K._32Q&&(u*=(Vq()-K._32Q)/50),B.walk(K.foward?u:-u),K._32Q=Vq(),K._31Q=km(K.tick,K))},handle_mouseup:function(K){this.handle_touchend(K)},handle_touchend:function(v){var e=this._57I;e&&(Qd(e,Ce(v))<=1&&this.gv.sm().cs(),this._57I=A)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(G){var l,x,o=this,s=o.gv,P=o._62O,F=o.point,u=s.dm(),K=u.getHistoryManager(),T=s.lp(G),p=T.x-F.x,c=T.y-F.y,$=-N*p/s.getWidth(),v=-N*c/s.getHeight();if("roaming"===P)o.rotate(G,$/2,v/2);else if(P===Jj||P===xg||P===Cs)K&&!s._86O&&K.beginInteraction(),s.fi({kind:s._86O?"betweenEditRotation":"beginEditRotation",event:G}),s._86O=1,s.sm().each(function(V){if(vj(V)&&s.isRotationEditable(V)){var c=O($)>O(v)?$:v;P===Jj?V.setRotationX(V.getRotationX()+c):P===xg?V.setRotationY(V.getRotationY()+c):P===Cs&&V.setRotationZ(V.getRotationZ()+c)}});else if("move"===P||Yh[P]){P===vc||P===Lr||P===Qq?(K&&!s._87O&&K.beginInteraction(),s.fi({kind:s._87O?"betweenEditSize":"beginEditSize",event:G}),s._87O=1):(K&&!s._moving&&K.beginInteraction(),s.fi({kind:s._moving?"betweenMove":"beginMove",event:G}),s._moving=1);var X,w=o.p3,t=s.getPositionInfo(w),V=Qg(s);X=P===Ee?"x":P===js?"y":P===Mn?"z":P===vc?"sx":P===Lr?"sy":P===Qq?"sz":s.getMoveMode(G,o.movedata),p=p/s.getWidth()*t.width,c=-1*c/s.getHeight()*t.height;var n,W,g=[V[0]*p,V[4]*p,V[8]*p],A=[V[1]*c,V[5]*c,V[9]*c],H=g[0]+A[0],J=g[1]+A[1],a=g[2]+A[2],b=[w[0]+H,w[1]+J,w[2]+a],f=jf(s.getEye(),b,!0);if("xyz"===X?(n=b,s.moveSelection(H,J,a)):"xz"===X?(n=Tk(s,w,[0,1,0],b),n&&s.moveSelection(n[0]-w[0],0,n[2]-w[2])):"xy"===X?(n=Tk(s,w,[0,0,1],b),n&&s.moveSelection(n[0]-w[0],n[1]-w[1],0)):"yz"===X?(n=Tk(s,w,[1,0,0],b),n&&s.moveSelection(0,n[1]-w[1],n[2]-w[2])):"x"===X||"sx"===X?(f[0]=0,n=Tk(s,w,f,b),n&&(W=n[0]-w[0],"x"===X?s.moveSelection(W,0,0):s.sm().each(function(r){vj(r)&&s.isSizeEditable(r)&&(l=C(fs,r.getWidth()+W),x=l/r.getWidth(),r.setWidth(l),Td(G)&&(r.setHeight(r.getHeight()*x),r.setTall(r.getTall()*x)))}))):"y"===X||"sy"===X?(f[1]=0,n=Tk(s,w,f,b),n&&(W=n[1]-w[1],"y"===X?s.moveSelection(0,W,0):s.sm().each(function(c){vj(c)&&s.isSizeEditable(c)&&(l=C(fs,c.getTall()+W),x=l/c.getTall(),c.setTall(l),Td(G)&&(c.setHeight(c.getHeight()*x),c.setWidth(c.getWidth()*x)))}))):("z"===X||"sz"===X)&&(f[2]=0,n=Tk(s,w,f,b),n&&(W=n[2]-w[2],"z"===X?s.moveSelection(0,0,W):s.sm().each(function(U){vj(U)&&s.isSizeEditable(U)&&(l=C(fs,U.getHeight()+W),x=l/U.getHeight(),U.setHeight(l),Td(G)&&(U.setTall(U.getTall()*x),U.setWidth(U.getWidth()*x)))}))),!n)return;o.p3=n}else if(P===sr){var M=o.div;M||(M=o.div=hr(),qc(o.getView(),M),M.op=F,M.style.background=s.getRectSelectBackground()),s.fi({kind:s._rectSelecting?"betweenRectSelect":"beginRectSelect",event:G}),s._rectSelecting=1,M.rect=ap(M.op,T),Xf(M,M.rect)}else if("pinch"===P&&2===_h(G)){s.fi({kind:s._pinching?"betweenPinch":"beginPinch",event:G}),s._pinching=1;var W=xj(G);s.handlePinch(W,o.dist),o.dist=W}else"pan"===P||Td(G)?o.pan(G,p,c):s.isFirstPersonMode()||(Vp(G)?o.rotate(G,$,v):(o.pan(G,p,0),s.isWalkable()&&(s.fi({kind:s._walking?"betweenWalk":"beginWalk",event:G}),s._walking=1,s.walk(c/s.getHeight()*s.getCenterInfo().height))));o.point=T},pan:function(j,T,O){var h=this.gv;if(h.isPannable()){var W=h.getCenterInfo(),x=T/h.getWidth()*W.width,n=-1*O/h.getHeight()*W.height;h.fi({kind:h._panning?"betweenPan":"beginPan",event:j}),h._panning=1,h.pan(-x,-n)}},rotate:function(x,J,C){var w=this.gv;w.isRotatable()&&(w.fi({kind:w._rotating?"betweenRotate":"beginRotate",event:x}),w._rotating=1,w.rotate(J,C))},handleWindowMouseUp:function(b){this.handleWindowTouchEnd(b)},handleWindowTouchEnd:function(r){var Z=this,X=Z.gv,t=X.dm(),y=t.getHistoryManager(),H=Z.div;if(H){var k=X.getDatasInRect(H.rect);if(!k.isEmpty()){var N=X.sm(),c=N.toSelection();k.each(function(G){N.co(G)?c.remove(G):c.add(G)}),N.ss(c)}ip(H)}X._moving&&(delete X._moving,X.fi({kind:"endMove",event:r}),X.onMoveEnded(),y&&y.endInteraction()),X._panning&&(delete X._panning,X.fi({kind:"endPan",event:r}),X.onPanEnded()),X._rotating&&(delete X._rotating,X.fi({kind:"endRotate",event:r}),X.onRotateEnded()),X._86O&&(delete X._86O,X.fi({kind:"endEditRotation",event:r}),y&&y.endInteraction()),X._87O&&(delete X._87O,X.fi({kind:"endEditSize",event:r}),y&&y.endInteraction()),X._pinching&&(delete X._pinching,X.fi({kind:"endPinch",event:r}),X.onPinchEnded()),X._rectSelecting&&(delete X._rectSelecting,X.fi({kind:"endRectSelect",event:r}),X.onRectSelectEnded()),X._walking&&(delete X._walking,X.fi({kind:"endWalk",event:r}),X.onWalkEnded()),Z.dist=Z.point=Z._62O=Z.p3=Z.movedata=Z.div=Z._57I=Z._32Q=Z._31Q=Z.foward=A}});var Fi=function(H){this.gv=H};Lk(Fi,k,{_iv:!0,iv:function(){this._iv=!0},face:function(c,W){var j=this,O=j.gv.getGL();if(!O||!vj(c))return A;var E=W.x,l=W.width,C=W.height,Q=j.height-W.y-C,Z=u(l/2),P=new Uint8Array(4*l*C),y=0;for(j.iv(),j.validate(c),em(O,j.frame),O.readPixels(E,Q,l,C,O.RGBA,O.UNSIGNED_BYTE,P),em(O,A),j.iv();Z>=y;y++)for(var x=Z-y,r=Z+y,s=x;r>=s;s++)for(var U=x;r>=U;U++)if(s===x||s===r||U===x||U===r){var z=Kc.m[P[4*(s*l+U)]];if(z)return z}},get:function(d,k){this.validate();var T=this,V=T.gv.getGL();if(!V)return A;var a,W,y=d.x,h=d.width,v=d.height,w=T.height-d.y-v,U=u(h/2),N=new Uint8Array(4*h*v),Q=0,O=N.length,o=k?A:new xm,Y=k?A:{};if(em(V,T.frame),V.readPixels(y,w,h,v,V.RGBA,V.UNSIGNED_BYTE,N),em(V,A),k){for(;U>=Q;Q++)for(var F=U-Q,s=U+Q,f=F;s>=f;f++)for(var j=F;s>=j;j++)if((f===F||f===s||j===F||j===s)&&(a=T.info(N,4*(f*h+j))))return a}else for(;O>Q;Q+=4)a=T.info(N,Q),a&&(W=a.data,Y[W._id]||(o.add(W),Y[W._id]=W));return o},info:function(E,h){return this.colorMap[(E[h]<<24)+(E[h+1]<<16)+(E[h+2]<<8)+E[h+3]]},validate:function(v){var L=this,O=L.gv,m=O.getGL();if(m){var E=O.getWidth(),s=O.getHeight(),W=m.RGBA,Q=m.TEXTURE_2D,z=m.RENDERBUFFER,d=m.FRAMEBUFFER;L.texture||(L.texture=on(m),L.render=m.createRenderbuffer(),L.frame=m.createFramebuffer()),(L.width!==E||L.height!==s)&&(rf(m,L.texture),m.texImage2D(Q,0,W,E,s,0,W,m.UNSIGNED_BYTE,A),Pi(m,m.TEXTURE_MIN_FILTER,m.LINEAR),m.bindRenderbuffer(z,L.render),m.renderbufferStorage(z,m.DEPTH_COMPONENT16,E,s),em(m,L.frame),m.framebufferTexture2D(d,m.COLOR_ATTACHMENT0,Q,L.texture,0),m.framebufferRenderbuffer(d,m.DEPTH_ATTACHMENT,z,L.render),rf(m,A),m.bindRenderbuffer(z,A),em(m,A),L.width=E,L.height=s),L._iv&&(L._iv=!1,em(m,L.frame),O._42(v||(L.colorMap={}),1),em(m,A))}}});var nm=function(A){this.gv=A};Lk(nm,k,{gap:0,size:0,_42:function(V,s){var H=this,g=H.gv,o=g._gridGap,B=g._gridSize;if(g._gridVisible){if(H.gap!==o||H.size!==B){for(var y=[],p=g._gridSize/2,J=o*p,O=0;2*p+1>O;O++){var u=6*O,I=6*(2*p+1)+u;y[u]=-J,y[u+1]=0,y[u+2]=-J+O*o,y[u+3]=J,y[u+4]=0,y[u+5]=-J+O*o,y[I]=-J+O*o,y[I+1]=0,y[I+2]=-J,y[I+3]=-J+O*o,y[I+4]=0,y[I+5]=J}H.vs=new ar(y),H.gap=o,H.size=B}wg(g),sm(V,s),Sl(V),Dh(V,s,1,g._gridColor,g._buffer.vs,H.vs),We(V,0,H.vs.length/3,V.LINES),_p(V),Ml(V,s)}else H.vs=H.gap=H.size=A}});var Yb=function(L){this.gv=L};Lk(Yb,k,{_42:function(L,d){var e=this.gv,l=e._buffer.vs,V=e._axisXColor,S=e._axisYColor,k=e._axisZColor,U=e._originAxisVisible,a=e._centerAxisVisible;if(U||a){var H=I?L.TRIANGLES:L.TRIANGLE_FAN,C=L.LINES;if(wg(e),sm(L,d),Sl(L),U){var _=e.getCenterInfo(),D=$(_.width,_.height)/5,v=.8*D,E=.05*D;Dh(L,d,1.5,V,l,new ar([0,0,0,D,0,0,v,E,0,v,0,E,v,-E,0,v,0,-E,v,E,0,0,0,0,0,D,0,E,v,0,0,v,E,-E,v,0,0,v,-E,E,v,0,0,0,0,0,0,D,E,0,v,0,E,v,-E,0,v,0,-E,v,E,0,v])),We(L,0,2,C),We(L,1,6,H),Dh(L,d,A,S),We(L,7,2,C),We(L,8,6,H),Dh(L,d,A,k),We(L,14,2,C),We(L,15,6,H)}if(a){var m=e._center,K=m[0],j=m[1],Y=m[2],_=e.getPositionInfo(m);D=$(_.width,_.height)/20,Dh(L,d,1.5,V,l,new ar([K,j,Y,K+D,j,Y,K,j,Y,K,j+D,Y,K,j,Y,K,j,Y+D])),We(L,0,2,C),Dh(L,d,A,S),We(L,2,2,C),Dh(L,d,A,k),We(L,4,2,C)}_p(L),Ml(L,d)}}});var Nk=function(X){this.gv=X},Ee="edit_tx",js="edit_ty",Mn="edit_tz",Jj="edit_rx",xg="edit_ry",Cs="edit_rz",vc="edit_sx",Lr="edit_sy",Qq="edit_sz",Yh={};Yh[Ee]=1,Yh[js]=1,Yh[Mn]=1,Yh[Jj]=1,Yh[xg]=1,Yh[Cs]=1,Yh[vc]=1,Yh[Lr]=1,Yh[Qq]=1,Lk(Nk,k,{_42:function(V,R,X){var l=this,w=l.gv,Z=w.sm().ld();if(w.isEditable(Z)&&vj(Z)&&(!w.isFirstPersonMode()||!w.isMouseRoamable()&&!F)){wg(w);var o,D,d=w.isMovable(Z),n=w.isRotationEditable(Z),t=w.isSizeEditable(Z),h=w._axisXColor,r=w._axisYColor,i=w._axisZColor,v=w._editSizeColor,p=w.getCenterInfo(),y=$(p.width,p.height)/10,b=y/(X?5:10),K=.7*y,E=.4*K,f=Z.p3(),g=f[0],T=f[1],U=f[2];o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],d&&l._17O(V,R,Z,X,Ee,h,o,[g,T-b,U,g+K,T-b,U,g+K,T,U,g+K,T,U,g,T,U,g,T-b,U,g,T-b,U+b,g+K,T-b,U+b,g+K,T-b,U,g+K,T-b,U,g,T-b,U,g,T-b,U+b]),D=g+K,t&&l._17O(V,R,Z,X,vc,v,o,[D,T-b,U,D+E,T-b,U,D+E,T,U,D+E,T,U,D,T,U,D,T-b,U,D,T-b,U+b,D+E,T-b,U+b,D+E,T-b,U,D+E,T-b,U,D,T-b,U,D,T-b,U+b]),D+=E,n&&l._17O(V,R,Z,X,Jj,h,o,[D,T-b,U,D+E,T-b,U,D+E,T,U,D+E,T,U,D,T,U,D,T-b,U,D,T-b,U+b,D+E,T-b,U+b,D+E,T-b,U,D+E,T-b,U,D,T-b,U,D,T-b,U+b]),o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],d&&l._17O(V,R,Z,X,js,r,o,[g,T,U,g,T+K,U,g-b,T+K,U,g-b,T+K,U,g-b,T,U,g,T,U,g,T,U,g,T,U-b,g,T+K,U-b,g,T+K,U-b,g,T+K,U,g,T,U]),D=T+K,t&&l._17O(V,R,Z,X,Lr,v,o,[g,D,U,g,D+E,U,g-b,D+E,U,g-b,D+E,U,g-b,D,U,g,D,U,g,D,U,g,D,U-b,g,D+E,U-b,g,D+E,U-b,g,D+E,U,g,D,U]),D+=E,n&&l._17O(V,R,Z,X,xg,r,o,[g,D,U,g,D+E,U,g-b,D+E,U,g-b,D+E,U,g-b,D,U,g,D,U,g,D,U,g,D,U-b,g,D+E,U-b,g,D+E,U-b,g,D+E,U,g,D,U]),o=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],d&&l._17O(V,R,Z,X,Mn,i,o,[g,T,U,g,T,U+K,g,T-b,U+K,g,T-b,U+K,g,T-b,U,g,T,U,g,T-b,U,g-b,T-b,U,g-b,T-b,U+K,g-b,T-b,U+K,g,T-b,U+K,g,T-b,U]),D=U+K,t&&l._17O(V,R,Z,X,Qq,v,o,[g,T,D,g,T,D+E,g,T-b,D+E,g,T-b,D+E,g,T-b,D,g,T,D,g,T-b,D,g-b,T-b,D,g-b,T-b,D+E,g-b,T-b,D+E,g,T-b,D+E,g,T-b,D]),D+=E,n&&l._17O(V,R,Z,X,Cs,i,o,[g,T,D,g,T,D+E,g,T-b,D+E,g,T-b,D+E,g,T-b,D,g,T,D,g,T-b,D,g-b,T-b,D,g-b,T-b,D+E,g-b,T-b,D+E,g,T-b,D+E,g,T-b,D])}},_17O:function(x,n,D,f,E,_,r,P){var M=this.gv._buffer;Ne(x,n,f,!0,D,E),qk(x,n,A,!0,A,!0,A,!1),mn(x,n.uDiffuse,_),dp(x,M.vs,new ar(P),n.aPosition),dp(x,M.ns,new ar(r),n.aNormal),Sl(x),We(x,0,12),_p(x),Gh(x,n)}});var nb=function(q,a){this.gv=q,this.s=function(D,t,e){return t==A&&(t=e),t==A?a.getStyle(D):Ro(t,a,q)},this.data=a};Lk(nb,k,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(q,Y,m,F){var Q,G,W,N,g,L,$,K=this,C=K.gv,t=K.data,z=t._id,p=K.s("batch"),l=C._34O,s=C._33O,w=C.isSelectable(t),P=C.getBrightness(t),e=P!=A&&1!==P;if(K._iv){if(W=pf(l,s,t,p),K.validate(W,p?ng[p]||Qe:A),W&&(N=l[z],g=N.size=W.vs.length/3-N.begin,$=W.rs))for(P=e?P:1,L=0;g>L;L++)$.push(P);if(vj(t)){var j=C.getWireframe(t);j&&kp(C,t,j)}K.labelInfo=K.label2Info=K.noteInfo=K.note2Info=K._38o=A,K._24O(fq,"getLabel"),K._24O(Gm,"getLabel2"),K._26O(ej,"getNote"),K._26O(Nb,"getNote2"),K._15O(),K._iv=!1}e&&mn(q,Y.uBrightness,P),G=Ne(q,Y,m,w,t,Hi),G&&(xb(G,l[z],s),xb(G,C._polylineIndexMap[z],C._polylineModelMap),xb(G,C._wireframeIndexMap[z],C._wireframeModelMap)),l[z]||K._80o(q,Y,F),C.isLabelVisible(t)&&((Q=K.labelInfo)&&(Ne(q,Y,m,w,t,fq),K._28O(Q,fq,F)),(Q=K.label2Info)&&(Ne(q,Y,m,w,t,Gm),K._28O(Q,Gm,F))),C.isNoteVisible(t)&&((Q=K.noteInfo)&&(Ne(q,Y,m,w,t,ej),K._29O(Q,ej,F)),(Q=K.note2Info)&&(Ne(q,Y,m,w,t,Nb),K._29O(Q,Nb,F))),(Q=K._38o)&&K._99O(q,Y,Q,m,w,F),e&&mn(q,Y.uBrightness,1)},validate:function(){},_16O:function(){return Ar},_80o:function(){},dispose:function(){},getBodyColor:function(F){var n=this.data,e=this.gv.getBodyColor(n);return e?e:F?n.getStyle(F):A},_24O:function($,S){var _=this,o=_.data,J=_.gv,F=_.s,x=J[S](o);if(x!=A){var w=F($+".scale"),j=F($+".max"),B=_[$+"Info"]={label:x,textureScale:F($+".texture.scale"),color:J[S+"Color"](o),font:F($+".font"),align:F($+".align"),background:J[S+"Background"](o)},r=B.rect=Jf(B,x);j>0&&j<r.width&&(B.labelWidth=r.width,r.width=j),r.x=r.y=0,r.width*=w,r.height*=w,B.mat=_._16O(F($+".autorotate"),F($+".position"),r,F($+".face"),F($+".t3"),F($+".r3"),F($+".rotationMode"));var n=r.width/2,L=r.height/2;B.vs=new ar([-n,L,0,-n,-L,0,n,-L,0,n,L,0]),r.width/=w,r.height/=w}},_26O:function(i,f){var m=this,W=m.data,d=m.gv,H=m.s,F=d[f](W);if(F!=A){var q=H(i+".scale"),e=this[i+"Info"]={note:F,textureScale:H(i+".texture.scale"),expanded:H(i+".expanded"),font:H(i+".font"),color:H(i+".color"),align:H(i+".align"),borderWidth:H(i+".border.width"),borderColor:H(i+".border.color"),background:d[f+"Background"](W)};if(e.expanded){var R=H(i+".max"),O=Jf(e,F);O.width+=6,O.height+=2,R>0&&R<O.width&&(e.labelWidth=O.width,O.width=R);var w={x:-O.width/2,y:-8-O.height,width:O.width,height:O.height+8}}else w={x:-6,y:-18,width:12,height:18};e.mat=m._16O(H(i+".autorotate"),H(i+".position"),A,H(i+".face"),H(i+".t3"),H(i+".r3"),H(i+".rotationMode")),e.rect=w,1!==q&&(w=Dk(w),w.x*=q,w.height*=q,w.y=-w.height,w.width*=q);var U=w.x,_=w.y,l=w.width,L=w.height;e.vs=new ar([U,-_,0,U,-_-L,0,U+l,-_-L,0,U+l,-_,0])}},_28O:function(J,u,v){if(v(this.s(u+".transparent"))){var j=J.rect,M=J.textureScale,p=j.width*M,s=j.height*M;if(p>=1&&s>=1){var x=wn(p,s);1!==M&&(x.translate(x,j.x,j.y),x.scale(M,M),x.translate(x,-j.x,-j.y)),hc(x,J),x.restore(),mr(this,u,J.mat,J.vs,!0)}}},_29O:function(B,m,_){if(_(this.s(m+".transparent"))){var T=B.rect,k=B.textureScale,G=T.x,w=T.y,O=T.width*k,f=T.height*k;if(O>=1&&f>=1){T.x=T.y=0;var R=wn(O,f);1!==k&&R.scale(k,k),op(R,B),R.restore(),T.x=G,T.y=w,mr(this,m,B.mat,B.vs,!1)}}},_99O:function(Q,$,V,F,q,h){if(V){var G=this,o=G.gv,g=G.data,T=o._buffer,i=o._1O,H=V.icons;for(var w in H){var U=H[w],Z=V.rects[w];if(Z&&h(Ro(U.transparent,g,o))){Ne(Q,$,F,q,g,w);var v=Ro(U.shape3d,g,o),X=v?[v]:Ro(U.names,g,o),c=X?X.length:0,b=Ro(U.textureScale,g,o)||1,N=Ro(U.light,g,o);N==A&&(N=v?!0:!1),qk(Q,$,Ro(U.blend,g,o),N,Ro(U.opacity,g,o),Ro(U.reverseFlip,g,o),Ro(U.reverseColor,g,o),Ro(U.reverseCull,g,o));for(var O=0;c>O;O++){var e=X[O],u=Z[O];if(sh(G,u.mat),v)Uq(o,g,Ud(G.s,v),G.s);else{var f=Vd(e);if(f){var C=u.width*b,Y=u.height*b;if(C>=1&&Y>=1){var k=wn(C,Y);Bj(k,f,Ro(U.stretch,g,o),0,0,C,Y,g,o),k.restore(),on(Q,cr,i),Sl(Q,$,i,Ro(U.discardSelectable,g,o),T.uv,Qp),dp(Q,T.vs,u.vs,$.aPosition),dp(Q,T.ns,Mm,$.aNormal),Ac(Q,T.is,gf),ce(Q,0,gf.length),_p(Q,$,i)}}}bn(o)}Gh(Q,$)}}}}});var Ui=function(r,X){xi(Ui,this,[r,X])};Lk(Ui,nb,{_16O:function(Q,q,s,c,x,M,B,a,J){var y=this.data,D=zb(q,y.s3(),s,c,a,J);return Aq(tj(),D,y.p3(),c,x,M,B,Q,y.r3(),y.getRotationMode())},clear:function(){var T=this;T.faceMat=T.mat=T.shapeModel=T.left=T.right=T.front=T.back=T.top=T.bottom=T.csg=A},validate:function(D,k){var E=this,Q=E.gv,X=E.data,L=Ud(E.s),V=cf(X,Q.getMat(X),L?E.s("shape3d.scaleable"):!0);if(E.clear(),D){var p=[];L?Ek(Q,X,L,E.s,E.getBodyColor(),[V],D,p):(Wk(Q,X,D,k,V,yi,p,yc),Wk(Q,X,D,k,V,Tg,p,tl),Wk(Q,X,D,k,V,Fe,p,Ze),Wk(Q,X,D,k,V,Fd,p,Ci),Wk(Q,X,D,k,V,Li,p,Ch),Wk(Q,X,D,k,V,Cn,p,xp)),p.length&&(gi(D.vs,p),gi(D.ns,ol(p)))}else E.mat=V,(E.shapeModel=L)||(E.vf(yi),E.vf(Tg),E.vf(Li),E.vf(Cn),E.vf(Fe),E.vf(Fd))},vf:function(L){var x=this;if(x.gv.getFaceVisible(x.data,L)){var W=zn(x,L);return W.mat&&(x.faceMat=!0),W}},_80o:function(G,r,l){var $=this,v=$.gv,H=$.data,_=v._cube,f=$.shapeModel;wg(v,$.mat),f?Uq(v,H,f,$.s,$.getBodyColor(),l):(dp(G,_.vs,A,r.aPosition),dp(G,_.ns,A,r.aNormal),Ac(G,_.is),$._18O(G,r,$.left,0,l),$._18O(G,r,$.front,6,l),$._18O(G,r,$.right,12,l),$._18O(G,r,$.back,18,l),$._18O(G,r,$.top,24,l),$._18O(G,r,$.bottom,30,l)),bn(v),$.faceMat&&($._18O(G,r,$.left,0,l,!0),$._18O(G,r,$.front,6,l,!0),$._18O(G,r,$.right,12,l,!0),$._18O(G,r,$.back,18,l,!0),$._18O(G,r,$.top,24,l,!0),$._18O(G,r,$.bottom,30,l,!0))},_18O:function(b,d,U,V,Y,g){if(U){if(!Y(U.transparent))return;if(g&&!U.mat||!g&&U.mat)return;g&&wg(this.gv,U.mat);var T=this,Z=T.data,_=T.gv,X=_.getTexture(U.texture,Z),S=U.uv,R=U.uvScale,Q=U.uvOffset,p=U.discardSelectable;if(X)if(S){for(var O=8*(V/6),j=0;8>j;j++)nf[O+j]=S[j];Sl(b,d,X,p,_._buffer.uv,nf,Q,R)}else Sl(b,d,X,p,_._cube.uv,A,Q,R);else Sl(b);qk(b,d,U.blend,U.light,U.opacity,U.reverseFlip,U.reverseColor,U.reverseCull),mn(b,d.uDiffuse,U.color),ce(b,V,6),Gh(b,d),_p(b,d,X),g&&bn(_)}}});var hf=function(F,t){xi(hf,this,[F,t])};Lk(hf,nb,{_25Q:1,validate:function(h){var U=this,o=U.gv,G=U.data,x=U.s,B=x("edge.width"),N=G._40I,a=G._41I;if(U.shapeModel=U.info=A,N&&a){var l,e,z,S,g,P,t,Q,v,T,L=G.isLooped(),E=x(Ri),w=j.getEdgeType(E);if(w){var M=w(G,Vk(U,o,G,L,E),o,U._19Q);if(!M.points||M.points.isEmpty())return;P=U.info={},t=M.segments,g=M.points,Q=g.size();for(var d=N.getElevation(),C=a.getElevation(),W=0;Q>W;W++){var k=g.get(W);k.e==A&&(k.e=d+(C-d)*W/(Q-1))}v=Hl(g.get(0)),T=Hl(g.get(Q-1));var s=Q%2;0===s?(P.c1=Hl(g.get(Q/2-1)),P.c2=Hl(g.get(Q/2))):P.p3=Hl(g.get((Q-s)/2)),P.s1=v,P.s2=Hl(g.get(1)),P.t1=Hl(g.get(Q-2)),P.t2=T}else{g=new xm,P=U.info={};var q=x("edge.offset"),y=x("edge.center"),m=x("edge.source.t3"),O=x("edge.target.t3"),i=N.p3(),n=a.p3();if(m&&(i[0]+=m[0],i[1]+=m[1],i[2]+=m[2]),O&&(n[0]+=O[0],n[1]+=O[1],n[2]+=O[2]),E===ig){t=x("edge.segments");var V=P.points=x(vq)||me;if(Q=V.size()){v=Hl(V.get(0)),T=Hl(V.get(Q-1)),!y&&q&&(z=jf(v,i,!0),q=$(q,Qd(i,v)),i=[i[0]+z[0]*q,i[1]+z[1]*q,i[2]+z[2]*q],z=jf(n,T,!0),q=$(q,Qd(T,n)),n=[n[0]-z[0]*q,n[1]-z[1]*q,n[2]-z[2]*q]);var s=Q%2;0===s?(l=Hl(V.get(Q/2-1)),e=Hl(V.get(Q/2))):P.p3=Hl(V.get((Q-s)/2)),P.s1=i,P.s2=v,P.t1=T,P.t2=n}else!y&&q&&(z=jf(n,i,!0),S=Qd(i,n),q=Pe(q,S),i=[i[0]+z[0]*q,i[1]+z[1]*q,i[2]+z[2]*q],n=[n[0]-z[0]*q,n[1]-z[1]*q,n[2]-z[2]*q]),l=i,e=n;g.add({x:i[0],y:i[2],e:i[1]}),g.addAll(V),g.add({x:n[0],y:n[2],e:n[1]})}else{var c=Vk(U,o,G,L,E);if(U._19Q||(c=-c),L){var X=i[0],D=i[1],H=i[2],Z=N.getTall()/2+c;l=[X-c,D+Z,H],e=[X+c,D+Z,H],g.add({x:X-c,y:H,e:D}),g.add({x:X-c,y:H,e:D+Z}),g.add({x:X+c,y:H,e:D+Z}),g.add({x:X+c,y:H,e:D})}else{z=jf(n,i,!0),S=Qd(i,n);var _={x:i[0],y:i[2]},R={x:n[0],y:n[2]},u=Rn(A,_,R,c),p=u.x-_.x,J=u.y-_.y;q=Pe(q,S),z[0]*=q,z[1]*=q,z[2]*=q,l=[i[0]+z[0]+p,i[1]+z[1],i[2]+z[2]+J],e=[n[0]-z[0]+p,n[1]-z[1],n[2]-z[2]+J],y?(g.add({x:i[0],y:i[2],e:i[1]}),g.add({x:l[0],y:l[2],e:l[1]}),g.add({x:e[0],y:e[2],e:e[1]}),g.add({x:n[0],y:n[2],e:n[1]})):(g.add({x:l[0],y:l[2],e:l[1]}),g.add({x:e[0],y:e[2],e:e[1]}))}}P.c1=l,P.c2=e}P.list=x(Sq)===gr?U.createTubeModel(g,t,B/2,h):U.createLineModel(g,t,B,"edge","edge.dash")}}});var Yo=function(P,q){xi(Yo,this,[P,q])};Lk(Yo,Ui,{_80o:function(a,V,L){var U=this,x=U.gv,O=U.shapeModel;wg(x,U.mat),O?Uq(x,U.data,O,U.s,U.getBodyColor(),L):(Xp(U,a,V,U.left,L),Xp(U,a,V,U.front,L),Xp(U,a,V,U.right,L),Xp(U,a,V,U.back,L),Xp(U,a,V,U.top,L),Xp(U,a,V,U.bottom,L)),bn(x)},validate:function(h,C){var c,Q,d=this,E=d.s,n=d.data,$=n.p3(),b=n._thickness/2,o=n.isClosePath(),r=n.getPoints(),k=n.getSegments(),U=E(en),K=h&&h.uv;if(d.clear(),0>b)Q=d.shapeModel=xc(r,k,E(Zm),E(Pj),U,E(db),n.getTall(),n.getElevation(),o),E(pn)?E("shape3d.image")||delete Q.uv:(delete Q.vs,delete Q.ns,delete Q.uv),E("shape3d.top.image")||delete Q.top_uv,E("shape3d.bottom.image")||delete Q.bottom_uv;else if(E(Sq)===gr)c=Jl(r,k,U,o),Q=d.shapeModel={vs:[]},E("shape3d.image")&&(Q.uv=[],Q.sum=E(db)||Ob(c)||1,Q.len=0),E(Zm)&&!o&&(Q.top_vs=[],E("shape3d.top.image")&&(Q.top_uv=[])),E(Pj)&&!o&&(Q.bottom_vs=[],E("shape3d.bottom.image")&&(Q.bottom_uv=[])),d._12O(c,b);else{var f,J,e,M,V,z,H,X,i,x;c=Jl(r,k,U,o),V=d.vf(Li,K,!1,C),b&&(z=d.vf(Cn,K,!1,C),H=o?A:d.vf(yi,K,!1,C),X=o?A:d.vf(Tg,K,!1,C),i=d.vf(Fe,K,!1,C),x=d.vf(Fd,K,!1,C)),b?d._12O(c,b):V&&c.forEach(function(j){if(M=j.length,M>0)for(f=j[0],e=1;M>e;e++)J=j[e],d.addV(V.vs,f,J),f=J}),d._20Q(c),h||(V&&(V.ns=ol(V.vs),Hf(V,"vs"),Hf(V,Hg)),b&&(z&&(z.ns=ol(z.vs),Hf(z,"vs"),Hf(z,Hg)),H&&(H.ns=ol(H.vs),Hf(H,"vs"),Hf(H,Hg)),X&&(X.ns=ol(X.vs),Hf(X,"vs"),Hf(X,Hg)),i&&(i.ns=ol(i.vs),Hf(i,"vs"),Hf(i,Hg)),x&&(x.ns=ol(x.vs),Hf(x,"vs"),Hf(x,Hg))))}var S=d.mat=tj();ug(S,$),Th(S,n.r3(),n.getRotationMode()),ug(S,cj($)),h&&(Am(d,S,h,Q),d.clear())},_20Q:function(v){var B,N,u,Y,G,P,j,C=this,m=C.front,y=C.back,k=C.top,U=C.bottom,E=m?m.tuv:A,s=y?y.tuv:A,p=k?k.tuv:A,z=U?U.tuv:A,I=0;(E||s||p||z)&&(B=C.s(db)||Ob(v)||1,v.forEach(function(b){if(N=b.length,N>0)for(P=b[0],u=1;N>u;u++)j=b[u],Y=I/B,I+=Qd(P,j),G=I/B,C._14O(m,Y,G),C._14O(y,1-G,1-Y),C._14O(k,Y,G),C._14O(U,Y,G),P=j}))},_14O:function(_,X,h){if(_){var v=_.uv,m=_.tuv;if(m){if(v)var B=v[0]+(v[6]-v[0])*X,V=v[1]+(v[7]-v[1])*X,l=v[2]+(v[4]-v[2])*X,o=v[3]+(v[5]-v[3])*X,d=v[2]+(v[4]-v[2])*h,g=v[3]+(v[5]-v[3])*h,w=v[0]+(v[6]-v[0])*h,J=v[1]+(v[7]-v[1])*h;else B=X,V=0,l=X,o=1,d=h,g=1,w=h,J=0;m.push(l,o,d,g,w,J,w,J,B,V,l,o)}}},_13O:function(Y){var f=Y.uv,q=Y.tuv;q&&(f?q.push(f[2],f[3],f[4],f[5],f[6],f[7],f[6],f[7],f[0],f[1],f[2],f[3]):q.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(X,s){var R,E,y,i,G,Q=this;X.forEach(function(u){if(G=u.length,G>0)for(R={p:u[0],n:!0},i=1;G>i;i++)E=u[i],y=G-1>i?u[i+1]:A,Q.addPoint(R,E,y,s,u)})},addPoint:function(q,L,I,R,_){var r,H,c,$,S,i,t,z,v,p=this,O=q.p,G=q.f,J=q.b,X=p.s("shape3d.side")||Be,M=p.s("shape3d.start.angle"),T=p.shapeModel,k=p.data.isClosePath();if(q.n&&(q.n=!1,G=k&&_.length>2?Rn(_[_.length-2],O,L,R):Rn(A,O,L,R),J=kn(O,G),T?T.top_vs&&p._10O(J,G,X,M,T.top_vs,T.top_uv):(r=p.left)&&(p.addV(r.vs,J,G),p._13O(r))),H=I?Rn(O,L,I,R):k&&_.length>2?Rn(O,L,_[1],R):Rn(O,L,A,R),c=kn(L,H),T){var K,V,Z=T.vs,B=T.uv,E=T.sum;for(B&&(K=T.len/E,T.len+=Qd(O,L),V=T.len/E),i=p._9O(J,G,X,M),t=p._9O(c,H,X,M),z=0;X>z;z++)v=z+1,gi(Z,i[v]),gi(Z,t[z]),gi(Z,i[z]),gi(Z,t[z]),gi(Z,i[v]),gi(Z,t[v]),B&&($=z/X,S=v/X,B.push(K,S,V,$,K,$,V,$,K,S,V,S));!I&&T.bottom_vs&&p._10O(c,H,X,M,T.bottom_vs,T.bottom_uv,!0)}else!I&&(r=p.right)&&(p.addV(r.vs,H,c),p._13O(r)),(r=p.front)&&p.addV(r.vs,G,H),(r=p.back)&&p.addV(r.vs,c,J),(r=p.top)&&p.addH(r.vs,G,H,c,J,!0),(r=p.bottom)&&p.addH(r.vs,J,c,H,G);q.p=L,q.f=H,q.b=c},_10O:function(f,h,a,r,$,v,i){var q,c,I=this,D=I.data,Y=I._9O(f,h,a,r),t=(f.x+h.x)/2,M=(f.y+h.y)/2,G=D.getElevation(),F=0;for(F=0;a>F;F++)i?(gi($,Y[F]),gi($,Y[F+1])):(gi($,Y[F+1]),gi($,Y[F])),gi($,[t,G,M]),v&&(i?(q=N*(F+1)/a+r,c=N*F/a+r):(q=N*F/a+r,c=N*(F+1)/a+r),v.push(.5-.5*U(c),.5-.5*m(c),.5-.5*U(q),.5-.5*m(q),.5,.5))},_9O:function(P,F,L,T){for(var t,v,l=this,J=l.data,K=[],q=(P.x+F.x)/2,x=(P.y+F.y)/2,n=J.getTall()/2,D=J.getElevation(),s=0;L>=s;s++)t=N*s/L+T,v=U(t),K.push([q+(P.x-q)*v,D+n*m(t),x+(P.y-x)*v]);return K},addV:function(c,L,H){var n=L.x,i=L.y,M=H.x,r=H.y,_=this.data,j=_.getElevation(),o=_.getTall()/2;c.push(n,j-o,i,M,j-o,r,M,j+o,r,M,j+o,r,n,j+o,i,n,j-o,i)},addH:function(C,X,q,O,U,V){var e=this.data,p=e.getTall()/2,E=e.getElevation()+(V?p:-p);C.push(X.x,E,X.y,q.x,E,q.y,O.x,E,O.y,O.x,E,O.y,U.x,E,U.y,X.x,E,X.y)},vf:function(S,r,V,f){var Y,c=this,Q=c.gv.getFaceVisible(c.data,S);return(V||Q)&&(Y=zn(c,S,f),Y.vs=[],Y.tuv=Q&&(Y.texture||r)?[]:A,Y.visible=Q),Y}});var fo=function(L,e){xi(fo,this,[L,e])};Lk(fo,nb,{_25Q:1,validate:function(b){var n=this,t=n.data,d=n.s,Y=t.getPoints(),m=Y.size();if(n.shapeModel=n.info=A,m>1){var x=n.info={},L=t.getSegments(),c=t.getThickness(),g=Hl(Y.get(0)),F=Hl(Y.get(m-1)),f=m%2;0===f?(x.c1=Hl(Y.get(m/2-1)),x.c2=Hl(Y.get(m/2))):x.p3=Hl(Y.get((m-f)/2)),x.s1=g,x.s2=Hl(Y.get(1)),x.t1=Hl(Y.get(m-2)),x.t2=F,x.list=d(Sq)===gr?n.createTubeModel(Y,L,c/2,b):n.createLineModel(Y,L,c,"shape.border","shape.dash")}}}),tq(j,{accordionViewExpandIcon:wi(Ij),accordionViewCollapseIcon:wi(Ij,!0),accordionViewLabelColor:bf,accordionViewLabelFont:Pg,accordionViewTitleBackground:dn,accordionViewSelectBackground:Iq,accordionViewSelectWidth:3,accordionViewSeparatorColor:d,splitViewDividerSize:1,splitViewDividerBackground:dn,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Ec,rect:[2,2,12,12],background:Ij}]},propertyViewLabelColor:Ug,propertyViewLabelSelectColor:bf,propertyViewLabelFont:Pg,propertyViewExpandIcon:wi(fn),propertyViewCollapseIcon:wi(fn,!0),propertyViewBackground:Jn,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Wb,propertyViewColumnLineColor:Wb,propertyViewSelectBackground:Iq,listViewLabelColor:Ug,listViewLabelSelectColor:bf,listViewLabelFont:Pg,listViewRowLineVisible:!1,listViewRowLineColor:Wb,listViewSelectBackground:Iq,treeViewLabelColor:Ug,treeViewLabelSelectColor:bf,treeViewLabelFont:Pg,treeViewExpandIcon:wi(Tb),treeViewCollapseIcon:wi(Tb,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Wb,treeViewSelectBackground:Iq,tableViewLabelColor:Ug,tableViewLabelSelectColor:bf,tableViewLabelFont:Pg,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Wb,tableViewColumnLineColor:Wb,tableViewSelectBackground:Iq,treeTableViewLabelColor:Ug,treeTableViewLabelSelectColor:bf,treeTableViewLabelFont:Pg,treeTableViewExpandIcon:wi(Tb),treeTableViewCollapseIcon:wi(Tb,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Wb,treeTableViewColumnLineColor:Wb,treeTableViewSelectBackground:Iq,tableHeaderLabelColor:Ug,tableHeaderLabelFont:Pg,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:rb,tableHeaderBackground:Jn,tableHeaderMoveBackground:ll,tableHeaderInsertColor:Iq,tableHeaderSortDescIcon:Xq(fn,!0),tableHeaderSortAscIcon:Xq(fn),tabViewTabGap:1,tabViewLabelColor:bf,tabViewLabelFont:Pg,tabViewTabBackground:dn,tabViewSelectWidth:3,tabViewSelectBackground:Iq,tabViewMoveBackground:ll,tabViewInsertColor:Iq,toolbarLabelColor:Ug,toolbarLabelSelectColor:bf,toolbarLabelFont:Pg,toolbarBackground:Jn,toolbarSelectBackground:Iq,toolbarItemGap:8,toolbarSeparatorColor:Do},!0);var ye={translateX:1,sortColumn:1},Bb={sortable:1,sortOrder:1,sortFunc:1},Vm={focusData:1},Ll={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Yl={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},yo=function(t,D){D.add(t),t.hasChildren()&&t.eachChild(function(b){yo(b,D)
})},Wj=function(G,m,h,D,O,N,k,X,V,f,e){var y,B=h.getValueType(),r=h.getAlign();if(h.getEnumValues()){var I=h.toEnumLabel(m),W=yn||0,C=0,H=N,z=j.getTextSize(D,I).width;return y=Vd(h.toEnumIcon(m)),y&&(C=N+yn/2,"center"===r?C+=(X-(W+z))/2:"right"===r&&(C=C+X-(W+z)),Ge(G,y,C,k+V/2),H=C+yn/2),I!=A&&(y?hj(G,I,D,O,H,k,X-(H-N),V):hj(G,I,D,O,N,k,X,V,r)),void 0}return m=h.formatValue(m),m!=A?B===Dq?(Gg(G,N,k,X,V,m),void 0):B===Wf||!B&&Nm(m)?(y=Vd(m?wj:Mc),Ge(G,y,N+X/2,k+V/2,f,e),void 0):(hj(G,m,D,O,N,k,X,V,r),void 0):void 0},iq=function(f,m){var r=m.view,N=r.getDataModel().getHistoryManager(),U=$f(f),Z=m.column||m.property;N&&N.beginInteraction(),m.editor=f,f.info=m,r.setCurrentEditor(f),r.getView().insertBefore(U,r._79O),Xf(f,m.editorRect),f.setFocus?f.setFocus():pr(f),f.commitValue=function(){f._17Q&&(f=f._17Q),r.setValue(m.data,Z,f.getValue?f.getValue():f.value),f.close&&f.close(),ip(U)},Z.onEditorCreated&&Z.onEditorCreated(m)},bs=function(k,H,E,Q,O){var B=gn(k,E),X=H.value,P=H.view,b=O.getValueType();return B.onblur=B.onchange=function(){P.endEditing()},"input"===k?(X=O.formatValue(X),X!=A&&(B.value=X),B.onkeydown=function(m){kd(m)&&P.endEditing()},(b===Te||b===_g)&&B.addEventListener(wf,j.numberListener,!1)):k===sr&&Q.forEach(function(U){var o=e.createElement("option");o.innerHTML=O.toEnumLabel(U),o.value=U,O.isEnumEqual(X,U)&&(o.selected=!0),qc(B,o)}),iq(B,H),B},Cd=L.widget={},cg=function(A,y,T){Lk(H+".widget."+A,y,T)};tq(tk,{ms_value:function(r){r.getValue=function(F){var b=this.getItemById(F),p=b.element;return p?p.getValue?p.getValue():p.value:b.selected},r.setValue=function(O,F){var J=this.getItemById(O),M=J.element;M?M.setValue?M.setValue(F):M.value=F:(J.selected=F,this.iv())},r.v=function(D,r){var H=this;if(2===arguments.length)H.setValue(D,r);else{if(!Lc(D))return H.getValue(D);for(var t in D)H.setValue(t,D[t])}return H}},_46o:function(I){I._icon=A,I._accessType=A,I._valueType=A,I._editable=!1,I._batchEditable=!0,I._align=yi,I._nullable=!0,I._emptiable=!1,I.setParent=yk,I.formatValue=function(s){var g=this,Q=g._valueType;if(g.getEnumValues())return g.toEnumLabel(s);if(Q===Wf)return!!s;if(s!=A){if(Q===Te)return r(s);if(Sj(s))return yg(s)}return s},I.setEnum=function(o,k,C,P,w,t){var s=this;o&&!Uh(o)&&o.values&&(P=o.editable,C=o.icons,k=o.labels,w=o.strict,t=o.maxHeight,o=o.values),rc(o)&&(o=o._as),rc(k)&&(k=k._as),rc(C)&&(C=C._as),s._enumValues=o,s._enumLabels=k,s._enumIcons=C,s._enumEditable=P,s._enumStrict=w==A?!0:w,s._enumMaxHeight=t,o&&o.length&&Sj(o[0])&&(s._valueType=_g),s.fp("enum",!1,!0)},I.getEnumMaxHeight=function(){return this._enumMaxHeight},I.isEnumEditable=function(){return this._enumEditable},I.getEnumValues=function(){return this._enumValues},I.getEnumLabels=function(){return this._enumLabels},I.getEnumIcons=function(){return this._enumIcons},I.isEnumStrict=function(){return this._enumStrict},I.isEnumEqual=function(u,$){return this._enumStrict?u===$:u==$},I.toEnumLabel=function(h){var F=this,y=F._enumValues,C=F._enumLabels;if(y&&C)for(var G=0;G<y.length;G++)if(F.isEnumEqual(h,y[G]))return C[G];return h},I.toEnumIcon=function(Z){var S=this,l=S._enumValues,j=S._enumIcons;if(l&&j)for(var J=0;J<l.length;J++)if(S.isEnumEqual(Z,l[J]))return j[J];return d}},_45o:function(o){o._87o=function(K,s,N,Z,T,e){if(K){var P=this,y=P._90I,C=hr(1);P._columnLineVisible&&(T-=1),P._rowLineVisible&&(e-=1),0>=T||0>=e||(P._90I||(y=P._90I={}),y[s]||(y[s]=new xm),Xf(C,P.tx()+N,P.ty()+Z,T,e),qc(C,K),P._view.insertBefore(C,P._79O),K.onParentAdded&&K.onParentAdded(C),y[s].add(C))}},o._76o=function(){var i=this,n=i._90I;if(n){for(var h in n)n[h].each(function(A){ip(A)});delete i._90I}},o._77o=function(W){var I=this;if(I._90I){var U=I._90I[W];U&&(U.each(function(l){ip(l)}),delete I._90I[W])}}},_47o:function(F){F.getValue=function(q,Q){return Q.getValue?Q.getValue(q,Q,this):Vr(q,Q.getAccessType(),Q.getName())},F.setValue=function(y,O,N){if(O.isEmptiable()||""!==N||(N=d),O.isNullable()||N!=A){var k=this,Y=O.getName(),r=O.getAccessType(),T=O.getValueType();T===Te&&qd(N)?N=P(N):T===_g&&qd(N)?N=parseFloat(N):T===Wf&&qd(N)&&(N="true"===N),k._batchEditable&&O._batchEditable&&k.isSelected(y)?k.sm().each(function(z){O.setValue?O.setValue(z,O,N,k):Lj(z,r,Y,N)}):O.setValue?O.setValue(y,O,N,k):Lj(y,r,Y,N)}},F.setCurrentEditor=function(S){this.endEditing(),this._currentEditor=S,this.redraw()},F.isEditing=function(r,Z){var _=this,e=_._currentEditor;if(!e)return!1;if(Z){var y=e.info;return y?(y.column||y.property)===Z&&y.data===r:!1}return!0},F.endEditing=function(){var k=this,x=k._currentEditor,P=k.getDataModel().getHistoryManager();x&&(delete k._currentEditor,x.commitValue&&x.commitValue(x.info),k.redraw(),P&&P.endInteraction())},F.beginEditing=function(s){this.endEditing();var e=this,Z=s.column||s.property;if(Z.beginEditing)Z.beginEditing(s);else{var N=s.data,_=s.value,c=e.getSelectBackground(N),J=Z.getEnumValues(),v=Z.getSlider(),L=Z.getColorPicker();if(v){var y=Sb(Cd.Slider,v);return y.setValue(_),y.getView().onblur=function(){e.endEditing()},y.isInstant()&&(y.onValueChanged=function(){e.setValue(N,Z,y.getValue())}),iq(y,s),void 0}if(L||Z.getValueType()===Dq){var r=Sb(Cd.ColorPicker,L);return r.setValue(_),r.onClosed=function(){e.endEditing()},r.isInstant()&&(r.onValueChanged=function(p,s){e.setValue(N,Z,s)}),iq(r,s),r.open(),void 0}if(J){if(Cd.ComboBox){var g=new Cd.ComboBox;g.setValue(_),g.setValues(J),g.setLabels(Z.getEnumLabels()),g.setIcons(Z.getEnumIcons()),g.setEditable(Z.isEnumEditable()),g.setStrict(Z.isEnumStrict()),g.setMaxHeight(Z.getEnumMaxHeight()),g.onClosed=function(){e.endEditing()},iq(g,s),g.open()}else bs(sr,s,c,J,Z);return}var X=Z.getValueType();if(X===Wf||Nm(_))return e.setValue(N,Z,!_),void 0;if(Z.getItemEditor()){var d=Ym(Z.getItemEditor()),C=new d(N,Z,e,s),q=C.getView();return q._17Q=C,C.setValue(_),Lh(q),iq(q,s),C.editBeginning&&C.editBeginning(),void 0}bs("input",s,c,A,Z)}}},_44o:function(U){U.init=function(c){var y=this,B=y.th=new qq(c),Q=y._view=Pr(1,y);y.tv=y._tableView=c,qc(Q,B.getView()),qc(Q,c.getView()),B.mp(function($){$.property===Hh&&y.iv()}),y.iv()},U.getTableView=function(){return this.tv},U.getTableHeader=function(){return this.th},U.getDataModel=function(){return this.tv.dm()},U.getColumnModel=function(){return this.tv.getColumnModel()},U.setColumns=function(U){this.tv.setColumns(U)},U.addColumns=function(F){this.tv.addColumns(F)},U.endEditing=function(){this.tv.endEditing()},U.validateImpl=function(){var L=this,u=L.th,n=se(u),c={x:0,y:0,width:L.getWidth(),height:n};Xf(u,c),c.y=n,c.height=C(0,L.getHeight()-n),Xf(L.tv,c)}},ms_vs:function(Q){Q._41o=function(){return this._29I.height<this._59I},Q._43o=function(){var I=this;I._41o()&&(I._58I||(z(function(){I._94O()},Zq),I.iv()),I._58I=new Date)},Q._94O=function(){var t=this;if(t._58I){var j=new Date;j.getTime()-t._58I.getTime()>=Zq?(delete t._58I,t.iv()):z(function(){t._94O()},Zq)}},Q._93I=function(){var o=this,F=o._27I;if(o._58I||!o._autoHideScrollBar){F||qc(o._79O,F=o._27I=hr());var y=o._29I,L=y.height,V=o._59I,v=o.getScrollBarSize(),U=y.width-v-2,I=L*(-o.ty()/V),O=L*(L/V),p=F.style;V>L?(So>O&&(I=I+O/2-So/2,0>I&&(I=0),I+So>L&&(I=L-So),O=So),p.visibility=Hc,p.background=o.getScrollBarColor(),p.borderRadius=v/2+Ae,Xf(F,U,I,v,O)):p.visibility=Np}else F&&(F.style.visibility=Np)}},ms_hs:function(b){b._40o=function(){return this._29I.width<this._91I},b._42o=function(){var n=this;n._40o()&&(n._95O||(z(function(){n._94I()},Zq),n.iv()),n._95O=new Date)},b._94I=function(){var C=this;if(C._95O){var b=new Date;b.getTime()-C._95O.getTime()>=Zq?(delete C._95O,C.iv()):z(function(){C._94I()},Zq)}},b._92I=function(){var I=this,C=I._28I;if(I._95O||!I._autoHideScrollBar){C||qc(I._79O,C=I._28I=hr());var L=I._29I,$=L.width,U=I._91I,Y=I.getScrollBarSize(),w=L.height-Y-2,y=$*(-I.tx()/U),b=$*($/U),m=C.style;U>$?(So>b&&(y=y+b/2-So/2,0>y&&(y=0),y+So>$&&(y=$-So),b=So),m.visibility=Hc,m.background=I.getScrollBarColor(),m.borderRadius=Y/2+Ae,Xf(C,y,w,b,Y)):m.visibility=Np}else C&&(C.style.visibility=Np)}}}),Tm(wj,Pf(16,16,[{type:rp,rect:[1,1,14,14],background:Iq},{type:yd,rect:[1,1,14,14],width:1,color:zf},{type:Qm,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Tm(Mc,Pf(16,16,{type:yd,rect:[1,1,14,14],width:1,color:zf})),Tm(gq,Pf(16,16,[{type:tg,rect:[2,2,12,12],borderWidth:1,borderColor:zf,background:"#FFF"},{type:tg,rect:[4,4,8,8],background:Iq}])),Tm(of,Pf(16,16,{type:tg,rect:[2,2,12,12],borderWidth:1,borderColor:zf})),tk._15Q=function(y){y._29I=ad,y._59I=0,y._91I=0,y._5o=function(d){var v=this;v._30I=new xm,v._rows=new xm,v._rowMap={},v._31I=0,v._14I=0,v._view=Pr(1,v),v._canvas=Ad(v._view),qc(v._view,v._79O=hr()),v.dm(d?d:new Al)},y.getCheckIcon=function(D){var $=this.sm(),J=$.co(D);return $.sg()?Vd(J?gq:of):Vd(J?wj:Mc)},y.checkData=function(t){var u=this.sm(),O=u.co(t);u.sg()&&O||(this._32o=1,O?u.rs(t):u.as(t),delete this._32o)},y.getDataAt=function(h){h.target&&(h=this.lp(h));var T=u(h.y/this._rowHeight),E=this._rows;return 0>T||T>=E.size()?A:E.get(T)},y.onDataDoubleClicked=function(){},y.onDataClicked=function(){},y.adjustTranslateX=function(){return 0},y.adjustTranslateY=function(d){var i=this.getHeight()-this._59I;return i>d&&(d=i),d>0?0:r(d)},y.onPropertyChanged=function(w){var h=this,o=w.property;Ll[o]?h.ivm():Vm[o]||h.redraw(),o===er?h._42o():o===fk&&h._43o()},y.getLabel=function(R){return R.toLabel()},y.getLabelFont=function(){return this._labelFont},y.getLabelColor=function(J){var $=this;if($.isCheckMode()){if($._focusData===J)return $._labelSelectColor}else if($.isSelected(J))return $._labelSelectColor;return $._labelColor},y.getStartRowIndex=function(){return this._31I},y.getEndRowIndex=function(){return this._14I},y.getRowDatas=function(){return this._rows},y.getRowIndex=function($){return this._rowMap[$._id]},y.getRowSize=function(){return this._rows.size()},y.getViewRect=function(){return Dk(this._29I)},y.isVisible=function(t){return this._visibleFunc?this._visibleFunc(t):!0},y.getCurrentSortFunc=function(){return this._sortFunc},y.setDataModel=function(B){var Q=this,J=Q._dataModel,L=Q._3o;J!==B&&(J&&(J.umm(Q.handleDataModelChange,Q),J.umd(Q.handleDataPropertyChange,Q),J.umh(Q._15o,Q),L||J.sm().ums(Q._16o,Q)),Q._dataModel=B,B.mm(Q.handleDataModelChange,Q),B.md(Q.handleDataPropertyChange,Q),B.mh(Q._15o,Q),L?L._21I(B):B.sm().ms(Q._16o,Q),Q.fp("dataModel",J,B))},y.validateModel=function(){var I=this;I._rows.clear(),I._rowMap={},I.buildChildren(I._dataModel._roots);var L=I._rows=I._rows.toList(I.isVisible,I),P=0,j=I.getCurrentSortFunc(),$=L.size();for(j&&L.sort(j);$>P;P++)I._rowMap[L.get(P)._id]=P},y.buildChildren=function(Z){var $=this;Z.each(function(m){$._rows.add(m),$.buildChildren(m._children)})},y.handleDataModelChange=function(){this.ivm()},y.handleDataPropertyChange=function(j){"parent"===j.property?this.ivm():this.invalidateData(j.data)},y._15o=function(){this.ivm()},y._16o=function(f){f.datas.each(this.invalidateData,this),this.onSelectionChanged(f)},y.onSelectionChanged=function(q){var s=this,J=s.sm();!s.isAutoMakeVisible()||1!==J.size()||"set"!==q.kind&&"append"!==q.kind||s._32o||s.makeVisible(J.ld())},y.makeVisible=function(R){R&&(this._23I=R,this.iv())},y.scrollToIndex=function(K){var X=this,x=X._29I,N=x.height,O=X._rowHeight,n=O*K;K>=0&&K<X._rows.size()&&N>0&&(n+O>x.y+N?X.ty(-n+N-O):n<x.y&&X.ty(-n))},y.ivm=function(){this.invalidateModel()},y.invalidateModel=function(){var e=this;e._96I||(e._96I=1,e._32I=1,delete e._24I,e.iv())},y.redraw=function(){var E=this;E._32I||(E._32I=1,delete E._24I,E.iv())},y.invalidateData=function(J){var T=this;x?T.redraw():T._32I||(T._24I||(T._24I={}),T._24I[J._id]=J,T.iv())},y.getFocusData=function(){return this._focusData},y.setFocusDataById=function(R){this.setFocusData(this.dm().getDataById(R))},y.setFocusData=function(f){var o=this,z=o._focusData;z!==f&&(o._focusData=f,o.fp("focusData",z,f),z&&o.invalidateData(z),f&&(o.invalidateData(f),o.isAutoMakeVisible()&&o.makeVisible(f)))},y.drawRowBackground=function(X,B,b,w,m,F,$){var W=this,z=W.isCheckMode();(B===W._focusData&&z||b&&!z)&&Gg(X,w,m,F,$,W.getSelectBackground(B))},y.drawData=function(w,a,u){var I=this,f=I._rowHeight,d=f*u,R=I._29I,D=R.x,E=R.width;w.save(),w.beginPath(),w.rect(D,d,E,f),w.clip(),I._87o(I.drawRow(w,a,I.isSelected(a),D,d,E,f),u,D,d,E,f),w.restore(),I._rowLineVisible&&Gg(w,D,d+f-1,E,1,I._rowLineColor)},y._12I=function(l){var B=this,C=B._31I,G=B._29I,e=G.x,m=G.y,Y=G.width,d=G.height;for(l.beginPath(),l.rect(e,m,Y,d),l.clip(),l.clearRect(e,m,Y,d),B._76o(),B._93db(l);C<B._14I;C++)B.drawData(l,B._rows.get(C),C);B._92db(l)},y._13I=function(J){for(var s,T=this,z=T._rowHeight,O=T._29I,P=O.x,K=O.width,q=T._31I,u=T._30I;q<T._14I;q++)s=T._rows.get(q),T._24I[s._id]&&u.add({data:s,index:q});u.isEmpty()||(J.beginPath(),u.each(function(H){J.rect(P,H.index*z,K,z)}),J.clip(),u.each(function(m){J.clearRect(P,m.index*z,K,z)}),u.each(function(F){T._77o(F.index)}),T._93db(J),u.each(function(K){T.drawData(J,K.data,K.index)}),T._92db(J),u.clear())},y.validateImpl=function(){var r=this,j=r._canvas,w=r.getWidth(),z=r.getHeight(),Q=r._rowHeight,f=r._32I;(w!==j.clientWidth||z!==j.clientHeight)&&(Ye(j,w,z),f=1);var T=K&&!o;r._96I&&!T&&r.validateModel();var G=r._29I,R={x:-r.tx(),y:-r.ty(),width:w,height:z},J=r._rows.size(),_=Rd(j),v=r._23I;f||dh(R,G)||(f=1),r._29I=R,r._59I=J*Q,r._31I=u(R.y/Q),r._14I=X((R.y+R.height)/Q),r._31I<0&&(r._31I=0),r._14I>J&&(r._14I=J),r._99I&&f&&r._99I(),kj(_,r.tx(),r.ty(),1),f?r._12I(_):r._24I&&r._13I(_),r._93I(),r._92I(),_.restore(),r._32I=r._24I=r._96I=A,v&&(r.scrollToIndex(r.getRowIndex(v)),delete r._23I),r.tx(r.tx()),r.ty(r.ty())}},tk._48o=function(K){K._rootVisible=!0,K._rootData=A,K._35o=function(){this._expandMap={},this._levelMap={}},K.validateModel=function(){var o=this,T=o._rootData;o._rows.clear(),o._levelMap={},o._rowMap={},o._currentLevel=0,T?o._rootVisible?o.isVisible(T)&&o.buildData(T):o.buildChildren(T):o.buildChildren(),delete o._currentLevel},K.buildData=function(W){var k=this,c=W._id,M=k._rows;k._rowMap[c]=M.size(),M.add(W),k._levelMap[c]=k._currentLevel,k.isExpanded(W)&&(k._currentLevel++,k.buildChildren(W),k._currentLevel--)},K.buildChildren=function(Q){var q=this,b=Q?Q._children:q._dataModel._roots,d=q.getCurrentSortFunc();d&&q.isChildrenSortable(Q)?b.toList(q.isVisible,q).sort(d).each(q.buildData,q):b.each(function(M){q.isVisible(M)&&q.buildData(M)})},K.getLevel=function(C){return this._levelMap[C._id]},K.getToggleIcon=function(H){var D=this,p=D._loader,z=D._collapseIcon;return p&&!p.isLoaded(H)?z:H.hasChildren()?D.isExpanded(H)?D._expandIcon:z:A},K.isCheckMode=function(){return this._checkMode!=A},K.isChildrenSortable=function(){return!0},K.handleDataModelChange=function(b){var $=this;b.kind===En?delete $._expandMap[b.data._id]:b.kind===Go&&($._expandMap={}),$.ivm()},K.toggle=function(S){var C=this;C.isExpanded(S)?C.collapse(S):C.expand(S)},K.isExpanded=function(c){return 1===this._expandMap[c._id]},K.expand=function(k){var u=this,v=u._loader;u.isExpanded(k)||(v&&!v.isLoaded(k)&&v.load(k),u._expandMap[k._id]=1,u.ivm(),u.onExpanded(k))},K.onExpanded=function(){},K.collapse=function(f){var u=this;u.isExpanded(f)&&(delete u._expandMap[f._id],u.ivm(),u.onCollapsed(f))},K.onCollapsed=function(){},K.expandAll=function(){var W=this;W._dataModel.each(function(c){c.hasChildren()&&(W._expandMap[c._id]=1)}),W.ivm()},K.collapseAll=function(){this._expandMap={},this.ivm()},K.makeVisible=function(i){if(i){var Q=this;if(!Q._rootData||i.isDescendantOf(Q._rootData)){for(var $=i._parent;$;)Q.expand($),$=$._parent;Q._23I=i,Q.iv()}}},K.checkData=function(H){var b,X=this,t=X._checkMode,P=X.sm(),m=P.co(H);if(!P.sg()||!m){if(X._32o=1,t===i)m?P.rs(H):P.as(H);else if(t===Gp)b=new xm(H),b.addAll(H._children);else if("descendant"===t)b=new xm,yo(H,b);else if("all"===t&&(b=new xm,yo(H,b),!m))for(var E=H._parent;E;)b.add(E),E=E._parent;b&&(m?P.rs(b):P.as(b)),delete X._32o}},K._97I=function(W,J,Y,d,D,v,U){var z=this,Z=z._indent,f=z._levelMap[J._id],T=z.getIconWidth(J),I=Vd(z.getToggleIcon(J));I?(d+=Z*f,Ge(W,I,d+Z/2,D+U/2,J,z),d+=Z):d+=Z*(f+1),z._checkMode&&(Ge(W,z.getCheckIcon(J),d+Z/2,D+U/2,J,z),d+=Z),z.drawIcon(W,J,d,D,T,U),z.drawLabel(W,J,d+T,D,U)}},tk._14Q=function(o){o.getIcon=function(n){return n.getIcon()},o.getIconWidth=function(G){return this.getIcon(G)?this._indent:0},o.drawIcon=function(p,P,z,r,M,h){if(M){var O=this,Y=O.getBodyColor(P),e=Vd(O.getIcon(P),Y);e&&(h-=O.isRowLineVisible()?1:0,Bj(p,e,Se,z,r,M,h,P,O,Y),Cq(p,O.getBorderColor(P),z,r,M,h))}},o.drawLabel=function(y,U,e,V,H){var W=this;hj(y,W.getLabel(U),W.getLabelFont(U),W.getLabelColor(U),e,V,0,H)}},tk._50o=function(H){H._98I=function(){var O=this,V=O._39o=new Al;O._60I=new xm,V.mm(O._17o,O),V.md(O._18o,O),V.mh(O._19o,O)},H.setColumns=function(l){this._39o.clear(),this.addColumns(l)},H.addColumns=function(j){var d=this._39o;j.forEach(function(G){if(!(G instanceof lr)){var m=Ym(G.className);G=Sb(m?m:lr,G)}d.add(G)})},H.onColumnClicked=function(){},H.onCheckColumnClicked=function(){},H._3Q=function(y){for(var s,O=0,B=this._60I,I=B.size();I>O;O++)if(s=B.get(O),s.column===y)return s;return A},H.getColumnAt=function(s){var Q=this._4Q(s);return Q?Q.column:A},H._4Q=function(P){for(var B=this,M=P.target?B.lp(P).x:P.x,t=B._60I,X=0;X<t.size();X++){var v=t.get(X),C=v.startX;if(M>=C&&M<C+v.column.getWidth())return v}return A},H.getToolTip=function(i){var f=this,T=f.getDataAt(i),R=f.getColumnAt(i);return T&&R?R.getToolTip(T,f):A},H.adjustTranslateX=function(t){var _=this.getWidth()-this._91I;return _>t&&(t=_),t>0?0:r(t)},H._99I=function(){var x=this,n=x._29I,A=x._60I;A.clear(),x._91I=0,x._39o._roots.each(function(E){if(E.isVisible()){var K=x._91I+E.getWidth();x._91I<=n.x+n.width&&K>=n.x&&A.add({column:E,startX:x._91I}),x._91I=K}})},H.drawData=function(U,F,m){var V=this,R=V._rowHeight,g=R*m,Z=V.isSelected(F),e=V._29I,K=e.x,c=e.width;V.drawRowBackground(U,F,Z,K,g,c,R),V._60I.each(function(i){var l=i.column,A=i.startX,E=l.getWidth();E>0&&!V.isEditing(F,l)&&(U.save(),U.beginPath(),U.rect(A,g,E,R),U.clip(),V._87o(V.drawCell(U,F,Z,l,A,g,E,R),m,A,g,E,R),V._columnLineVisible&&Gg(U,A+E-1,g,1,R,V._columnLineColor),U.restore())}),V._rowLineVisible&&Gg(U,K,g+R-1,c,1,V._rowLineColor)},H.drawCell=function(O,u,X,j,H,Z,N,d){var C=this;if(j.drawCell)return j.drawCell(O,u,X,j,H,Z,N,d,C);var c=C.getValue(u,j);Wj(O,c,j,C.getLabelFont(u,j,c),C.getLabelColor(u,j,c),H,Z,N,d,u,C)},H.getColumnModel=function(){return this._39o},H._17o=function(){this.redraw()},H._18o=function(j){var s=this;j.data===s._sortColumn&&Bb[j.property]?s.ivm():(s._42o(),s.redraw())},H._19o=function(){this.redraw()},H.getCurrentSortFunc=function(){var m=this,D=m._sortColumn;if(D&&D.isSortable()){var s=D.getSortFunc(),O=Ej===D.getSortOrder()?1:-1;return s||(s=fe),function(N,W){return s.call(m,m.getValue(N,D),m.getValue(W,D),N,W)*O}}return m._sortFunc},H.isCellEditable=function(q,I){return I.isEditable()&&this.isEditable()},H._37O=function(w,N){if(Vp(N))for(var c=this,P=c.lp(N),$=c._60I,K=c._rowHeight,_=c._29I,R=_.x,v=_.y,M=_.width,T=_.height,e=0;e<$.size();e++){var S=$.get(e),H=S.startX,s=S.column,h=s.getWidth();if(s!==c._31o&&s!==c._4o&&c.isCellEditable(w,s)&&P.x>=H&&P.x<H+h){var g={x:H,y:c.getRowIndex(w)*K,width:h,height:K},U={x:g.x+c.tx(),y:g.y+c.ty(),width:g.width,height:g.height},b=0,z=0;return g.x<R?b=g.x-R:g.x+g.width>R+M&&(b=g.x+g.width-R-M),b&&(c.tx(c.tx()-b),U.x-=b),g.y<v?z=g.y-v:g.y+K>v+T&&(z=g.y+K-v-T),z&&(c.ty(c.ty()-z),U.y-=z),c.beginEditing({data:w,column:s,value:c.getValue(w,s),event:N,rect:g,editorRect:U,view:c}),void 0}}}},Cd.BaseItemEditor=function(d,f,n,V){this._data=d,this._column=f,this._master=n,this._editInfo=V},cg("BaseItemEditor",k,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var If=L.Tab=function(){xi(If,this)};Oj("Tab",rn,{ms_ac:["view","closable","disabled"],_icon:A,_closable:!1,_disabled:!1,setParent:yk});var lr=L.Column=function(){xi(lr,this)};Oj("Column",rn,{_46o:1,ms_ac:["accessType","valueType",Hc,rq,ul,Ql,"align",Dq,"sortOrder",ds,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:Ej,_sortFunc:A,_sortable:!0,setWidth:function(X){16>X&&(X=16);var q=this._width;this._width=X,this.fp(Ql,q,X)},getToolTip:function(x,j){return this.formatValue(j.getValue(x,this))}});var Fb=L.Property=function(){xi(Fb,this)};Oj("Property",rn,{_46o:1,ms_ac:["accessType","valueType",rq,ul,"categoryName",Dq,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:A,getToolTip:function(i,O,Z){var S=this;return O?S.formatValue(Z.getValue(i,S)):Z.getPropertyName(S)}}),Cd.AccordionView=function(){var K=this;K._20o={},K._21o=new xm,K._10o=A,K._9o=A,K._11o=A,K._view=Pr(0,K),K.iv()},cg("AccordionView",k,{ms_v:1,ms_fire:1,ms_ac:[xs,ek,"titleHeight",Cm,ke,"titleBackground","selectWidth",Od,"orientation","separatorColor"],_expandIcon:j.accordionViewExpandIcon,_collapseIcon:j.accordionViewCollapseIcon,_titleHeight:Dc,_labelColor:j.accordionViewLabelColor,_labelFont:j.accordionViewLabelFont,_titleBackground:j.accordionViewTitleBackground,_selectBackground:j.accordionViewSelectBackground,_selectWidth:j.accordionViewSelectWidth,_orientation:"v",_separatorColor:j.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(t,K,w,b){var a=this,L=hr();if(a._20o[t])throw t+" already exists";L.onmousedown=sp,L.style.cursor=Kb,L.addEventListener(F?zl:An,function(G){sp(G)},!1),L.addEventListener(F?ci:kq,function(V){sp(V),Vp(V)&&(a._10o===t?a.collapse():a.expand(t))},!1),qc(a._view,L),a._20o[t]={content:K,div:L,canvas:Ad(L),icon:b},a._21o.add(t),w&&a.expand(t),a.iv()},remove:function(h){var u=this,k=u._20o[h];k&&(ip(k.div),delete u._20o[h],u._21o.remove(h),u.iv())},clear:function(){var X=this;X._20o={},X._21o.clear(),X.iv()},isExpanded:function(h){return this._10o===h},expand:function(A){var L=this;L._20o[A]&&L._10o!==A&&(L._10o=A,L.onExpanded(A),L.iv())},onExpanded:function(){},collapse:function(){var h=this;h._10o&&(h.onCollapsed(h._10o),delete h._10o,h.iv())},onCollapsed:function(){},initCanvas:function(z,g,K){Ye(z,g,K);var n=Rd(z);return kj(n,0,0,1),n.clearRect(0,0,g,K),n},drawTitle:function(s,m,y,h,e){var b=this,F=Vd(e.icon),M=b.isExpanded(m),T=b._titleHeight,Z=b._titleBackground,k=b._selectWidth,P=b._separatorColor,O=Vd(M?b._expandIcon:b._collapseIcon),H=k+4;Gg(s,0,0,y,h,Z),M&&k&&Gg(s,0,0,k,h,b._selectBackground),(M||b._21o.get(b._21o.size()-1)!==m)&&Gg(s,0,h-1,y,1,P?P:Wd(Z)),F&&(Ge(s,F,H+zm(F)/2,T/2),H+=zm(F)+2),hj(s,m,b.getLabelFont(m),b.getLabelColor(m),H,0,0,T),O&&Ge(s,O,y-zm(O)/2-4,T/2)},validateImpl:function(){var g=this,v=g._view,s=0,I=0,X=g.getWidth(),o=g.getHeight(),F=g._titleHeight,c=g._21o.size()*F,H=g._11o,t=g._9o;delete g._11o,delete g._9o,g._21o.each(function(q){var A,h,l=g._20o[q],H=l.content,V=g._10o===q;om(g)?(Xf(l.div,s,0,F,o),A=g.initCanvas(l.canvas,F,o),Io(A,0,o),$e(A,-p),g.drawTitle(A,q,o,F,l),A.restore(),V?(h=C(0,X-c),H&&(g._11o=H,g._9o=$f(H),Xf(H,s+F,0,h,o)),s+=F+h):s+=F):(Xf(l.div,0,I,X,F),A=g.initCanvas(l.canvas,X,F),g.drawTitle(A,q,X,F,l),A.restore(),V?(h=C(0,o-c),H&&(g._11o=H,g._9o=$f(H),Xf(H,0,I+F,X,h)),I+=F+h):I+=F)});var V=g._9o;H&&H!==g._11o&&H.endEditing&&H.endEditing(),V&&V!==t&&qc(v,V),t&&t!==V&&ip(t)}}),Cd.SplitView=function(S,O,D,i){var F=this,n=F._dividerDiv=hr(),B=F._60O=Ad(),K=F._61O=Ad(),p=B.style,o=K.style;F._view=Pr(1,F),qc(F._view,n),p.msTouchAction=us,p.pointerEvents=us,p.cursor=Kb,o.msTouchAction=us,o.pointerEvents=us,o.cursor=Kb,S&&F.setLeftView(S),O&&F.setRightView(O),D&&F.setOrientation(D),i!=A&&F.setPosition(i),F.setStatus(Mb),new lp(F)},cg("SplitView",k,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:j.splitViewDividerSize,_dividerBackground:j.splitViewDividerBackground,_dragOpacity:j.splitViewDragOpacity,_toggleIcon:j.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(X,F){var G=this,K=G._position;isNaN(X)||(F||(G._82O=0>X?-1:X>1?1:0),G._position=X,G.fp(Ig,K,X))},getLeftView:function(){return this._leftView},setLeftView:function(b){var o=this,t=o._leftView,V=o._view;if(o._leftView!==b){if(t&&t!==o._rightView){var s=$f(t);s.parentNode===V&&ip(s)}if(o._leftView=b,b){var L=$f(b);L.parentNode!==V&&V.insertBefore(L,o._dividerDiv)}o.fp("leftView",t,b)}},getRightView:function(){return this._rightView},setRightView:function(J){var U=this,t=U._rightView,Y=U._view;if(U._rightView!==J){if(t&&t!==U._leftView){var b=$f(t);b.parentNode===Y&&ip(b)}if(U._rightView=J,J){var e=$f(J);e.parentNode!==Y&&Y.insertBefore(e,U._dividerDiv)}U.fp("rightView",t,J)}},validateImpl:function(){var K=this,H=K._draggable,E=K._position,x=K.getWidth(),M=K.getHeight(),Q=K._dividerSize,y=K._dividerBackground,f=F?18:8,D=K._dividerDiv,Y=K._82O,L=K._60O,_=K._61O,U=K._toggleIcon,V=K._status,i=D.style,t=null,g=F?20:4,k=U.comps[0];Q>=f||0===Q?K._coverDiv&&(ip(K._coverDiv),delete K._coverDiv):K._coverDiv||(K._coverDiv=hr(),I&&(K._coverDiv.style.background=Uk),qc(D,K._coverDiv)),K._togglable?L.parentNode||(qc(D,L),qc(D,_)):(ip(L),ip(_));var Z=K._coverDiv,o=K._leftView,X=K._rightView;if(om(K)){if(Q>x&&(Q=x),V===Mb)if(1===Y)var e=E,G=C(0,x-Q-e);else-1===Y?(G=-E,e=C(0,x-Q-G)):(e=r((x-Q)*E),G=C(0,x-Q-e));else"cl"===V?(e=0,G=C(0,x-Q)):"cr"===V&&(G=0,e=C(0,x-Q));o&&Xf(o,0,0,e,M),X&&Xf(X,e+Q,0,G,M),Xf(D,e,0,Q,M),K._22o=e,Z&&(Xf(Z,Q/2-f/2,0,f,M),Z.style.cursor=H?kk:""),D.style.cursor=H?kk:"";var l=D.clientHeight/2,O=D.clientWidth;Ye(L,O,O),Xf(L,0,l-O-g,O,O),t=Rd(L),kj(t,0,0,1),k.rotation=-p,pp(t,U,0,0,O,O),t.restore(),Ye(_,O,O),Xf(_,0,l+g,O,O),t=Rd(_),kj(t,0,0,1),k.rotation=p,pp(t,U,0,0,O,O),t.restore()}else{if(Q>M&&(Q=M),V===Mb)if(1===Y)var w=E,J=C(0,M-Q-w);else-1===Y?(J=-E,w=C(0,M-Q-J)):(w=r((M-Q)*E),J=C(0,M-Q-w));else"cl"===V?(w=0,J=C(0,M-Q)):"cr"===V&&(J=0,w=C(0,M-Q));o&&Xf(o,0,0,x,w),X&&Xf(X,0,w+Q,x,J),Xf(D,0,w,x,Q),K._22o=w,Z&&(Xf(Z,0,Q/2-f/2,x,f),Z.style.cursor=H?ur:""),i.cursor=H?ur:"";var R=D.clientWidth/2,O=D.clientHeight;Ye(L,O,O),Xf(L,R-O-g,0,O,O),t=Rd(L),kj(t,0,0,1),k.rotation=0,pp(t,U,0,0,O,O),t.restore(),Ye(_,O,O),Xf(_,R+g,0,O,O),t=Rd(_),kj(t,0,0,1),k.rotation=n,pp(t,U,0,0,O,O),t.restore()}i.background=y}});var lp=function(Z){this.sv=Z,this.addListeners()};Lk(lp,k,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(y){var x=this,t=x.sv,Y=t._dividerDiv,j=t._60O,G=t._61O,p=t._status,w=y.target;if(w===j)p===Mb?t.setStatus("cl"):"cr"===p&&t.setStatus(Mb);else if(w===G)p===Mb?t.setStatus("cr"):"cl"===p&&t.setStatus(Mb);else if(tp(y)&&(w===Y||w===t._coverDiv)&&(sp(y),t.isDraggable())){x.resizeDiv=hr();var W=x.resizeDiv.style,K=Y.style,h=t.getLeftView(),z=t.getRightView();x._maskViews=[],[h,z].forEach(function(G){G=G.getView?G.getView():G;var U=hr(),V=U.style;V.left=G.style.left,V.top=G.style.top,V.width=G.offsetWidth+"px",V.height=G.offsetHeight+"px",t.getView().appendChild(U),x._maskViews.push(U)}),W.left=K.left,W.top=K.top,W.width=K.width,W.height=K.height,W.opacity=t.getDragOpacity(),W.background=t.getDividerBackground(),x._85o=x._86o=om(t)?Ce(y).x:Ce(y).y,qc(x.getView(),x.resizeDiv),x._clientPoint=Ce(y),_j(x,y)}},handleWindowTouchMove:function(v){if(tp(v)){var M=this,f=M.sv,N=f._dividerSize,k=M.resizeDiv.style,B=f.getWidth(),g=f.getHeight(),A=f._22o-M._86o;om(f)?(M._85o=Ce(v).x,A+=M._85o,A>B-N&&(A=B-N),0>A&&(A=0),k.left=A+Ae):(M._85o=Ce(v).y,A+=M._85o,A>g-N&&(A=g-N),0>A&&(A=0),k.top=A+Ae)}},handleWindowTouchEnd:function(f){var _=this,W=_.sv,M=W._22o-_._86o+_._85o,h=W._dividerSize,x=om(W)?W.getWidth():W.getHeight(),D=W._82O,R=Qd(_._clientPoint,Ce(f));R>1&&(W.setStatus(Mb),0>M&&(M=0),M>x-h&&(M=x-h),x!==h&&(1===D?W.setPosition(M,1):-1===D?W.setPosition(M-x+h,1):W.setPosition(M/(x-h),1))),_._maskViews&&_._maskViews.forEach(function(N){ip(N)}),ip(_.resizeDiv),_.resizeDiv=_._85o=_._clientPoint=A},handle_mousedown:function(l){Vp(l)&&this.handle_touchstart(l)},handleWindowMouseMove:function(u){this.handleWindowTouchMove(u)},handleWindowMouseUp:function(o){this.handleWindowTouchEnd(o)}}),Cd.TabView=function(){var f=this,k=f._view=Pr(1,f),U=f._91O=hr(1),d=f._tabModel=new Al,x=d.sm(),M=f.invalidate;f._7o=new xm,f._canvas=Ad(U),qc(k,U),qc(k,f._92O=hr(1)),x.setSelectionMode(q),x.ms(M,f),d.mm(M,f),d.md(M,f),d.mh(M,f),new sq(f),f.iv()},cg("TabView",k,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Cm,ke,"tabBackground","selectWidth",Od,"moveBackground","insertColor"],_tabPosition:Fe,_tabHeight:Dc,_tabGap:j.tabViewTabGap,_labelColor:j.tabViewLabelColor,_labelFont:j.tabViewLabelFont,_tabBackground:j.tabViewTabBackground,_selectWidth:j.tabViewSelectWidth,_selectBackground:j.tabViewSelectBackground,_moveBackground:j.tabViewMoveBackground,_insertColor:j.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(l,c,d){var h=new If,E=this._tabModel;return h.setName(l),h.setView(c),E.add(h),d&&E.sm().ss(h),h},getLabel:function(U){return U.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(q){this._23o=q,this.iv()},get:function(g){var x=this,W=x._tabModel;if(Sj(g))return W._roots.get(g);if(qd(g)){var m;return W.each(function(M){g===x.getLabel(M)&&(m=M)}),m}return g instanceof If?g:A},select:function(o){this._tabModel.sm().ss(this.get(o))},remove:function(v){var V=this;if(v=V.get(v)){var f=V._tabModel,h=f._roots.indexOf(v);V._tabModel.remove(v),V._12Q(--h)}},getCurrentTab:function(){return this._8o},hideTabView:function(M,N){N.parentNode===this._92O&&($d(N)?(N.style.display=no,N._tab_=M):ip(N),Sr())},showTabView:function(H,N){$d(N)&&(N.style.display="block",N._tab_=H),N.parentNode!==this._92O&&(qc(this._92O,N),Sr())},_24o:function(){var F,x=this,q=x._8o,f=x._9o,o=x._tabModel.sm().ld();o&&(F=$f(o.getView())),F!==f&&(f&&(q.getView().endEditing&&q.getView().endEditing(),x.hideTabView(q,f)),F&&x.showTabView(o,F)),x._8o=o,x._9o=F,q!==o&&x.onTabChanged(q,o)},onTabChanged:function(){},onTabClosed:function(x,r){this._12Q(--r)},_12Q:function(V){var I=this,i=I._tabModel,P=i.size();if(P&&!i.sm().ld()){V==A&&(V=0),V>=P&&(V=P-1),0>V&&(V=0);for(var r=V;r>=0;r--){var B=I.get(r);if(!B.isDisabled())return I.select(B),B}for(r=V+1;P>r;r++)if(B=I.get(r),!B.isDisabled())return I.select(B),B}},_9Q:function(r){var q=4,R=Vd(r.getIcon());R&&(q+=zm(R,r)+4);var j=this.getLabel(r);return j&&(q+=Vi(this.getLabelFont(r),j).width+4),r.isClosable()&&(q+=10),q},_10Q:function(h,_,r,G,c,f,x){var F,P=this,T=P._tabPosition,Z=r+4,S=P._selectWidth,H=Vd(_.getIcon()),C=_.isDisabled(),D=P.getLabelColor(_),g=P.getLabelFont(_),v=P.getLabel(_),Q=P._selectBackground,M=T===yi+"-vertical",t=T===Tg+"-vertical";(M||t)&&(Z=G+4),C&&(h.globalAlpha=sc),Gg(h,r,G,c,f,x),_===P._8o&&S&&(T===Fe?Gg(h,r,G+f-S,c,S,Q):T===yi?Gg(h,r+c-S,G,S,f,Q):T===Tg?Gg(h,r,G,S,f,Q):M?Gg(h,r+c-S,G,S,f,Q):t?Gg(h,r,G,S,f,Q):Gg(h,r,G,c,S,Q));var Y=c/2;if(M&&(Io(h,Y,G+f/2),$e(h,n),Io(h,-Y,-G-f/2)),H){var X=Tr(H,_),O=zm(H,_);if(M||t){var z=r+c/2,L=Z+X/2;Io(h,z,L),$e(h,p),Io(h,-z,-L),Ge(h,H,r+c/2,Z+X/2,_,P),Io(h,z,L),$e(h,-p),Io(h,-z,-L),Z+=X+4}else Ge(h,H,Z+O/2,G+f/2,_,P),Z+=O+4}return M||t?(Io(h,c/2,Z+c/2),$e(h,p),Io(h,-c/2,-Z-c/2),hj(h,v,g,D,r,Z,f,c),Io(h,c/2,Z+c/2),$e(h,-p),Io(h,-c/2,-Z-c/2)):hj(h,v,g,D,Z,G,c,f),M&&(Io(h,Y,G+f/2),$e(h,-n),Io(h,-Y,-G-f/2)),_.isClosable()&&(h.strokeStyle=D,h.lineWidth=1,h.beginPath(),t?(h.moveTo(r+c-10,G+f-4),h.lineTo(r+c-4,G+f-10),h.moveTo(r+c-4,G+f-4),h.lineTo(r+c-10,G+f-10),h.stroke(),F={x:r+c-12,y:G+f-12,width:12,height:12}):(h.moveTo(r+c-10,G+4),h.lineTo(r+c-4,G+10),h.moveTo(r+c-4,G+4),h.lineTo(r+c-10,G+10),h.stroke(),F={x:r+c-12,y:G,width:12,height:12})),C&&(h.globalAlpha=1),F},validateImpl:function(){var e=this;
e._24o();var U,R=e._canvas,p=e._tabPosition,L=e._91O,c=e._92O,j=e._tabModel,T=e.getWidth(),S=e.getHeight(),D=e._tabHeight,O=e._7o,f=e._tabGap,V=p===Fe,P=p===yi,M=p===Fd,J=p===Tg,o=p===yi+"-vertical",_=p===Tg+"-vertical",k=e._23o,l=0;if((P||J)&&j._roots.each(function(c){l=C(e._9Q(c),l)}),V?(Xf(L,0,0,T,D),U={x:0,y:D,width:T,height:C(0,S-D)}):P?(Xf(L,0,0,l,S),U={x:l,y:0,width:C(0,T-l),height:S}):J?(Xf(L,T-l,0,l,S),U={x:0,y:0,width:C(0,T-l),height:S}):o?(Xf(L,0,0,D,S),U={x:D,y:0,width:C(0,T-D),height:S}):_?(Xf(L,T-D,0,D,S),U={x:0,y:0,width:C(0,T-D),height:S}):(Xf(L,0,S-D,T,D),U={x:0,y:0,width:T,height:C(0,S-D)}),Xf(c,U),o||_){e._9o&&(U.x=0,Xf(e._8o.getView(),U)),Ye(R,D,S);var s=Rd(R),u=0;if(kj(s,0,e.ty(),1),s.clearRect(0,0,D,S),O.clear(),j._roots.each(function(L){var N,Q=e._9Q(L);k&&k.tab===L||(N=e._10Q(s,L,0,u,D,Q,e._tabBackground),N&&_&&(N.x=T-12)),O.add({_75o:N,tab:L,startY:u,endY:u+Q,height:Q}),u+=Q+f}),e._23Q=C(0,u-f),k){var i=k.position;e._10Q(s,k.tab,0,k.startY,D,k.height,e._moveBackground),Gg(s,0,i,D,1,e._insertColor)}s.restore(),e.ty(e.ty())}else if(P||J){e._9o&&(U.x=0,Xf(e._8o.getView(),U)),Ye(R,l,S);var s=Rd(R),u=0;if(kj(s,0,e.ty(),1),s.clearRect(0,0,l,S),O.clear(),j._roots.each(function(z){var X;k&&k.tab===z||(X=e._10Q(s,z,0,u,l,D,e._tabBackground),X&&J&&(X.x=T-12)),O.add({_75o:X,tab:z,startY:u,endY:u+D,height:D}),u+=D+f}),e._23Q=C(0,u-f),k){var i=k.position;e._10Q(s,k.tab,0,k.startY,l,k.height,e._moveBackground),Gg(s,0,i,l,1,e._insertColor)}s.restore(),e.ty(e.ty())}else{e._9o&&(U.y=0,Xf(e._8o.getView(),U)),Ye(R,T,D);var s=Rd(R),E=0;if(kj(s,e.tx(),0,1),s.clearRect(0,0,T,D),O.clear(),j._roots.each(function(h){var C,H=e._9Q(h);k&&k.tab===h||(C=e._10Q(s,h,E,0,H,D,e._tabBackground),C&&M&&(C.y=S-D)),O.add({_75o:C,tab:h,startX:E,endX:E+H,width:H}),E+=H+f}),e._64I=C(0,E-f),k){var i=k.position;e._10Q(s,k.tab,k.startX,0,k.width,D,e._moveBackground),wl(s,e._insertColor,i,0,D)}s.restore(),e.tx(e.tx())}for(var G=[],A=c.children,m=0;m<A.length;m++){var a=A[m],v=a._tab_;v&&!j.contains(v)&&G.push(a)}G.forEach(function(a){c.removeChild(a)})}});var sq=function(H){this.tv=H,this.addListeners()};Lk(sq,k,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(H){this.handleScroll(H,10*(H.wheelDelta/40))},handle_DOMMouseScroll:function(k){this.handleScroll(k,10*-k.detail)},handleScroll:function(J,s){sp(J);var H=this.tv,m=H._tabPosition;!H._40o()||m!==Fe&&m!==Fd||H.tx(this.tv.tx()+s),!H._41o()||m!==yi&&m!==Tg&&m!==yi+"-vertical"&&m!==Tg+"-vertical"||H.ty(this.tv.ty()+s)},_8Q:function(o){var H,D,P=this.tv,b=P._tabPosition,L=P._7o;if(b===Fe||b===Fd){var x=P.lp(o).x;for(H=0;H<L.size();H++)if(D=L.get(H),D.startX<=x&&x<=D.endX)return D}else if(b===yi||b===Tg||b===yi+"-vertical"||b===Tg+"-vertical"){var q=P.lp(o).y;for(H=0;H<L.size();H++)if(D=L.get(H),D.startY<=q&&q<=D.endY)return D}return A},isClickable:function(c){var R=this.tv,I=R._tabPosition,y=this._73o=this._8Q(c);return!R._40o()||I!==Fe&&I!==Fd?!R._41o()||I!==yi&&I!==Tg&&I!==yi+"-vertical"&&I!==Tg+"-vertical"?y&&(!y.tab.isDisabled()||R.isMovable()):!0:!0},handle_mousemove:function(Q){var u=this;Ji?u._74o=u._8Q(Q):u.getView().style.cursor=u.isClickable(Q)?Kb:""},handle_mousedown:function(R){this.handle_mousemove(R),this.handle_touchstart(R)},handle_touchstart:function(W){var G=this,q=G.tv,i=q._tabPosition;sp(W),G.isClickable(W)&&(i===Fe||i===Fd?(G.x=Ce(W).x,G.lp=q.lp(W),G.tx=q.tx()):(G.y=Ce(W).y,G.lp=q.lp(W),G.ty=q.ty()),_j(G,W))},handleWindowMouseMove:function(g){this.handleWindowTouchMove(g)},handleWindowTouchMove:function(q){var K,P=this,T=P.tv,A=T._tabPosition,X=P._73o;if(A===Fe||A===Fd){if(K=Ce(q).x-P.x,!P._25o&&!P.moving&&O(K)>2&&(T._40o()&&!gb(q)?P._25o=1:X&&T.isMovable()&&(P.moving=1)),P._25o)T.tx(P.tx+K);else if(P.moving){var h=P.lp.x+K,g=T._tabGap/2;T._7o.each(function(I){var j=I.endX,U=h-I.startX<j-h;h>=I.startX&&j>=h&&T._7Q({tab:X.tab,startX:X.startX+K,width:X.width,front:U,insertTab:I.tab,position:U?C(0,I.startX-g):$(T._64I,j+g)})})}}else if(K=Ce(q).y-P.y,!P._25o&&!P.moving&&O(K)>2&&(T._41o()&&!gb(q)?P._25o=1:X&&T.isMovable()&&(P.moving=1)),P._25o)T.ty(P.ty+K);else if(P.moving){var G=P.lp.y+K,g=T._tabGap/2;T._7o.each(function(m){var e=m.endY,j=G-m.startY<e-G;G>=m.startY&&e>=G&&T._7Q({tab:X.tab,startY:X.startY+K,height:X.height,front:j,insertTab:m.tab,position:j?C(0,m.startY-g):$(T._23Q,e+g)})})}},handleWindowMouseUp:function(E){this.handleWindowTouchEnd(E)},handleWindowTouchEnd:function(){var f=this,P=f.tv,i=P._tabPosition,V=P.getTabModel(),E=V._roots,F=f._73o;if(f.moving){var u=P._23o;if(u&&u.insertTab!==u.tab){var c=u.tab,C=E.remove(c),n=E.indexOf(u.insertTab);n>=0&&(u.front||n++,n<=E.size()&&(E.add(c,n),V._38I(c,C,n)))}P._7Q(A),delete f.moving}else if(!f._25o&&F){c=F.tab;var Y=f._74o;if(!Y||Y.tab===c)if(!c.isDisabled()&&_n(F._75o,f.lp)){var q=E.indexOf(c);V.remove(c),P.onTabClosed(c,q)}else c.isDisabled()||P._8o===c||V.sm().ss(c)}f._25o=f._73o=f._74o=i===Fe||i===Fd?f.x=f.lp=f.tx=A:f.y=f.lp=f.ty=A}}),Cd.PropertyView=function(w){var l=this;l._view=Pr(1,l),l._canvas=Ad(l._view),qc(l._view,l._79O=hr()),l._rows=new xm,l._28o=new xm,l._26o={},l._26Q={};var L=l._propertyModel=new Al,m=l.ivm;L.mm(m,l),L.md(m,l),L.mh(m,l),l.dm(w?w:new Al),new Eb(l)},cg("PropertyView",k,{ms_ac:[Cm,gp,ke,rq,ul,"categorizable",Fg,ds,_e,xs,ek,Kl,rk,Lg,"selectRowIndex",Od,"background",Of,sk,Ub,oj,Gk],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:ad,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:yn,_background:j.propertyViewBackground,_expandIcon:j.propertyViewExpandIcon,_collapseIcon:j.propertyViewCollapseIcon,_scrollBarColor:vm,_scrollBarSize:ei,_autoHideScrollBar:kf,_selectBackground:j.propertyViewSelectBackground,_rowHeight:Fn,_rowLineVisible:j.propertyViewRowLineVisible,_rowLineColor:j.propertyViewRowLineColor,_10I:.5,_columnLineVisible:j.propertyViewColumnLineVisible,_columnLineColor:j.propertyViewColumnLineColor,_labelColor:j.propertyViewLabelColor,_labelSelectColor:j.propertyViewLabelSelectColor,_labelFont:j.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(P){0>P&&(P=0),P>1&&(P=1);var w=this,t=w._10I;w._10I=P,w.fp("columnPosition",t,P)},getPropertyName:function(n){return n.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(B,u,y){return y===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(I,t){return t===this._selectRowIndex?this._labelSelectColor:I.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(c){var i=this.getHeight()-this._59I;return i>c&&(c=i),c>0?0:r(c)},isExpanded:function(f){if(!f)return!0;var u=this._26o[f];return u?u.isExpanded:!(this._26Q[f]===!1)},toggle:function(S){var o=this;o.isExpanded(S)?o.collapse(S):o.expand(S)},expandAll:function(){this.validate();for(var j in this._26o)this.expand(j)},expand:function(v){if(v&&v!==no){var w=this,$=w._26o[v];$&&!$.isExpanded&&($.isExpanded=!0,w.onExpanded(v),w.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var L in this._26o)this.collapse(L)},collapse:function(J){if(J&&J!==no){var p=this,z=p._26o[J];z&&z.isExpanded&&(z.isExpanded=!1,p.onCollapsed(J),p.ivm())}},onCollapsed:function(){},getCategoryName:function(B){if(!this.isCategorizable())return no;var n=B.getCategoryName();return n?n:no},getPropertyModel:function(){return this._propertyModel},setDataModel:function(H){var F=this,S=F._dataModel;S!==H&&(S&&(S.umd(F.handlePropertyChange,F),F._3o||S.sm().ums(F.ivm,F)),F._dataModel=H,H.md(F.handlePropertyChange,F),F._3o?F._3o._21I(H):H.sm().ms(F.ivm,F),F.fp(hd,S,H))},isVisible:function(D){return this._visibleFunc?this._visibleFunc(D):!0},onPropertyChanged:function(t){var D=this,K=t.property;Yl[K]?D.ivm():D.iv(),K===fk&&D._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:me},handlePropertyChange:function(U){this._27o===U.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var M=this;M._96I||(M.setSelectRowIndex(-1),M._96I=1,M.iv())},redraw:function(){this.iv()},validateModel:function(){var m=this,N=m._rows,x=m._28o,D={},w=new xm,X=m._27o;m.updateCurrentData(),X!==m._27o&&m.endEditing(),N.clear(),x.clear(),m.getRawProperties().each(function(o){if(m.isVisible(o)){w.add(o);var W=m.getCategoryName(o);D[W]||(x.add(W,W===no?0:d),D[W]={isExpanded:m.isExpanded(W),properties:new xm})}}),m._sortFunc&&w.sort(m._sortFunc);for(var h in m._26o)m._26Q[h]=m.isExpanded(h);m._26o=D,x.each(function(K){K!==no&&N.add(K);var p=D[K];p.isExpanded&&w.each(function(g){m.getCategoryName(g)===K&&(p.properties.add(g),N.add({property:g,data:m._27o}))},m)})},validateImpl:function(){var o=this;o._76o(),o._96I&&(o.validateModel(),delete o._96I);var p=o._canvas,h=o.getWidth(),g=o.getHeight(),V=-o.ty(),Z=o._rowHeight,v=o._indent,W=h-v,j=o._rows,N=j.size(),f=o._9I=v+W*o._10I,$=o._59I=N*Z;Ye(p,h,g),o._29I={x:0,y:V,width:h,height:g},o._31I=u(V/Z),o._14I=X((V+g)/Z),o._31I<0&&(o._31I=0),o._14I>N&&(o._14I=N);var c,x=Rd(p),D=o._background;kj(x,0,-V,1),x.beginPath(),x.rect(0,V,h,g),x.clip(),x.clearRect(0,V,h,g),o._93db(x),D&&Gg(x,0,0,v,$,D);for(var d=o._31I;d<o._14I;d++){var q=j.get(d),V=Z*d;if(qd(q))D&&Gg(x,v,V,W,Z,D),c=Vd(o.isExpanded(q)?o._expandIcon:o._collapseIcon),c&&Bj(x,c,Se,0,V,v,Z),x.save(),x.beginPath(),x.rect(v,V,W,Z),x.clip(),o.drawCategoryName(x,q,d,v,V,W,Z),x.restore();else{var K=q.property,r=q.data,c=Vd(K.getIcon()),n=o._selectRowIndex===d?o.getSelectBackground():A;if(c&&Bj(x,c,Se,0,V,v,Z),n&&Gg(x,v,V,W,Z,n),x.save(),x.beginPath(),x.rect(v,V,f-v,Z),x.clip(),o.drawPropertyName(x,K,d,v,V,f-v,Z),x.restore(),!o.isEditing(r,K)){var J=f+1,i=h-f-1;x.save(),x.beginPath(),x.rect(J,V,i,Z),x.clip(),o._87o(o.drawPropertyValue(x,K,o.getValue(r,K),d,J,V,i,Z,r),d,J,V,i,Z),x.restore()}}o._rowLineVisible&&Gg(x,v,V+Z-1,W,1,o._rowLineColor)}o._columnLineVisible&&(Gg(x,f,0,1,$,o._columnLineColor),Gg(x,h-1,0,1,$)),o._92db(x),o._93I(),x.restore(),o.ty(o.ty())},drawCategoryName:function(g,N,z,O,M,A,c){hj(g,N,this.getCategoryFont(N),this.getCategoryColor(N),O,M,A,c)},drawPropertyName:function(W,u,S,Y,k,D,g){return u.drawPropertyName?(u.drawPropertyName(W,u,S,Y,k,D,g,this),void 0):(hj(W,this.getPropertyName(u),this.getPropertyFont(u,S),this.getPropertyColor(u,S),Y,k,D,g),void 0)},drawPropertyValue:function(X,b,Z,U,H,t,D,J,p){return b.drawPropertyValue?b.drawPropertyValue(X,b,Z,U,H,t,D,J,p,this):(Wj(X,Z,b,this.getLabelFont(b,Z,U),this.getLabelColor(b,Z,U),H,t,D,J,p,this),void 0)},isPropertyEditable:function(H){return H.isEditable()&&this.isEditable()},setProperties:function(F){this._propertyModel.clear(),this.addProperties(F)},addProperties:function(D){if(D){var Z=this._propertyModel;D.forEach(function(_){if(!(_ instanceof Fb)){var t=Ym(_.className);_=Sb(t?t:Fb,_)}Z.add(_)})}},getRowIndexAt:function(H){var B=this,j=u(B.lp(H).y/B._rowHeight);return j>=0&&j<B._rows.size()?j:-1},getPropertyAt:function(f){var t=this,X=t.getRowIndexAt(f);return X>=0?t._rows.get(X).property:A},getToolTip:function(s){var e=this,v=e.getPropertyAt(s),i=e._27o;return v&&i?v.getToolTip(i,e._9I<e.lp(s).x,e):A}});var Eb=function(j){this.pv=j,this.addListeners()};Lk(Eb,k,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(o){this.getView().style.cursor=o},clear:function(){var z=this;z._62O=z.cp=z.ty=z.p=A,z.setCursor(i)},handle_mousedown:function($){this.handle_touchstart($)},handle_touchstart:function(f){var m=this,Y=m.pv;sp(f),Y.setFocus(f)&&(Vp(f)?(m.cp=Ce(f),m.ty=Y.ty(),m.p=Y.getColumnPosition(),m.handle_touchmove(f)):Y.setSelectRowIndex(Y.getRowIndexAt(f)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(n){this.handle_touchend(n)},handle_touchend:function(f){var k=this;if(k.cp&&!k._62O){var S=k.pv,M=S.lp(f),d=M.x,x=M.y,J=S._indent,q=S.getRowIndexAt(f),l=S._9I;if(q>=0){var B=S._rowHeight,W=B*q,O=S._rows.get(q),u=O.property;if(qd(O))Vd(S.isExpanded(O)?S._expandIcon:S._collapseIcon)&&d>=0&&J>=d&&x>=W&&W+B>=x?S.toggle(O):Mk(f)&&S.toggle(O);else if(d>l&&S.isPropertyEditable(u)){var s={x:l+1,y:W,width:S.getWidth()-l-1,height:B},b={x:s.x+S.tx(),y:s.y+S.ty(),width:s.width,height:s.height},K=0,z=S._29I;s.y<z.y?K=s.y-z.y:s.y+B>z.y+z.height&&(K=s.y+B-z.y-z.height),K&&(S.ty(S.ty()-K),b.y-=K),S.beginEditing({data:O.data,property:u,value:S.getValue(O.data,u),event:f,rect:s,editorRect:b,view:S})}}S.setSelectRowIndex(q)}k.clear()},handleWindowMouseMove:function(j){this.handleWindowTouchMove(j)},handleWindowTouchMove:function(W){var c=this,u=c.pv,b=c.ty,t=c.cp,B=Ce(W),K=c._62O;if("p"===K)u.setTranslateY(b+B.y-t.y);else if("c"===K){var x=u.getWidth()-u._indent;if(x>16){var y=c.p-(t.x-B.x)/x,s=16/x;s>y&&(y=s),y>1-s&&(y=1-s),u.setColumnPosition(y)}}else"s"===K&&u.setTranslateY(b+(t.y-B.y)*u._59I/u._29I.height)},handle_mousemove:function(B){this.handle_touchmove(B)},handle_touchmove:function(Y){if(!Ji&&Vp(Y)){var R=this,X=R.pv,H=O(X.lp(Y).x-X._9I)<=(F?8:3);R.cp?R._62O||(H?(R._62O="c",_j(R)):O(Ce(Y).y-R.cp.y)>=2&&(R._62O=R.isV(Y)?"s":"p",_j(R))):(H?R.setCursor(kk):R.setCursor(i),R.isV(Y)&&X._43o())}},isV:function(l){var k=this.pv,z=k._29I;return k._41o()&&z.x+z.width-k.lp(l).x<cb},handle_mousewheel:function(H){this.handleScroll(H,H.wheelDelta/40)},handle_DOMMouseScroll:function(E){2===E.axis&&this.handleScroll(E,-E.detail)},handleScroll:function(T,v){var D=this.pv;sp(T),D.endEditing(),D.translate(0,v*D.getRowHeight())},handle_keydown:function(g){var O=this.pv,o=O._rows.size(),t=O._selectRowIndex+(nj(g)?-1:1);(nj(g)||hh(g))&&(0>t&&(t=0),t>=o&&(t=o-1),O.setSelectRowIndex(t))}}),Cd.ListView=function(D){this._5o(D),new Xj(this)},cg("ListView",k,{ms_ac:[Cm,gp,ke,Of,Fg,sk,Ub,ds,_e,Kl,rk,Lg,lg,Od],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:yn,_rowHeight:Fn,_rowLineVisible:j.listViewRowLineVisible,_rowLineColor:j.listViewRowLineColor,_scrollBarColor:vm,_scrollBarSize:ei,_autoMakeVisible:Yc,_autoHideScrollBar:kf,_selectBackground:j.listViewSelectBackground,_labelColor:j.listViewLabelColor,_labelSelectColor:j.listViewLabelSelectColor,_labelFont:j.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(j){var i=this,b=i._checkMode;i._checkMode=j,i.fp(eq,b,j)},drawRow:function(p,S,W,X,I,o,Y){var G=this,h=0,U=G._indent,R=G.getIconWidth(S);G.drawRowBackground(p,S,W,X,I,o,Y),G._checkMode&&(Ge(p,G.getCheckIcon(S),h+U/2,I+Y/2,S,G),h+=U),G.drawIcon(p,S,h,I,R,Y),G.drawLabel(p,S,h+R,I,Y)}});var Xj=function(d){this.list=d,this.addListeners()};Lk(Xj,k,{ms_listener:1,getView:function(){return this.list._view},clear:function(e){var J=this;e&&"d"===J._62O&&J.list.handleDragAndDrop(e,"end"),J._62O=J.cp=J.tx=J.ty=A},handle_mousedown:function(e){this.handle_touchstart(e)},handle_touchstart:function(Z){var m=this,u=m.list;if(sp(Z),u.setFocus(Z))if(m.cp=Ce(Z),m.tx=u.tx(),m.ty=u.ty(),Vp(Z))m.isV(Z)||m.isH(Z)||!u.handleDragAndDrop||u.handleDragAndDrop(Z,"prepare");else{var A=u.getDataAt(Z);A&&m._33o(Z,A),m.clear(Z)}},handleWindowMouseUp:function(j){this.clear(j)},handleWindowTouchEnd:function(U){this.clear(U)},handle_mouseup:function(S){this.handle_touchend(S)},handle_touchend:function(V){var U=this,X=U.list;if(U.cp&&!U._62O){var r=X.getDataAt(V);r&&(X.isCheckMode()?U._34o(V,r):U._33o(V,r),Mk(V)?X.onDataDoubleClicked(r,V):X.onDataClicked(r,V))}U.clear(V)},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(v){var t=this,d=t.list,u=t._62O,K=t.tx,N=t.ty,C=t.cp,p=Ce(v),s=d._29I;"p"===u?d.setTranslate(K+p.x-C.x,N+p.y-C.y):"v"===u?d.ty(N+(C.y-p.y)*d._59I/s.height):"h"===u?d.tx(K+(C.x-p.x)*d._91I/s.width):"d"===u&&d.handleDragAndDrop(v,"between")},handle_mousemove:function(L){this.handle_touchmove(L)},handle_touchmove:function(h){if(!Ji&&Vp(h)){var E=this,b=E.list,W=E.isV(h),o=E.isH(h);if(E.cp){if(!E._62O){if(Qd(Ce(h),E.cp)<2)return;W?E._62O="v":o?E._62O="h":b.handleDragAndDrop?(E._62O="d",b.handleDragAndDrop(h,"begin")):E._62O="p",_j(E)}}else W&&b._43o(),o&&b._42o()}},isV:function(s){var c=this.list,n=c._29I;return c._41o()&&n.x+n.width-c.lp(s).x<cb},isH:function(R){var T=this.list,f=T._29I;return T._40o()&&f.y+f.height-T.lp(R).y<cb},handle_mousewheel:function(h){this.handleScroll(h,h.wheelDelta/40,h.wheelDelta!==h.wheelDeltaX)},handle_DOMMouseScroll:function(b){this.handleScroll(b,-b.detail,1)},handleScroll:function(z,o,F){var S=this.list;sp(z),S.endEditing&&S.endEditing(),F&&S._41o()?S.translate(0,o*S.getRowHeight()):S._40o()&&S.translate(10*o,0)},handle_keydown:function(T){var I,G=this.list,s=G.sm(),V=G._rows,g=V.size();if(tn(T))G.selectAll();else if(nq(T))G.handleDelete&&G.handleDelete(T);else if(oh(T))G.isCheckMode()&&(I=G.getFocusData(),I&&G.checkData(I));else if(nj(T)||hh(T)){var o=G.isCheckMode();if(I=o?G.getFocusData():s.ld()){var L=G.getRowIndex(I);L>=0&&(nj(T)?0!==L&&(I=V.get(L-1),o?G.setFocusData(I):s.ss(I)):L!==g-1&&(I=V.get(L+1),o?G.setFocusData(I):s.ss(I)))}else g>0&&(I=V.get(0),o?G.setFocusData(I):s.ss(I))}},_34o:function($,a){var Y=this.list,_=Y.lp($).x;return _>=0&&_<=Y._indent?(Y.checkData(a),void 0):(Y.setFocusData(a),void 0)},_33o:function(d,I){var N=this.list,O=N.sm(),M=O.ld();if(gb(d))N.isSelected(I)?O.rs(I):O.as(I);else if(Td(d))if(M)for(var L=N.getRowIndex(M),K=N.getRowIndex(I);L!==K;)L+=K>L?1:-1,O.as(N._rows.get(L));else O.ss(I);else(Vp(d)||!O.contains(I))&&O.ss(I)}}),Cd.TreeView=function(G){var p=this;p._35o(),p._5o(G),new Bh(p)},cg("TreeView",k,{ms_ac:[Cm,gp,ke,"rootVisible",eq,"rootData",ds,_e,Kl,rk,Lg,Fg,Of,sk,Ub,xs,ek,lg,Od,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:A,_indent:yn,_rowHeight:Fn,_rowLineVisible:j.treeViewRowLineVisible,_rowLineColor:j.treeViewRowLineColor,_scrollBarColor:vm,_scrollBarSize:ei,_autoHideScrollBar:kf,_expandIcon:j.treeViewExpandIcon,_collapseIcon:j.treeViewCollapseIcon,_autoMakeVisible:Yc,_selectBackground:j.treeViewSelectBackground,_labelColor:j.treeViewLabelColor,_labelSelectColor:j.treeViewLabelSelectColor,_labelFont:j.treeViewLabelFont,drawRow:function(f,H,A,u,d,s,w){var p=this;p.drawRowBackground(f,H,A,u,d,s,w),p._97I(f,H,A,0,d,s,w)}});var Bh=function($){xi(Bh,this,[$])};Lk(Bh,Xj,{toggle:function(A,w,H,u){var p=this.list,o=p.lp(A).x;if(Vd(p.getToggleIcon(w))){var R=H*u;if(o>=R&&R+H>=o)return p.toggle(w),!0}return Mk(A)?(p.toggle(w),!0):!1},_34o:function(Z,P){var $=this.list,S=$.lp(Z).x,y=$._levelMap[P._id],A=$._indent,W=A*(y+1);return S>=W&&W+A>=S?($.checkData(P),void 0):(this.toggle(Z,P,A,y)||$.setFocusData(P),void 0)},_33o:function(X,o){var F=this,m=F.list;F.toggle(X,o,m._indent,m.getLevel(o))||Bh.superClass._33o.call(F,X,o)},handle_keydown:function(X){if(Pb(X)||Zb(X)){var e=this.list,i=e._rows,P=e.isCheckMode(),q=e.sm(),j=P?e.getFocusData():q.ld();j?j.hasChildren()&&(Pb(X)?e.collapse(j):e.expand(j)):i.size()>0&&(j=i.get(0),P?e.setFocusData(j):q.ss(j))}else Bh.superClass.handle_keydown.call(this,X)}});var Hr=Cd.TableView=function(H){this._98I(),this._5o(H),new zp(this)};cg("TableView",k,{ms_ac:[Cm,gp,ke,"sortMode",rq,ul,Of,sk,Ub,oj,Gk,"sortColumn",ds,_e,Kl,rk,Lg,lg,Od],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Fr,_editable:!0,_batchEditable:!1,_rowHeight:Fn,_rowLineVisible:j.tableViewRowLineVisible,_rowLineColor:j.tableViewRowLineColor,_columnLineVisible:j.tableViewColumnLineVisible,_columnLineColor:j.tableViewColumnLineColor,_scrollBarColor:vm,_scrollBarSize:ei,_autoHideScrollBar:kf,_autoMakeVisible:Yc,_selectBackground:j.tableViewSelectBackground,_labelColor:j.tableViewLabelColor,_labelSelectColor:j.tableViewLabelSelectColor,_labelFont:j.tableViewLabelFont,getCheckColumn:function(){var k=this;if(!k._31o){var e=k._31o=new lr;e.setEditable(!0),e.setWidth(40),e.getValue=k.getCheckColumValue,e.drawCell=k.drawCheckColumnCell}return k._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(y){var S=this,w=S._39o,m=S.getCheckColumn();y!==S.isCheckMode()&&(y?w.add(m,0):w.remove(m),S.fp(eq,!y,y))},getCheckColumValue:function(p,i,C){return C.isSelected(p)},drawCheckColumnCell:function(b,m,G,A,x,_,H,C,z){Ge(b,z.getCheckIcon(m),x+H/2,_+C/2,m,z)}});var zp=function(R){xi(zp,this,[R])};Lk(zp,Xj,{_34o:function(E,I){var M=this.list,k=M._31o;if(M.isCellEditable(I,k)){var L=M._3Q(k),B=M.lp(E).x;if(L&&B>=L.startX&&B<L.startX+k.getWidth())return M.checkData(I),void 0}M.setFocusData(I),M._37O(I,E)},_33o:function(P,N){zp.superClass._33o.apply(this,arguments),this.list._37O(N,P)}});var li=Cd.TreeTableView=function(f){var D=this,T=D._4o=new lr;D._35o(),D._98I(),D._5o(f),T.setDisplayName("Name"),T.setEditable(!0),T.setWidth(180),T.drawCell=nc,T.getValue=aj,D._39o.add(T),new Gi(D)},nc=function(_,p,W,o,K,N,u,P,c){c._97I(_,p,W,K,N,u,P)},aj=function(e,m,K){return K.getLabel(e)};cg("TreeTableView",k,{ms_ac:[Cm,gp,ke,"sortMode",rq,ul,Fg,eq,"rootData","rootVisible",ds,_e,"sortColumn",xs,ek,Kl,rk,Lg,lg,Ub,Of,sk,oj,Gk,Od,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Fr,_checkMode:A,_editable:!0,_batchEditable:!1,_indent:yn,_rowHeight:Fn,_rowLineVisible:j.treeTableViewRowLineVisible,_rowLineColor:j.treeTableViewRowLineColor,_columnLineVisible:j.treeTableViewColumnLineVisible,_columnLineColor:j.treeTableViewColumnLineColor,_expandIcon:j.treeTableViewExpandIcon,_collapseIcon:j.treeTableViewCollapseIcon,_scrollBarColor:vm,_scrollBarSize:ei,_autoHideScrollBar:kf,_autoMakeVisible:Yc,_selectBackground:j.treeTableViewSelectBackground,_labelColor:j.treeTableViewLabelColor,_labelSelectColor:j.treeTableViewLabelSelectColor,_labelFont:j.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Gi=function(j){xi(Gi,this,[j])};Lk(Gi,Xj,{_34o:function(X,P){var A=this.list,F=A._4o,W=A._3Q(F),C=A.lp(X).x;if(W){var n=A._indent,g=W.startX+n*A.getLevel(P);if(Vd(A.getToggleIcon(P))&&C>=g&&g+n>=C)return A.toggle(P),void 0;if(A.isCellEditable(P,F)&&(g+=n,C>=g&&g+n>=C))return A.checkData(P),void 0}A.setFocusData(P),A._37O(P,X)},_33o:function(v,X){var G=this.list,Q=G.lp(v).x;if(Vd(G.getToggleIcon(X))){var P=G._3Q(G._4o);if(P){var d=G._indent,N=P.startX+d*G.getLevel(X);if(Q>=N&&N+d>=Q)return G.toggle(X),void 0}}Gi.superClass._33o.apply(this,arguments),G._37O(X,v)}});var qq=Cd.TableHeader=function(M){var C=this,p=C._view=Pr(1,C),O=C._39o=M.getColumnModel(),$=C.iv;C.tv=C._tableView=M,C._60I=new xm,C._canvas=Ad(p),p.style.background=j.tableHeaderBackground||"",p.style.height=Xh+Ae,O.mm($,C),O.md($,C),O.mh($,C),M.mp(function($){ye[$.property]&&C.iv()},C),new $k(C),C.iv()};cg("TableHeader",k,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Cm,ke,Fg,"moveBackground","insertColor",oj,Gk,"resizable","movable"],_checkIcon:Mc,_movable:!0,_resizable:!0,_labelColor:j.tableHeaderLabelColor,_labelFont:j.tableHeaderLabelFont,_columnLineColor:j.tableHeaderColumnLineColor,_columnLineVisible:j.tableHeaderColumnLineVisible,_sortDescIcon:j.tableHeaderSortDescIcon,_sortAscIcon:j.tableHeaderSortAscIcon,_moveBackground:j.tableHeaderMoveBackground,_insertColor:j.tableHeaderInsertColor,_indent:yn,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(W){return W.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(M){return M.getColor()||this._labelColor},getLabelAlign:function(n){return n._align},onPropertyChanged:function(){this.iv()},_5Q:function(Q){this._61I=Q,this.iv()},getLogicalPoint:function(u){return Af(u,this._canvas,this.tv.tx())},validateImpl:function(){var a=this,o=a._canvas,b=a.getWidth(),V=a.getHeight(),m=a.tv,Z=a._60I,E=a._61I,k=-m.tx(),M=0;(b!==o.clientWidth||V!==o.clientHeight)&&Ye(o,b,V),Z.clear(),a._39o._roots.each(function(U){if(U.isVisible()){var c=M+U.getWidth();k+b>=M&&c>=k&&Z.add({column:U,startX:M}),M=c}});var D=Rd(o);if(kj(D,-k,0,1),D.beginPath(),D.rect(k,0,b,V),D.clip(),D.clearRect(k,0,b,V),Z.each(function(f){var M=f.column,i=f.startX,e=M.getWidth();e>0&&(D.save(),D.beginPath(),D.rect(i,0,e,V),D.clip(),E&&E.column===M||a.drawColumn(D,M,i,0,e,V),a._columnLineVisible&&Gg(D,i+e-1,0,1,V,a._columnLineColor),D.restore())}),E){var P=E.column,M=E.startX,$=E.position,C=P.getWidth();D.save(),D.beginPath(),D.rect(M,0,C,V),D.clip(),D.fillStyle=a._moveBackground,D.fill(),a.drawColumn(D,P,M,0,C,V),D.restore(),wl(D,a._insertColor,$,0,V)}D.restore()},_6Q:function(g){var F=this.tv;return F._31o===g&&F.sm().getSelectionMode()===y},drawColumn:function(K,a,w,L,G,M){var D=this,n=D.tv,q=Vd(a.getIcon()),u=D.getLabelAlign(a);if(D._6Q(a)){var i=Vd(D._checkIcon);Ge(K,i,w+G/2,L+M/2,a,D)}else{var P=D.getLabel(a),Q=D.getLabelFont(a),v=D.getLabelColor(a),p=Vi(Q,P).width,S=q?D._indent:0;u===yi?(q&&Bj(K,q,Se,w,L,S,M),hj(K,P,Q,v,w+S,L,G,M,yi)):u===Tg?(q&&Bj(K,q,Se,w+G-p-S,L,S,M),hj(K,P,Q,v,w,L,G,M,Tg)):(q&&Bj(K,q,Se,w+(G-p-S)/2,L,S,M),hj(K,P,Q,v,w+(G-p+S)/2,L,0,M,yi))}if(a.isSortable()&&n.getSortColumn()===a&&(q=Vd(a.getSortOrder()===Ej?D._sortAscIcon:D._sortDescIcon))){var W=zm(q,a)/2+2;Ge(K,q,u===Tg?w+W:w+G-W,L+M/2,a,n)}}});var $k=function(q){var z=this;z.th=q,z.tv=q._tableView,z.addListeners()};Lk($k,k,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(K){this.getView().style.cursor=K},handle_mousemove:function(l){if(!Ji){var S=this;delete S._29o,S.setCursor(i);for(var I=S.th,L=I._60I,e=I.lp(l).x,A=L.size()-1;A>=0;A--){var p=L.get(A),z=p.column,k=p.startX+z.getWidth();if(I.isResizable()&&O(k-e)<=(F?10:3))return S._29o=p,S.setCursor(kk),void 0;(z.isSortable()||I.isMovable()||z===S.tv.getCheckColumn())&&e>=p.startX&&k>=e&&z.getWidth()>0&&(S._29o=p,S.setCursor(Kb))}}},handle_mousedown:function(R){this.handle_touchstart(R)},handle_touchstart:function(S){var k=this;sp(S),k.tv.endEditing(),k.handle_mousemove(S),k._29o&&(k.x=Ce(S).x,k.lx=k.th.lp(S).x,k.w=k._29o.column.getWidth(),_j(k,S))},handleWindowMouseMove:function(p){this.handleWindowTouchMove(p)},handleWindowTouchMove:function(L){var d=this,N=d.th,z=d.getView().style.cursor,e=d._29o,M=Ce(L).x-d.x;if(d.resizing||d.moving||(z===kk?d.resizing=1:N.isMovable()&&z===Kb&&O(M)>2&&(d.moving=1)),d.resizing)e.column.setWidth(d.w+M);else if(d.moving){var b=d.lx+M;N._60I.each(function(r){var J=r.startX,R=J+r.column.getWidth();if(b>=J&&R>=b){var S={column:e.column,startX:e.startX+M,front:R-b>b-J,insertColumn:r.column};S.position=S.front?J:R,N._5Q(S)}})}},_16Q:function(Q,m){var h=this,u=h.tv,j=h.th,W=j._checkIcon;if(j._6Q(Q)){var N=Vd(W),R=h.lx,b=Q.getWidth(),k=zm(N,Q);if(R>=m+b/2-k&&m+b/2+k>=R){j.setCheckIcon(W===wj?Mc:wj);var g=u.sm(),E=u._rows;return W===wj?g.rs(E):g.ss(E),u.onCheckColumnClicked(Q),!0}}return!1},handleWindowMouseUp:function(s){this.handleWindowTouchEnd(s)},handleWindowTouchEnd:function(Z){var s=this,L=s.tv,O=s.th,P=s._29o;if(s.moving){var p=O._61I;if(p&&p.insertColumn!==p.column){var $=p.column,U=L.getColumnModel()._roots,t=U.remove($),y=U.indexOf(p.insertColumn);y>=0&&(p.front||y++,y<=U.size()&&(U.add($,y),L.getColumnModel()._38I($,t,y)))}O._5Q(A),delete s.moving}else if(!s.resizing&&P){$=P.column;var f=O.lp(Z).x,q=P.startX,k=!0;if(O.onColumnClicked){var R=O.onColumnClicked($,Z);R===!1&&(k=!1)}if(k&&f>=q&&f<=q+$.getWidth()&&!s._16Q($,q)){if($.isSortable()){var J=L.getSortMode(),n=$.getSortOrder();J===Fr?L.getSortColumn()===$?(n===Ho&&L.setSortColumn(A),$.setSortOrder(n===Ej?Ho:Ej)):L.setSortColumn($):"bistate"===J&&(L.getSortColumn()===$?$.setSortOrder(n===Ej?Ho:Ej):L.setSortColumn($))}L.onColumnClicked($,Z)}}s._29o=s.resizing=s.x=s.lx=s.w=A}}),Cd.TablePane=function(z){this.init(new Hr(z))},cg("TablePane",k,{ms_v:1,_44o:1}),Cd.TreeTablePane=function(V){this.init(new li(V))},cg("TreeTablePane",k,{ms_v:1,_44o:1}),Cd.Toolbar=function(z){var Y=this,g=Y._view=Pr(1,Y),f=g.style;f.background=j.toolbarBackground||"",f.height=Dc+Ae,Y._canvas=Ad(g),Y._30o=new xm,Y._90I=new xm,Y.setItems(z||[]),g.handleGroupSelectedChanged=function($){if($.isSelected()){var V=$.getGroupId();null!=V&&Y._items.forEach(function(A){var D=A.element;D&&D!==$&&D.setSelected&&D.getGroupId&&D.getGroupId()===V&&D.setSelected(!1)})}},new Hk(Y)},cg("Toolbar",k,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[Fc,Cm,ke,gp,Od,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:j.toolbarLabelColor,_labelSelectColor:j.toolbarLabelSelectColor,_labelFont:j.toolbarLabelFont,_selectBackground:j.toolbarSelectBackground,_itemGap:j.toolbarItemGap,_separatorColor:j.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(Z){var u=this.getItemInfoAt(Z);return u?u.item.toolTip:A},getLabelColor:function($){return $.selected&&$.type!==wj&&$.type!==Or?this._labelSelectColor:this._labelColor},onPropertyChanged:function(o){this.iv(),o.property===Fc&&this._items.forEach(function(M){Gr(M)})},redraw:function(){this.iv()},addItem:function(t,l){var d=this._items;l==A?d.push(t):d.splice(l,0,t),this.fp(Fc,A,d)},removeItem:function(X){if(X)for(var p=this._items,U=0;U<p.length;U++)X===p[U]&&(p.splice(U,1),this.fp(Fc,A,p))},removeItemById:function(r){if(r!=A)for(var f=this._items,X=0;X<f.length;X++)r===f[X].id&&(f.splice(X,1),this.fp(Fc,A,f))},getItemById:function(J){if(J!=A)for(var V=this._items,R=0;R<V.length;R++){var p=V[R];if(J===p.id)return p}},getItemInfos:function(){return this._30o},getItemInfoAt:function(F){var j=this,v=0,D=j._30o,o=j.lp(F),p=o.x,r=o.y;if(r>=0&&r<=j.getHeight())for(;v<D.size();v++){var l=D.get(v);if(l.startX<=p&&p<=l.endX)return l}return A},drawItem:function(g,N,K,m,O){if(N.visible===!1)return 0;var l=this,n=N.disabled;n&&(g.globalAlpha=sc);var T=l.drawItemImpl(g,N,K,m,O),I=l._itemGap;return n&&(g.globalAlpha=1),this._currentItem!==N||"separator"===N||N.unfocusable||Cq(g,l._separatorColor,K-I/2,0,T+I,m),T},drawItemImpl:function(n,p,v,$,A){var S,N=this,U=N._view,V=N._itemGap,j=$/2,d=p.type,L=p.label,O=N.getLabelFont(p),Z=N.getLabelColor(p),H=p.selected,z=Vd(p.icon),M=zm(z,p),r=0,G=p.element,P=M+(L?Vi(O,L).width:0);if("separator"===p)return wl(n,N._separatorColor,v,$/4,j),1;if(G){z&&Ge(n,z,v+M/2,j),hj(n,L,O,Z,v+M,0,0,$);var k=$f(G);A||N._90I.add(k),k.parentNode!==U&&qc(U,k),G.iv&&G.iv(),G.validate&&G.validate();var s=k.getBoundingClientRect(),e=s.width,Y=k.style;return Lh(k),Y.left=N.tx()+v+P+Ae,Y.top=($-s.height)/2+Ae,P+e}return d===Or?S=Vd(H?gq:of):d===wj&&(S=Vd(H?wj:Mc)),S?(r=zm(S,p),Ge(n,S,v+r/2,j),v+=r,P+=r):H&&Gg(n,v-V/2,0,P+V,$,N.getSelectBackground(p)),z&&Ge(n,z,v+M/2,j),hj(n,L,O,Z,v+M,0,0,$),P},validateImpl:function(){var D=this,u=D._canvas,H=D.getWidth(),b=D.getHeight(),S=D._30o,v=D._items;Ye(u,H,b);var I=Rd(u),h=D._itemGap,J=h/2;kj(I,D.tx(),0,1),I.clearRect(0,0,H,b);var y=D._90I;D._90I=new xm,S.clear(),v.forEach(function(P){var W=D.drawItem(I,P,J,b);S.add({item:P,startX:J,endX:J+W,width:W}),W&&(J+=W+h)}),y.each(function(M){D._90I.contains(M)||ip(M)}),D._64I=C(0,J),I.restore(),D._stickToRight?(D._65O=0,I=Rd(u),J=H-D._64I+h,kj(I,0,0,1),I.clearRect(0,0,H,b),S.clear(),v.forEach(function(m){var Y=D.drawItem(I,m,J,b,!0);S.add({item:m,startX:J,endX:J+Y,width:Y}),Y&&(J+=Y+h)}),I.restore()):D.tx(D.tx())},handleClick:function(T){var Y=this,q=T.type,V=T.action,W=T.groupId,t=T.selected;T.disabled||(W!=A?t||(T.selected=!0,this._items.forEach(function(r){r.groupId===W&&T!==r&&(r.selected=!1)}),V&&T.action(T,Y)):q===wj||"toggle"===q?(T.selected=!t,V&&T.action(T,Y)):V&&T.action(T,Y)),Sr(),Y.iv()}});var Hk=function(J){this.tb=J,this.addListeners()};Lk(Hk,k,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(W){this.handleScroll(W,10*(W.wheelDelta/40))
},handle_DOMMouseScroll:function(P){this.handleScroll(P,10*-P.detail)},handleScroll:function($,C){sp($);var L=this.tb;L.isScrollable()&&!L._stickToRight&&(L.tx(L.tx()+C),jk())},handle_mousemove:function(l){var u=this;Ji?u.info2=u.tb.getItemInfoAt(l):u.setItem(l)},handle_mouseout:function(d){var Y=this;d.target===Y.getView()?Y.tb.setCurrentItem(A):Y.handle_mousemove(d)},handle_mousedown:function(q){this.handle_mousemove(q),this.handle_touchstart(q)},handle_touchstart:function(z){var T=this,u=T.tb,d=z.target;(d===T.getView()||d===u._canvas)&&(sp(z),u.setFocus(z)&&(this.setItem(z),(u.isScrollable()||T.info&&!T.info.item.disabled)&&(T.x=Ce(z).x,T.tx=u.tx(),_j(T,z))))},handleWindowMouseMove:function(g){this.handleWindowTouchMove(g)},handleWindowTouchMove:function(M){var C=this,X=C.tb;if(!X._stickToRight){var J=Ce(M).x-C.x;!C._25o&&O(J)>2&&X.isScrollable()&&(C._25o=1),C._25o&&X.tx(C.tx+J)}},handleWindowMouseUp:function(e){this.handleWindowTouchEnd(e)},handleWindowTouchEnd:function(){var q=this,T=q.tb,o=q.info,I=q.info2;if(!q._25o&&o){var j=o.item;I&&I.item!==j||T.handleClick(j)}q._25o=q.x=q.tx=q.info2=A,q.setItem()},setItem:function(n){var R=this,G=R.tb,Q=R.info=n?G.getItemInfoAt(n):A;G.setCurrentItem(Q?Q.item:A)}}),Cd.BorderPane=function(){this._view=Pr(1,this),this.iv()},cg("BorderPane",k,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(z,x){this._12o("leftView",z),x!=A&&this.setLeftWidth(x)},getRightView:function(){return this._rightView},setRightView:function(c,K){this._12o("rightView",c),K!=A&&this.setRightWidth(K)},getTopView:function(){return this._topView},setTopView:function(F,z){this._12o("topView",F),z!=A&&this.setTopHeight(z)},getBottomView:function(){return this._bottomView},setBottomView:function(s,r){this._12o("bottomView",s),r!=A&&this.setBottomHeight(r)},getCenterView:function(){return this._centerView},setCenterView:function($){this._12o("centerView",$)},_12o:function(d,t){var l=this,Y="_"+d,q=l._view,b=l[Y];b!==t&&(b&&(b.getView?ip(b.getView()):ip(b)),l[Y]=t,t&&(t.getView?qc(q,t.getView(),1):qc(q,t,1)),l.fp(d,b,t))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var Y=this,o=Y._topView,m=Y._bottomView,R=Y._leftView,S=Y._rightView,L=Y._centerView,F=Y.getWidth(),i=Y.getHeight(),f=0,G=0,p=F,Z=i,l=0,T=0,y=0,v=0;o&&(l=Y._topHeight==A?se(o):Y._topHeight,G=l),m&&(T=Y._bottomHeight==A?se(m):Y._bottomHeight,Z=i-T),R&&(y=Y._leftWidth==A?Jp(R):Y._leftWidth,f=y),S&&(v=Y._rightWidth==A?Jp(S):Y._rightWidth,p=F-v);var q=C(0,p-f),U=C(0,Z-G);o&&Xf(o,0,0,F,l),m&&Xf(m,0,Z,F,T),R&&Xf(R,0,G,y,U),S&&Xf(S,p,G,v,U),L&&Xf(L,f,G,q,U)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);