!function(B,s,q){"use strict";var t="ht",C=B[t],l=null,h=Math,R=h.PI,H=h.cos,a=h.sin,w=h.abs,v=h.max,U=h.sqrt,j=1e-5,N=C.Default,z=N.def,M=N.startAnim,D=N.createMatrix,F=N.transformVec,p=N.getInternal(),G=p.addMethod,d=p.superCall,_=p.toPointsArray,I=p.createNormals,S=p.toFloatArray,P=p.glMV,o=p.batchShape,E=p.createNodeMatrix,f=p.getFaceInfo,Y=p.transformAppend,g=p.drawFaceInfo,Z=p.createAnim,O=p.cube(),T=O.is,m=O.vs,J=O.uv,i=p.ui(),y=C.Node,b=C.Shape,e="h",$="v",A="front",X="back",k="left",K="right",x="top",u="bottom",L="dw.expanded",n=".expanded",c="dw.angle",V=".angle",r=function(G,o,r){z(t+"."+G,o,r)},W=function(M,B,U){U?M.push(B.x,B.y):M.push(B.x,B.y,B.z)},Q=[1,0,0],Sh=function(N,u,O,J){var H,L,r,P,h=0,F=[];if(J)for(H=J.length;H>h;h+=3)L=J[h],r=J[h+1],P=J[h+2],F.push(new wo([new ao([u[3*L],u[3*L+1],u[3*L+2]],Q,O?[O[2*L],O[2*L+1],0]:l),new ao([u[3*r],u[3*r+1],u[3*r+2]],Q,O?[O[2*r],O[2*r+1],0]:l),new ao([u[3*P],u[3*P+1],u[3*P+2]],Q,O?[O[2*P],O[2*P+1],0]:l)],N));else for(H=u.length;H>h;h+=3)L=h,r=h+1,P=h+2,F.push(new wo([new ao([u[3*L],u[3*L+1],u[3*L+2]],Q,O?[O[2*L],O[2*L+1],0]:l),new ao([u[3*r],u[3*r+1],u[3*r+2]],Q,O?[O[2*r],O[2*r+1],0]:l),new ao([u[3*P],u[3*P+1],u[3*P+2]],Q,O?[O[2*P],O[2*P+1],0]:l)],N));return F},ii=[k,A,K,X,x,u],Pi=ii.concat("csg"),tr=[0,6,12,18,24,30],ci=function(c,V,o){for(var e=E(c),b=[],I=0;6>I;I++)for(var C=ii[I],L=tr[I],p=o?V.getFaceUv(c,C):l,$=o?V.getFaceUvScale(c,C):l,P=o?V.getFaceUvOffset(c,C):l,A=0;2>A;A++){var j,k,D,g=T[L+3*A],v=T[L+3*A+1],Y=T[L+3*A+2];if(o){if(p){var U=8*I;j=[p[2*g-U],p[2*g+1-U],0],k=[p[2*v-U],p[2*v+1-U],0],D=[p[2*Y-U],p[2*Y+1-U],0]}else j=[J[2*g],J[2*g+1],0],k=[J[2*v],J[2*v+1],0],D=[J[2*Y],J[2*Y+1],0];$&&(j[0]*=$[0],j[1]*=$[1],k[0]*=$[0],k[1]*=$[1],D[0]*=$[0],D[1]*=$[1]),P&&(j[0]+=P[0],j[1]+=P[1],k[0]+=P[0],k[1]+=P[1],D[0]+=P[0],D[1]+=P[1])}b.push(new wo([new ao(F([m[3*g],m[3*g+1],m[3*g+2]],e),Q,j),new ao(F([m[3*v],m[3*v+1],m[3*v+2]],e),Q,k),new ao(F([m[3*Y],m[3*Y+1],m[3*Y+2]],e),Q,D)],c))}return Xr.$15n(b)},kb=function(b,j){var K,c=b.data.getAttaches();if(c&&c.each(function(Q){Q instanceof Ji&&Q.s("attach.operation")&&(K||(K=[]),K.push(Q))}),K){var F;ii.forEach(function(m){var w=Sh(m,b[m].vs,b[m].tuv);F=F?F.concat(w):w}),F=Xr.$15n(F),K.forEach(function(C){var x=C.s("attach.operation");F[x]&&(F=F[x](ci(C,b.gv,b.csg.tuv)))}),ii.forEach(function(S){S=b[S],S.vs=[],S.tuv&&(S.tuv=[])}),F.$19n().forEach(function(v){var X=v.$10n;if(X instanceof Ji){if(X.s("attach.cull"))return;X="csg"}for(var f=b[X],m=f.vs,h=f.tuv,V=v.$9n,$=2;$<V.length;$++)W(m,V[0].$24n),W(m,V[$-1].$24n),W(m,V[$].$24n),h&&(W(h,V[0].uv,!0),W(h,V[$-1].uv,!0),W(h,V[$].uv,!0))})}Pi.forEach(function(k){var E=b[k];E.visible&&E.vs.length?(E.ns=I(E.vs),S(E,"vs"),S(E,"tuv")):delete b[k]}),j&&(o(b,l,j),b.clear())};G(N,{createFrameModel:function(h,S,I,D){h=h==l?.07:h,S=S==l?h:S,I=I==l?h:I,D=D?D:{};var w=D.top,N=D.bottom,P=D.left,o=D.right,r=D.front,p=D.back,A=[],O=[];return r===!0?(A.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),O.push(0,0,0,1,1,1,1,1,1,0,0,0)):r===!1||(A.push(-.5,.5,.5,-.5,-.5,.5,-.5+h,-.5,.5,-.5+h,-.5,.5,-.5+h,.5,.5,-.5,.5,.5,.5-h,.5,.5,.5-h,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-h,.5,.5,-.5+h,.5,.5,-.5+h,.5-S,.5,.5-h,.5-S,.5,.5-h,.5-S,.5,.5-h,.5,.5,-.5+h,.5,.5,-.5+h,-.5+S,.5,-.5+h,-.5,.5,.5-h,-.5,.5,.5-h,-.5,.5,.5-h,-.5+S,.5,-.5+h,-.5+S,.5),O.push(0,0,0,1,h,1,h,1,h,0,0,0,1-h,0,1-h,1,1,1,1,1,1,0,1-h,0,h,0,h,S,1-h,S,1-h,S,1-h,0,h,0,h,1-S,h,1,1-h,1,1-h,1,1-h,1-S,h,1-S)),p===!0?(A.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),O.push(1,0,0,1,1,1,0,1,1,0,0,0)):p===!1||(A.push(-.5,.5,-.5,-.5+h,-.5,-.5,-.5,-.5,-.5,-.5+h,-.5,-.5,-.5,.5,-.5,-.5+h,.5,-.5,.5-h,.5,-.5,.5,-.5,-.5,.5-h,-.5,-.5,.5,-.5,-.5,.5-h,.5,-.5,.5,.5,-.5,-.5+h,.5,-.5,.5-h,.5-S,-.5,-.5+h,.5-S,-.5,.5-h,.5-S,-.5,-.5+h,.5,-.5,.5-h,.5,-.5,-.5+h,-.5+S,-.5,.5-h,-.5,-.5,-.5+h,-.5,-.5,.5-h,-.5,-.5,-.5+h,-.5+S,-.5,.5-h,-.5+S,-.5),O.push(1,0,1-h,1,1,1,1-h,1,1,0,1-h,0,h,0,0,1,h,1,0,1,h,0,0,0,1-h,0,h,S,1-h,S,h,S,1-h,0,h,0,1-h,1-S,h,1,1-h,1,h,1,1-h,1-S,h,1-S)),P===!0?(A.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),O.push(0,0,0,1,1,1,1,1,1,0,0,0)):P===!1||(A.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+I,-.5,-.5,-.5+I,-.5,.5,-.5+I,-.5,.5,-.5,-.5,.5,.5-I,-.5,-.5,.5-I,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-I,-.5,.5,-.5+I,-.5,.5-S,-.5+I,-.5,.5-S,.5-I,-.5,.5-S,.5-I,-.5,.5,.5-I,-.5,.5,-.5+I,-.5,-.5+S,-.5+I,-.5,-.5,-.5+I,-.5,-.5,.5-I,-.5,-.5,.5-I,-.5,-.5+S,.5-I,-.5,-.5+S,-.5+I),O.push(0,0,0,1,I,1,I,1,I,0,0,0,1-I,0,1-I,1,1,1,1,1,1,0,1-I,0,I,0,I,S,1-I,S,1-I,S,1-I,0,I,0,I,1-S,I,1,1-I,1,1-I,1,1-I,1-S,I,1-S)),o===!0?(A.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),O.push(1,0,0,1,1,1,0,1,1,0,0,0)):o===!1||(A.push(.5,.5,-.5,.5,-.5,-.5+I,.5,-.5,-.5,.5,-.5,-.5+I,.5,.5,-.5,.5,.5,-.5+I,.5,.5,.5-I,.5,-.5,.5,.5,-.5,.5-I,.5,-.5,.5,.5,.5,.5-I,.5,.5,.5,.5,.5,-.5+I,.5,.5-S,.5-I,.5,.5-S,-.5+I,.5,.5-S,.5-I,.5,.5,-.5+I,.5,.5,.5-I,.5,-.5+S,-.5+I,.5,-.5,.5-I,.5,-.5,-.5+I,.5,-.5,.5-I,.5,-.5+S,-.5+I,.5,-.5+S,.5-I),O.push(1,0,1-I,1,1,1,1-I,1,1,0,1-I,0,I,0,0,1,I,1,0,1,I,0,0,0,1-I,0,I,S,1-I,S,I,S,1-I,0,I,0,1-I,1-S,I,1,1-I,1,I,1,1-I,1-S,I,1-S)),w===!0?(A.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),O.push(1,1,1,0,0,0,0,0,0,1,1,1)):w===!1||(A.push(.5,.5,.5,.5,.5,-.5,.5-h,.5,-.5,.5-h,.5,-.5,.5-h,.5,.5,.5,.5,.5,-.5+h,.5,.5,-.5+h,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+h,.5,.5,.5-h,.5,.5,.5-h,.5,.5-I,-.5+h,.5,.5-I,-.5+h,.5,.5-I,-.5+h,.5,.5,.5-h,.5,.5,.5-h,.5,-.5+I,.5-h,.5,-.5,-.5+h,.5,-.5,-.5+h,.5,-.5,-.5+h,.5,-.5+I,.5-h,.5,-.5+I),O.push(1,1,1,0,1-h,0,1-h,0,1-h,1,1,1,h,1,h,0,0,0,0,0,0,1,h,1,1-h,1,1-h,1-I,h,1-I,h,1-I,h,1,1-h,1,1-h,I,1-h,0,h,0,h,0,h,I,1-h,I)),N===!0?(A.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),O.push(1,0,0,1,1,1,0,1,1,0,0,0)):N===!1||(A.push(.5,-.5,.5,.5-h,-.5,-.5,.5,-.5,-.5,.5-h,-.5,-.5,.5,-.5,.5,.5-h,-.5,.5,-.5+h,-.5,.5,-.5,-.5,-.5,-.5+h,-.5,-.5,-.5,-.5,-.5,-.5+h,-.5,.5,-.5,-.5,.5,.5-h,-.5,.5,-.5+h,-.5,.5-I,.5-h,-.5,.5-I,-.5+h,-.5,.5-I,.5-h,-.5,.5,-.5+h,-.5,.5,.5-h,-.5,-.5+I,-.5+h,-.5,-.5,.5-h,-.5,-.5,-.5+h,-.5,-.5,.5-h,-.5,-.5+I,-.5+h,-.5,-.5+I),O.push(1,0,1-h,1,1,1,1-h,1,1,0,1-h,0,h,0,0,1,h,1,0,1,h,0,0,0,1-h,0,h,I,1-h,I,h,I,1-h,0,h,0,1-h,1-I,h,1,1-h,1,h,1,1-h,1-I,h,1-I)),{vs:A,uv:O}}}),G(C.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":q,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":R/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),ii.forEach(function(F){var h={};h[F+n]=!1,h[F+".toggleable"]=!1,h[F+".axis"]=k,h[F+".start"]=0,h[F+".end"]=R/2,h[F+V]=0,G(C.Style,h,!0)});var Xr=function(){this.$4n=[]};Xr.$15n=function(G){var Q=new Xr;return Q.$4n=G,Q},Xr.prototype={clone:function(){var v=new Xr;return v.$4n=this.$4n.map(function(e){return e.clone()}),v},$19n:function(){return this.$4n},union:function(Q){var i=new mn(this.clone().$4n),g=new mn(Q.clone().$4n);return i.$3n(g),g.$3n(i),g.$6n(),g.$3n(i),g.$6n(),i.$7n(g.$2n()),Xr.$15n(i.$2n())},subtract:function(B){var A=new mn(this.clone().$4n),e=new mn(B.clone().$4n);return A.$6n(),A.$3n(e),e.$3n(A),e.$6n(),e.$3n(A),e.$6n(),A.$7n(e.$2n()),A.$6n(),Xr.$15n(A.$2n())},intersect:function(w){var U=new mn(this.clone().$4n),j=new mn(w.clone().$4n);return U.$6n(),j.$3n(U),j.$6n(),U.$3n(j),j.$3n(U),U.$7n(j.$2n()),U.$6n(),Xr.$15n(U.$2n())},inverse:function(){var H=this.clone();return H.$4n.map(function(R){R.flip()}),H}},Xr.cube=function(N){N=N||{};var q=new Ko(N.center||[0,0,0]),u=N.radius?N.radius.length?N.radius:[N.radius,N.radius,N.radius]:[1,1,1];return Xr.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(h){return new wo(h[0].map(function(o){var v=new Ko(q.x+u[0]*(2*!!(1&o)-1),q.y+u[1]*(2*!!(2&o)-1),q.z+u[2]*(2*!!(4&o)-1));return new ao(v,new Ko(h[1]))}))}))},Xr.sphere=function(z){function F(V,$){V*=2*R,$*=R;var i=new Ko(H(V)*a($),H($),a(V)*a($));m.push(new ao(W.$20n(i.$21n(K)),i))}z=z||{};for(var m,W=new Ko(z.center||[0,0,0]),K=z.radius||1,u=z.slices||16,o=z.stacks||8,B=[],L=0;u>L;L++)for(var A=0;o>A;A++)m=[],F(L/u,A/o),A>0&&F((L+1)/u,A/o),o-1>A&&F((L+1)/u,(A+1)/o),F(L/u,(A+1)/o),B.push(new wo(m));return Xr.$15n(B)},Xr.cylinder=function(o){function X(N,f,F){var e=2*f*R,b=h.$21n(H(e)).$20n(s.$21n(a(e))),Q=P.$20n(O.$21n(N)).$20n(b.$21n(i)),L=b.$21n(1-w(F)).$20n(B.$21n(F));return new ao(Q,L)}o=o||{};for(var P=new Ko(o.start||[0,-1,0]),f=new Ko(o.end||[0,1,0]),O=f.$13n(P),i=o.radius||1,F=o.slices||16,B=O.$14n(),L=w(B.y)>.5,h=new Ko(L,!L,0).$12n(B).$14n(),s=h.$12n(B).$14n(),I=new ao(P,B.$11n()),M=new ao(f,B.$14n()),K=[],j=0;F>j;j++){var E=j/F,W=(j+1)/F;K.push(new wo([I,X(0,E,-1),X(0,W,-1)])),K.push(new wo([X(0,W,0),X(0,E,0),X(1,E,0),X(1,W,0)])),K.push(new wo([M,X(1,W,1),X(1,E,1)]))}return Xr.$15n(K)};var Ko=function(F,C,T){var y=this;3==arguments.length?(y.x=F,y.y=C,y.z=T):"x"in F?(y.x=F.x,y.y=F.y,y.z=F.z):(y.x=F[0],y.y=F[1],y.z=F[2])};Ko.prototype={clone:function(){return new Ko(this.x,this.y,this.z)},$11n:function(){return new Ko(-this.x,-this.y,-this.z)},$20n:function(W){return new Ko(this.x+W.x,this.y+W.y,this.z+W.z)},$13n:function(S){return new Ko(this.x-S.x,this.y-S.y,this.z-S.z)},$21n:function(w){return new Ko(this.x*w,this.y*w,this.z*w)},$16n:function(d){return new Ko(this.x/d,this.y/d,this.z/d)},$23n:function(D){return this.x*D.x+this.y*D.y+this.z*D.z},lerp:function(v,J){return this.$20n(v.$13n(this).$21n(J))},length:function(){return U(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(T){var j=this;return new Ko(j.y*T.z-j.z*T.y,j.z*T.x-j.x*T.z,j.x*T.y-j.y*T.x)}};var ao=function(x,D,w){var r=this;r.$24n=new Ko(x),r.$22n=new Ko(D),r.uv=w?new Ko(w):null};ao.prototype={clone:function(){var a=this;return new ao(a.$24n.clone(),a.$22n.clone(),a.uv?a.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(d,v){var c=this;return new ao(c.$24n.lerp(d.$24n,v),c.$22n.lerp(d.$22n,v),c.uv?c.uv.lerp(d.uv,v):null)}};var Yf=function(B,J){this.$22n=B,this.w=J};Yf.$17n=function(g,S,a){var e=S.$13n(g).$12n(a.$13n(g)).$14n();return new Yf(e,e.$23n(g))},Yf.prototype={clone:function(){return new Yf(this.$22n.clone(),this.w)},flip:function(){var F=this;F.$22n=F.$22n.$11n(),F.w=-F.w},$5n:function(Q,E,k,W,w){for(var p=this,_=0,e=1,i=2,Y=3,v=0,l=[],G=0;G<Q.$9n.length;G++){var T=p.$22n.$23n(Q.$9n[G].$24n)-p.w,m=-j>T?i:T>j?e:_;v|=m,l.push(m)}switch(v){case _:(p.$22n.$23n(Q.$8n.$22n)>0?E:k).push(Q);break;case e:W.push(Q);break;case i:w.push(Q);break;case Y:for(var V=[],D=[],G=0;G<Q.$9n.length;G++){var A=(G+1)%Q.$9n.length,g=l[G],c=l[A],P=Q.$9n[G],s=Q.$9n[A];if(g!=i&&V.push(P),g!=e&&D.push(g!=i?P.clone():P),(g|c)==Y){var T=(p.w-this.$22n.$23n(P.$24n))/p.$22n.$23n(s.$24n.$13n(P.$24n)),K=P.$18n(s,T);V.push(K),D.push(K.clone())}}V.length>=3&&W.push(new wo(V,Q.$10n)),D.length>=3&&w.push(new wo(D,Q.$10n))}}};var wo=function(O,K){var V=this;V.$9n=O,V.$10n=K,V.$8n=Yf.$17n(O[0].$24n,O[1].$24n,O[2].$24n)};wo.prototype={clone:function(){var g=this.$9n.map(function(r){return r.clone()});return new wo(g,this.$10n)},flip:function(){this.$9n.reverse().map(function(j){j.flip()}),this.$8n.flip()}};var mn=function(L){var o=this;o.$8n=null,o.front=null,o.back=null,o.$4n=[],L&&o.$7n(L)};mn.prototype={clone:function(){var Z=this,Q=new mn;return Q.$8n=Z.$8n&&Z.$8n.clone(),Q.front=Z.front&&Z.front.clone(),Q.back=Z.back&&Z.back.clone(),Q.$4n=Z.$4n.map(function(i){return i.clone()}),Q},$6n:function(){for(var t=this,E=0;E<t.$4n.length;E++)t.$4n[E].flip();t.$8n.flip(),t.front&&t.front.$6n(),t.back&&t.back.$6n();var I=t.front;t.front=t.back,t.back=I},$1n:function(e){var O=this;if(!O.$8n)return e.slice();for(var P=[],h=[],$=0;$<e.length;$++)O.$8n.$5n(e[$],P,h,P,h);return O.front&&(P=O.front.$1n(P)),h=O.back?O.back.$1n(h):[],P.concat(h)},$3n:function(Y){var e=this;e.$4n=Y.$1n(e.$4n),e.front&&e.front.$3n(Y),e.back&&e.back.$3n(Y)},$2n:function(){var O=this,Q=O.$4n.slice();return O.front&&(Q=Q.concat(O.front.$2n())),O.back&&(Q=Q.concat(O.back.$2n())),Q},$7n:function(w){var s=this;if(w.length){s.$8n||(s.$8n=w[0].$8n.clone());for(var j=[],Y=[],D=0;D<w.length;D++)this.$8n.$5n(w[D],s.$4n,s.$4n,j,Y);j.length&&(s.front||(s.front=new mn),this.front.$7n(j)),Y.length&&(s.back||(s.back=new mn),s.back.$7n(Y))}}};var vs="symbol",Do=C.Symbol=function(u,x,Y){var V=this;d(Do,V),V.s3(20,20,20),V.s({"all.visible":!1,shape:"rect"}),V.setIcon(u,x,Y)};r("Symbol",y,{setIcon:function(R,L,Z){var I,s=this;return Do.superClass.setIcon.call(s,R),R?(I={for3d:!0,face:"center",position:44,names:[R]},Z&&(I.transaprent=!0),L&&(I.autorotate=L),s.addStyleIcon(vs,I)):s.removeStyleIcon(vs),s.setWidth(p.getImageWidth(N.getImage(R),s)||20),I}});var Ji=C.CSGNode=function(){d(Ji,this),this.s({shape:"rect","attach.thickness":1.001})},ye={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};r("CSGNode",y,{_22Q:function(){return Of},onPropertyChanged:function(U){var e=this,B=e.getHost();Ji.superClass.onPropertyChanged.call(e,U),ye[U.property]&&(B instanceof ke||B instanceof Ji)&&B.fp("csgNodeChange",!0,!1)}});var Of=function(o,C){d(Of,this,[o,C])};z(Of,i.Node3dUI,{_80o:function(O,Z,L){var q=this;q._shape3d?Of.superClass._80o.call(q,O,Z,L):(P(q.gv),Pi.forEach(function(Q){g(q,O,Z,q[Q],L)}))},validate:function(n,b){var s=this,o=s.gv,v=s.data;if(v.s("shape3d"))return Of.superClass.validate.call(s,n,b),s._shape3d=!0,void 0;s._shape3d=!1;var i=E(v,o.getMat(v)),B=n&&n.uv;s.vf2("csg",B);for(var r=0;6>r;r++)for(var K=ii[r],Q=tr[r],G=s.vf2(K,B,b),O=G.mat||i,S=G.vs,y=G.uv,u=G.tuv,W=0;2>W;W++){var h=T[Q+3*W],M=T[Q+3*W+1],X=T[Q+3*W+2];if(Y(S,O,[m[3*h],m[3*h+1],m[3*h+2]]),Y(S,O,[m[3*M],m[3*M+1],m[3*M+2]]),Y(S,O,[m[3*X],m[3*X+1],m[3*X+2]]),u)if(y){var x=8*r;u.push(y[2*h-x],y[2*h+1-x],y[2*M-x],y[2*M+1-x],y[2*X-x],y[2*X+1-x])}else u.push(J[2*h],J[2*h+1],J[2*M],J[2*M+1],J[2*X],J[2*X+1])}kb(s,n,b)},vf2:function(Y,b,M){var O,J=this,$=J.gv.getFaceVisible(J.data,Y);return O=f(J,Y,M),O.vs=[],O.tuv=$&&(O.texture||b)?[]:l,O.visible=$,O}});var ke=C.CSGShape=function(){var i=this;d(ke,i),i.s({"shape.background":l,"shape.border.width":8}),i.setTall(240),i.setElevation(120),i.setThickness(14)};r("CSGShape",b,{IRotatable:!1,_22Q:function(){return fi},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var fi=function(I,g){d(fi,this,[I,g])};z(fi,i.Shape3dUI,{_80o:function(v,l,U){var H=this;H.undrawable||(P(H.gv),Pi.forEach(function($){g(H,v,l,H[$],U)}))},validate:function(c,d){var D=this,Z=D.data,C=Z.getPoints();if(D.undrawable=C.size()<2)return D.clear(),void 0;var a=Z.isClosePath(),x=v(Z._thickness/2,j),u=_(C,l,l,a);Pi.forEach(function(J){D.vf(J,c&&c.uv,!0,d)}),a&&(D.left.visible=!1,D.right.visible=!1),D._12O(u,x),D._20Q(u),kb(D,c,d)}});var zn=C.DoorWindow=function(){var Z=this;d(zn,Z),Z.setElevation(100),Z.s3(100,200,14)};r("DoorWindow",Ji,{IDoorWindow:!0,toggle:function(n){this.setExpanded(!this.s(L),n)},isExpanded:function(){return this.s(L)},setExpanded:function(h,i){var s,_=this,B=_.$25n,o=_.getDataModel(),y=_.s(L);if(o&&(s=o.getHistoryManager()),B&&(B.stop(!0),delete _.$25n),y!==h){s&&s.beginInteraction();var u=h?_.s("dw.end"):_.s("dw.start");_.s(L,h),i=Z(i),i?(y=_.s(c),i.action=function(H){_.s(c,y+(u-y)*H)},i.finishFunc=function(){s&&s.endInteraction()},_.$25n=M(i)):(_.s(c,u),s&&s.endInteraction())}},getMat:function(){var E=this,q=E.s("dw.s3"),s=E.s("dw.t3"),h=E.s("dw.flip"),W=E.s(c);if(q||W||s||h){var Q=[];if(h&&Q.push({r3:[0,R,0]}),q&&Q.push({s3:q}),W){q=E.s3();var J=E.s("dw.axis"),S=q[0]/2,o=q[1]/2;q[2]/2,J===k?Q.push({t3:[S,0,0]},{r3:[0,-W,0]},{t3:[-S,0,0]}):J===K?Q.push({t3:[-S,0,0]},{r3:[0,W,0]},{t3:[S,0,0]}):J===x?Q.push({t3:[0,-o,0]},{r3:[-W,0,0]},{t3:[0,o,0]}):J===u?Q.push({t3:[0,o,0]},{r3:[W,0,0]},{t3:[0,-o,0]}):J===$?Q.push({r3:[0,W,0]}):J===e&&Q.push({r3:[W,0,0]})}return s&&Q.push({t3:s}),D(Q)}return l}});var Ek=C.CSGBox=function(){var E=this;d(Ek,E),E.setElevation(100),E.s3(100,200,100)};r("CSGBox",Ji,{ICSGBox:!0,toggleFace:function($,l){this.setFaceExpanded($,!this.s($+n),l)},isFaceExpanded:function(u){return this.s(u+n)},setFaceExpanded:function(r,E,f){var I=this,K=I.$25n,X=I.s(r+n);if(K&&(K.stop(!0),delete I.$25n),X!==E){var s=E?I.s(r+".end"):I.s(r+".start");I.s(r+n,E),f=Z(f),f?(X=I.s(r+V),f.action=function(A){I.s(r+V,X+(s-X)*A)},I.$25n=M(f)):I.s(r+V,s)}},getFaceMat:function(G){var W=this,w=W.s(G+V);if(!w)return l;var J=W.s(G+".axis"),I=W.s3(),z=I[0]/2,j=I[1]/2,t=I[2]/2,Q=[];return G===A&&(J===k?Q.push({t3:[z,0,-t]},{r3:[0,-w,0]},{t3:[-z,0,t]}):J===K?Q.push({t3:[-z,0,-t]},{r3:[0,w,0]},{t3:[z,0,t]}):J===x?Q.push({t3:[0,-j,-t]},{r3:[-w,0,0]},{t3:[0,j,t]}):J===u?Q.push({t3:[0,j,-t]},{r3:[w,0,0]},{t3:[0,-j,t]}):J===$?Q.push({t3:[0,0,-t]},{r3:[0,w,0]},{t3:[0,0,t]}):J===e&&Q.push({t3:[0,0,-t]},{r3:[w,0,0]},{t3:[0,0,t]})),G===X&&(J===k?Q.push({t3:[-z,0,t]},{r3:[0,-w,0]},{t3:[z,0,-t]}):J===K?Q.push({t3:[z,0,t]},{r3:[0,w,0]},{t3:[-z,0,-t]}):J===x?Q.push({t3:[0,-j,t]},{r3:[w,0,0]},{t3:[0,j,-t]}):J===u?Q.push({t3:[0,j,t]},{r3:[-w,0,0]},{t3:[0,-j,-t]}):J===$?Q.push({t3:[0,0,t]},{r3:[0,w,0]},{t3:[0,0,-t]}):J===e&&Q.push({t3:[0,0,t]},{r3:[w,0,0]},{t3:[0,0,-t]})),G===k&&(J===k?Q.push({t3:[z,0,t]},{r3:[0,-w,0]},{t3:[-z,0,-t]}):J===K?Q.push({t3:[z,0,-t]},{r3:[0,w,0]},{t3:[-z,0,t]}):J===x?Q.push({t3:[z,-j,0]},{r3:[0,0,-w]},{t3:[-z,j,0]}):J===u?Q.push({t3:[z,j,0]},{r3:[0,0,w]},{t3:[-z,-j,0]}):J===$?Q.push({t3:[z,0,0]},{r3:[0,w,0]},{t3:[-z,0,0]}):J===e&&Q.push({t3:[z,0,0]},{r3:[0,0,w]},{t3:[-z,0,0]})),G===K&&(J===k?Q.push({t3:[-z,0,-t]},{r3:[0,-w,0]},{t3:[z,0,t]}):J===K?Q.push({t3:[-z,0,t]},{r3:[0,w,0]},{t3:[z,0,-t]}):J===x?Q.push({t3:[-z,-j,0]},{r3:[0,0,w]},{t3:[z,j,0]}):J===u?Q.push({t3:[-z,j,0]},{r3:[0,0,-w]},{t3:[z,-j,0]}):J===$?Q.push({t3:[-z,0,0]},{r3:[0,w,0]},{t3:[z,0,0]}):J===e&&Q.push({t3:[-z,0,0]},{r3:[0,0,w]},{t3:[z,0,0]})),G===x&&(J===k?Q.push({t3:[z,-j,0]},{r3:[0,0,w]},{t3:[-z,j,0]}):J===K?Q.push({t3:[-z,-j,0]},{r3:[0,0,-w]},{t3:[z,j,0]}):J===x?Q.push({t3:[0,-j,t]},{r3:[-w,0,0]},{t3:[0,j,-t]}):J===u?Q.push({t3:[0,-j,-t]},{r3:[w,0,0]},{t3:[0,j,t]}):J===$?Q.push({t3:[0,-j,0]},{r3:[0,0,w]},{t3:[0,j,0]}):J===e&&Q.push({t3:[0,-j,0]},{r3:[w,0,0]},{t3:[0,j,0]})),G===u&&(J===k?Q.push({t3:[z,j,0]},{r3:[0,0,-w]},{t3:[-z,-j,0]}):J===K?Q.push({t3:[-z,j,0]},{r3:[0,0,w]},{t3:[z,-j,0]}):J===x?Q.push({t3:[0,j,-t]},{r3:[-w,0,0]},{t3:[0,-j,t]}):J===u?Q.push({t3:[0,j,t]},{r3:[w,0,0]},{t3:[0,-j,-t]}):J===$?Q.push({t3:[0,j,0]},{r3:[0,0,w]},{t3:[0,-j,0]}):J===e&&Q.push({t3:[0,j,0]},{r3:[w,0,0]},{t3:[0,-j,0]})),D(Q)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);