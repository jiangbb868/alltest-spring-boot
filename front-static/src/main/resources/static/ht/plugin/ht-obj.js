!function(v,n,z){"use strict";var k="ht",A=v[k],B=null,$=Math,i=$.abs,p=$.max,I=Number.MAX_VALUE,Q=A.Default,L=Q.getInternal(),e=Q.clone,d=L.vec3TransformMat4,r=L.appendArray,h=function(){var M=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,D=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,V=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,H=function(M,a){return a=parseInt(a),a>=0?M[a-1]:M[a+M.length]},C=function(o,_,U,W,k,L){if(o.vs){var C=H(_,W),Y=H(_,k),q=H(_,L),E=U.matrix,$=o.vs;if(U.flipFace){var Z=Y;Y=q,q=Z}E?(r($,d(e(C),E)),r($,d(e(Y),E)),r($,d(e(q),E))):(r($,C),r($,Y),r($,q))}},U=function(Y,m,O,v,y,h){if(Y.vs){var C=H(m,v),G=H(m,y),u=H(m,h),f=O.flipY;if(O.flipFace){var b=G;G=u,u=b}Y.uv.push(C[0],f?1-C[1]:C[1],G[0],f?1-G[1]:G[1],u[0],f?1-u[1]:u[1])}},x=function(E,P,q,N,u,a){if(E.vs){var c=H(P,N),F=H(P,u),j=H(P,a),I=q.normalMatrix,g=E.ns;if(q.flipFace){var o=F;F=j,j=o}I?(r(g,d(e(c),I)),r(g,d(e(F),I)),r(g,d(e(j),I))):(r(g,c),r(g,F),r(g,j))}},W=function(j,f,B,l,I,G,_,s){var b=l&&l.length&&s;G[3]===z?(C(j,f,I,G[0],G[1],G[2]),_&&U(j,B,I,_[0],_[1],_[2]),b&&x(j,l,I,s[0],s[1],s[2])):(C(j,f,I,G[0],G[1],G[3]),C(j,f,I,G[1],G[2],G[3]),_&&(U(j,B,I,_[0],_[1],_[3]),U(j,B,I,_[1],_[2],_[3])),b&&(x(j,l,I,s[0],s[1],s[3]),x(j,l,I,s[1],s[2],s[3])))},T=function(F,g,H,J){var c,N,r,l,P,j,h,s=I,v=I,Y=I,t=-I,W=-I,y=-I;for(c in F)for(j=F[c].vs,h=j.length,N=0;h>N;N+=3)r=j[N+0],l=j[N+1],P=j[N+2],s>r&&(s=r),v>l&&(v=l),Y>P&&(Y=P),r>t&&(t=r),l>W&&(W=l),P>y&&(y=P);if(H){var u=s+(t-s)/2,T=v+(W-v)/2,Z=Y+(y-Y)/2;for(c in F)for(j=F[c].vs,h=j.length,N=0;h>N;N+=3)j[N+0]-=u,j[N+1]-=T,j[N+2]-=Z}var M,K,x;H?(M=t-s,K=W-v,x=y-Y):(M=2*p(i(s),i(t)),K=2*p(i(v),i(W)),x=2*p(i(Y),i(y))),J.rawS3=[M,K,x];for(c in F){if(j=F[c].vs,g)for(h=j.length,N=0;h>N;N+=3)M&&(j[N+0]/=M),K&&(j[N+1]/=K),x&&(j[N+2]/=x);F[c].rawS3=J.rawS3}};return function(X,K,C){if(!X)return B;L.isString(K)&&(K=E(K)),C||(C={}),C.flipY==B&&(C.flipY=!0),(C.s3||C.r3||C.t3||C.mat)&&(C.matrix=L.createWorldMatrix(C.mat,C.s3,C.r3,C.rotationMode,C.t3));var i,j,g,H,F,r,R=[],t=[],P=C.ignoreNormal?B:[],d=C.reverseFlipMtls,k={vs:[],uv:[],ns:P?[]:B},b={htdefault:k},l=X.split("\n"),_=0;for(P&&C.matrix&&(C.normalMatrix=L.createNormalMatrix(C.matrix));_<l.length;_++)if(j=l[_].trim(),0!==j.length&&"#"!==j.charAt(0))if(g=M.exec(j))R.push([parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])]);else if(g=D.exec(j))t.push([parseFloat(g[1]),parseFloat(g[2])]);else if(P&&(g=V.exec(j)))C.flipFace?P.push([parseFloat(-g[1]),parseFloat(-g[2]),parseFloat(-g[3])]):P.push([parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])]);else if("f"===j[0]){var v=j.split(/\s+/);if(v.length<4)continue;var q,i,s,h=[],a=[],$=[];for(i=1,s=v.length;s>i;i++)q=v[i].split("/"),h.push(parseInt(q[0],10)),q.length>1&&q[1].length>0&&$.push(parseInt(q[1],10)),q.length>2&&q[2].length>0&&a.push(parseInt(q[2],10));for(i=0,s=h.length-2;s>i;i++)W(k,R,t,P,C,[h[0],h[i+1],h[i+2]],$.length?[$[0],$[i+1],$[i+2]]:B,a.length?[a[0],a[i+1],a[i+2]]:B)}else if(/^usemtl /.test(j)&&(H=j.substring(7).trim(),!(k=b[H]))){if(k={name:H,vs:[],uv:[],ns:P?[]:B},C.ignoreMtls&&C.ignoreMtls.indexOf(H)>=0&&delete k.vs,(C.reverseFlip||"*"===d||d&&d.indexOf(H)>=0)&&(k.reverseFlip=!0),K&&(F=K[H],F&&(C.ignoreColor||(k.color=F.kd),!C.ignoreTransparent&&F.d>0&&F.d<1&&(k.transparent=!0,k.opacity=F.d),!C.ignoreImage&&(r=F.map_kd)))){for(r=r.split(" "),i=0;i<r.length;i++)"-o"===r[i]?(k.uvOffset=[parseFloat(r[i+1]),parseFloat(r[i+2])],i+=2):"-s"===r[i]&&(k.uvScale=[parseFloat(r[i+1]),parseFloat(r[i+2])],i+=2);k.image=(C.prefix||"")+r[r.length-1]}b[H]=k}var u=[];for(var O in b){var z=b[O].vs;z&&0!==z.length||u.push(O)}u.forEach(function(H){delete b[H]}),T(b,C.cube,C.center,C);var U=C.shape3d;if(U){var e=[];for(var H in b){var k=b[H];e.rawS3=k.rawS3,e.push(k)}Q.setShape3dModel(U,e)}return b}}(),E=function(X){var b={};if(X)for(var p,V,y,A,T,k,d=X.split("\n"),C=/\s+/,S=0;S<d.length;S++)V=d[S].trim(),0!==V.length&&"#"!==V.charAt(0)&&(y=V.indexOf(" "),A=(y?V.substring(0,y):V).toLowerCase(),T=(y?V.substring(y+1):"").trim(),"newmtl"===A?b[T]=p={name:T}:p&&("ka"===A||"kd"===A||"ks"===A?(k=T.split(C,3),p[A]=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2]),1]):p[A]="ns"===A||"d"===A?parseFloat(T):T));return b};L.addMethod(Q,{loadObj:function(u,r,X){X=X||{},Q.xhrLoad(r?[u,r]:[u],function(i){var V,U=X.finishFunc,j=X.shape3d,n=i?h(i[0],i[1],X):null;if(n){if(j)V=Q.getShape3dModel(j);else{V=[];for(var W in n){var l=n[W];V.rawS3=l.rawS3,V.push(l)}}U&&U(n,V,V.rawS3)}else U&&U(null)},X)},parseObj:function(Z,u,f){return h(Z,u,f)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);