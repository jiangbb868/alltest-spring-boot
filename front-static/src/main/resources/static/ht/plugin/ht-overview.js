!function(a,w){"use strict";var x="ht",Z=x+".graph.",k=a[x],A=k.graph,U=k.Default,N=k.Color,i=null,G="px",n=U.getInternal(),r=n.getPinchDist,c=U.preventDefault,z=U.getTouchCount,E=U.startDragging;n.addMethod(U,{overviewBackground:N.widgetBackground,overviewMaskBackground:N.transparent,overviewContentBorderColor:N.widgetBorder,overviewContentBackground:N.background},!0),A.Overview=function(L){var p=this,I=p._view=n.createDiv(1);p._canvas=n.createCanvas(I),I.style.background=U.overviewBackground,I.appendChild(p._mask=n.createDiv()),p.gv=L,p.redraw(),p.addListeners(),L.addViewListener(p.handleView,p)},U.def(Z+"Overview",w,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:U.overviewMaskBackground,_contentBorderColor:U.overviewContentBorderColor,_contentBackground:U.overviewContentBackground,getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){var Z=this;Z.gv.removeViewListener(Z.handleView,Z)},onPropertyChanged:function(){this.redraw()},handleView:function(v){this._autoUpdate&&"validate"===v.kind&&this.redraw()},redraw:function(){var P=this;P._redraw||(P._redraw=1,P.iv(50))},validateImpl:function(){var P=this,H=P.gv,V=P._canvas,t=P._mask,b=t.style,e=P.getWidth(),m=P.getHeight(),D=H.getViewRect(),S=H.getScrollRect(),C=S.x,E=S.y,T=S.width,Z=S.height,y=P._rate=Math.max(T/e,Z/m),x=P._x=(e-T/y)/2,k=P._y=(m-Z/y)/2,u=P._redraw;if(0!==D.width&&0!==D.height||P.hasRetry||(U.callLater(P.iv,P,i),P.hasRetry=!0),(e!==V.clientWidth||m!==V.clientHeight)&&(n.setCanvas(V,e,m,1),u=1),n.isSameRect(S,P._scrollRect)||(P._scrollRect=S,u=1),u){var M=n.initContext(V),o=P._contentBackground,p=P._contentBorderColor;M.clearRect(0,0,e,m),o&&n.fillRect(M,x,k,T/y,Z/y,o),p&&n.drawBorder(M,p,x,k,T/y,Z/y),M.translate(-C/y+x,-E/y+k),M.scale(1/y,1/y),H._42(M),M.restore()}b.background=P._maskBackground,b.left=x+(D.x-C)/y+G,b.top=k+(D.y-E)/y+G,b.width=D.width/y+G,b.height=D.height/y+G,delete P._redraw},center:function(I){var s=this,O=s.gv,t=O._zoom,q=O._29I,b=s._rate,d=s._scrollRect,X=U.getLogicalPoint(I,s._canvas),Z=d.x+(X.x-s._x)*b,f=d.y+(X.y-s._y)*b;O.setTranslate((q.width/2-Z)*t,(q.height/2-f)*t)},handle_mousedown:function(C){this.handle_touchstart(C)},handleWindowMouseUp:function(I){this.handleWindowTouchEnd(I)},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},handle_mousewheel:function(O){this.handleScroll(O,O.wheelDelta)},handle_DOMMouseScroll:function(k){2===k.axis&&this.handleScroll(k,-k.detail)},handleScroll:function(k,a){c(k);var X=this.gv;a>0?X.scrollZoomIn():0>a&&X.scrollZoomOut()},handle_touchstart:function(x){if(c(x),U.isLeftButton(x)){var R=this,N=R.gv,A=z(x);1===A?U.isDoubleClick(x)&&N.isResettable()?N.reset():(R.center(x),E(R,x)):2===A&&(R._dist=r(x),E(R,x))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(h){var P=this,C=P._dist,p=z(h);1===p?P.center(h):2===p&&C!=i&&P.gv.handlePinch(i,r(h),C)}})}(this,Object);