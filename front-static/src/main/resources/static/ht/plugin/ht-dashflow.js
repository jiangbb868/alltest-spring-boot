!function(a){"use strict";var W="ht",E=a[W],r=E.Default,m=Math,c=(m.PI,m.sin,m.cos,m.atan2,m.sqrt,m.max),s=m.floor,i=(m.round,m.ceil),S=E.Shape,U=(E.Edge,E.List),n=E.Style,o=E.graph,H=r.getInternal(),D=H.ui(),X=null,$="prototype",q=a.clearInterval,R=a.setInterval,v=function(t){var Y=t.data,z=this.dm();if(Y&&"add"===t.kind){var E=z.$1c,M=Y instanceof S?"shape.":"edge.";E&&Y.s(M+"dash.flow")&&E.indexOf(Y)<0&&E.push(Y)}"clear"===t.kind&&(z.$1c=[])},y=function(k){var x=k.property,O=k.data,C=k.newValue,z=this.dm().$1c,Z=O instanceof S?"s:shape.dash.flow":"s:edge.dash.flow";if(z&&x===Z)if(C)z.indexOf(O)<0&&z.push(O);else for(var j=z.length,J=0;j>J;J++)if(z[J]===O){z.splice(J,1);break}},h=o.GraphView[$],J=D.EdgeUI[$],p=D.ShapeUI[$],w=p._80o,T=J._80o,G=E.DataModel[$],M=G.prepareRemove,A=h.setDataModel;n["edge.dash.flow.step"]==X&&(n["edge.dash.flow.step"]=3),n["shape.dash.flow.step"]==X&&(n["shape.dash.flow.step"]=3),G.prepareRemove=function(X){M.call(this,X);var F=X._dataModel,f=F.$1c;if(f)for(var d=f.length,L=0;d>L;L++)if(f[L]===X){f.splice(L,1);break}},h.setDataModel=function(E){var Y=this,V=Y._dataModel;if(V!==E){V&&(V.umm(v,Y),V.umd(y,Y),V.$1c=[]),E.mm(v,Y),E.md(y,Y);var x=E.$1c=[];E.each(function(T){var G=T instanceof S?"shape.":"edge.";T.s(G+"dash.flow")&&x.indexOf(T)<0&&x.push(T)}),A.call(Y,E)}},h.setDashFlowInterval=function(H){var B=this,E=B.$2c;B.$2c=H,B.fp("dashFlowInterval",E,H),B.$3c!=X&&(q(B.$3c),delete B.$3c,B.enableDashFlow(H))},h.getDashFlowInterval=function(){return this.$2c},h.$4c=function(){var o,q,Y,w=this,O=w.tx(),b=w.ty(),X=w._zoom,Z=w.getWidth(),a=w.getHeight(),G={x:-O/X,y:-b/X,width:Z/X,height:a/X},P=w.dm().$1c,y=w._56I,B=new U;if(P.forEach(function(h){y[h.getId()]&&(o=w.getDataUI(h),o&&(Y=o._79o(),Y&&B.add(Y)))}),0!==B.size()&&(B.each(function(x){r.intersectsRect(G,x)&&(q=r.unionRect(q,x))}),q&&(q&&(r.grow(q,c(1,1/X)),q.x=s(q.x*X)/X,q.y=s(q.y*X)/X,q.width=i(q.width*X)/X,q.height=i(q.height*X)/X,q=r.intersection(G,q)),q))){var K=w._canvas.getContext("2d");K.save(),K.lineCap=r.lineCap,K.lineJoin=r.lineJoin,H.translateAndScale(K,O,b,X),K.beginPath(),K.rect(q.x,q.y,q.width,q.height),K.clip(),K.clearRect(q.x,q.y,q.width,q.height),w.$5c(K,q),K.restore()}},h.$5c=function($,Q){var N,F,x=this;x._93db($),x.each(function(S){x._56I[S._id]&&(N=x.getDataUI(S),N&&(F=N._79o(),(!Q||r.intersectsRect(Q,F))&&(N.$7c=!0,N._42($),delete N.$7c)))}),x._92db($)},h.enableDashFlow=function(g){var I=this;I.$3c==X&&(I.$3c=R(function(){I.$4c()},g||I.$2c||50))},h.disableDashFlow=function(){var u=this;q(u.$3c),delete u.$3c};var Y=function(){var J=this,P=J._data,u=P instanceof S?"shape.":"edge.",e=P.s(u+"dash.pattern"),x=P.s(u+"dash.flow.reverse");if(e&&P.s(u+"dash")&&P.s(u+"dash.flow")&&J.$7c){var G=J.s(u+"dash.offset")||0,U=P.s(u+"dash.flow.step"),m=P.getStyleMap(),r=0;e.forEach(function(T){r+=T}),x&&(U=-U),G-=U,G%=r,m||(P._styleMap=m={}),m[u+"dash.offset"]=G}};J._80o=function(D){T.call(this,D),Y.call(this)},p._80o=function(Q){w.call(this,Q),Y.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);